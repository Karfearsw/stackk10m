{"file_contents":{"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4419,"size_tokens":null},"client/src/pages/contracts.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Plus, Filter, FileText, Download, Eye } from \"lucide-react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nexport default function Contracts() {\n  const { data: contracts = [], isLoading } = useQuery({\n    queryKey: [\"contracts\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/contracts\");\n      if (!res.ok) throw new Error(\"Failed to fetch contracts\");\n      return res.json();\n    }\n  });\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"text-center py-12\">Loading contracts...</div>\n      </Layout>\n    );\n  }\n\n  const totalContracts = contracts.length;\n  const signedContracts = contracts.filter((c: any) => c.status === \"signed\").length;\n  const pendingContracts = contracts.filter((c: any) => c.status === \"pending\").length;\n  const completedContracts = contracts.filter((c: any) => c.status === \"completed\").length;\n\n  return (\n    <Layout>\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n        <div className=\"space-y-1\">\n          <h1 className=\"text-3xl font-bold tracking-tight\">Contracts</h1>\n          <p className=\"text-muted-foreground\">Manage purchase agreements and contracts.</p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"outline\" size=\"sm\">\n            <Filter className=\"mr-2 h-4 w-4\" /> Filter\n          </Button>\n          <Button size=\"sm\">\n            <Plus className=\"mr-2 h-4 w-4\" /> New Contract\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-4 mb-6\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Total Contracts</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">{totalContracts}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Pending Signature</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold text-primary\">{pendingContracts}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Signed</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">{signedContracts}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Completed</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">{completedContracts}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"rounded-md border bg-card\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>Contract ID</TableHead>\n              <TableHead>Property ID</TableHead>\n              <TableHead>Amount</TableHead>\n              <TableHead>Status</TableHead>\n              <TableHead>Sign Date</TableHead>\n              <TableHead className=\"text-right\">Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {contracts.map((contract: any) => (\n              <TableRow key={contract.id} className=\"hover:bg-muted/50\">\n                <TableCell className=\"font-medium\">C-{contract.id}</TableCell>\n                <TableCell>{contract.propertyId}</TableCell>\n                <TableCell className=\"font-medium text-primary\">${contract.amount ? parseInt(contract.amount).toLocaleString() : \"—\"}</TableCell>\n                <TableCell>\n                  <Badge \n                    className={\n                      contract.status === \"signed\" ? \"bg-primary text-primary-foreground\" :\n                      contract.status === \"pending\" ? \"bg-yellow-600 text-white\" :\n                      \"bg-green-600 text-white\"\n                    }\n                  >\n                    {contract.status}\n                  </Badge>\n                </TableCell>\n                <TableCell>{contract.signDate ? new Date(contract.signDate).toLocaleDateString() : \"—\"}</TableCell>\n                <TableCell className=\"text-right\">\n                  <div className=\"flex justify-end gap-1\">\n                    <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                    <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                      <Download className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        {contracts.length === 0 && (\n          <div className=\"text-center py-8 text-muted-foreground\">No contracts yet.</div>\n        )}\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":5371,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1828,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1877,"size_tokens":null},"client/src/components/ui/kbd.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium\",\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn(\"inline-flex items-center gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","path":null,"size_bytes":862,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1237,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1419,"size_tokens":null},"server/storage.ts":{"content":"import { db } from \"./db\";\nimport { \n  leads, properties, contacts, contracts, contractTemplates, contractDocuments, documentVersions, lois,\n  users, twoFactorAuth, backupCodes, teams, teamMembers, teamActivityLogs, notificationPreferences, userGoals, userNotifications, offers, timesheetEntries\n} from \"@shared/schema\";\nimport { \n  type Lead, type InsertLead, \n  type Property, type InsertProperty, \n  type Contact, type InsertContact, \n  type Contract, type InsertContract,\n  type ContractTemplate, type InsertContractTemplate,\n  type ContractDocument, type InsertContractDocument,\n  type DocumentVersion, type InsertDocumentVersion,\n  type Loi, type InsertLoi,\n  type User, type InsertUser,\n  type TwoFactorAuth, type InsertTwoFactorAuth,\n  type BackupCode, type InsertBackupCode,\n  type Team, type InsertTeam,\n  type TeamMember, type InsertTeamMember,\n  type TeamActivityLog, type InsertTeamActivityLog,\n  type NotificationPreference, type InsertNotificationPreference,\n  type UserGoal, type InsertUserGoal,\n  type UserNotification, type InsertUserNotification,\n  type Offer, type InsertOffer,\n  type TimesheetEntry, type InsertTimesheetEntry\n} from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // Leads\n  getLeads(): Promise<Lead[]>;\n  getLeadById(id: number): Promise<Lead | undefined>;\n  createLead(lead: InsertLead): Promise<Lead>;\n  updateLead(id: number, lead: Partial<InsertLead>): Promise<Lead>;\n  deleteLead(id: number): Promise<void>;\n\n  // Properties\n  getProperties(): Promise<Property[]>;\n  getPropertyById(id: number): Promise<Property | undefined>;\n  createProperty(property: InsertProperty): Promise<Property>;\n  updateProperty(id: number, property: Partial<InsertProperty>): Promise<Property>;\n  deleteProperty(id: number): Promise<void>;\n\n  // Contacts\n  getContacts(): Promise<Contact[]>;\n  getContactById(id: number): Promise<Contact | undefined>;\n  createContact(contact: InsertContact): Promise<Contact>;\n  updateContact(id: number, contact: Partial<InsertContact>): Promise<Contact>;\n  deleteContact(id: number): Promise<void>;\n\n  // Contracts\n  getContracts(): Promise<Contract[]>;\n  getContractById(id: number): Promise<Contract | undefined>;\n  createContract(contract: InsertContract): Promise<Contract>;\n  updateContract(id: number, contract: Partial<InsertContract>): Promise<Contract>;\n  deleteContract(id: number): Promise<void>;\n\n  // Contract Templates\n  getContractTemplates(): Promise<ContractTemplate[]>;\n  getContractTemplateById(id: number): Promise<ContractTemplate | undefined>;\n  createContractTemplate(template: InsertContractTemplate): Promise<ContractTemplate>;\n  updateContractTemplate(id: number, template: Partial<InsertContractTemplate>): Promise<ContractTemplate>;\n  deleteContractTemplate(id: number): Promise<void>;\n\n  // Contract Documents\n  getContractDocuments(): Promise<ContractDocument[]>;\n  getContractDocumentById(id: number): Promise<ContractDocument | undefined>;\n  createContractDocument(document: InsertContractDocument): Promise<ContractDocument>;\n  updateContractDocument(id: number, document: Partial<InsertContractDocument>): Promise<ContractDocument>;\n  deleteContractDocument(id: number): Promise<void>;\n\n  // Document Versions\n  getDocumentVersions(documentId: number): Promise<DocumentVersion[]>;\n  createDocumentVersion(version: InsertDocumentVersion): Promise<DocumentVersion>;\n\n  // LOIs\n  getLois(): Promise<Loi[]>;\n  getLoiById(id: number): Promise<Loi | undefined>;\n  createLoi(loi: InsertLoi): Promise<Loi>;\n  updateLoi(id: number, loi: Partial<InsertLoi>): Promise<Loi>;\n  deleteLoi(id: number): Promise<void>;\n\n  // Users\n  getUsers(): Promise<User[]>;\n  getUserById(id: number): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUser(id: number, user: Partial<InsertUser>): Promise<User>;\n  deleteUser(id: number): Promise<void>;\n\n  // Two Factor Auth\n  getTwoFactorAuthByUserId(userId: number): Promise<TwoFactorAuth | undefined>;\n  createTwoFactorAuth(auth: InsertTwoFactorAuth): Promise<TwoFactorAuth>;\n  updateTwoFactorAuth(userId: number, auth: Partial<InsertTwoFactorAuth>): Promise<TwoFactorAuth>;\n  deleteTwoFactorAuth(userId: number): Promise<void>;\n\n  // Backup Codes\n  getBackupCodesByUserId(userId: number): Promise<BackupCode[]>;\n  createBackupCode(code: InsertBackupCode): Promise<BackupCode>;\n  useBackupCode(userId: number, code: string): Promise<boolean>;\n  deleteBackupCodes(userId: number): Promise<void>;\n\n  // Teams\n  getTeams(): Promise<Team[]>;\n  getTeamById(id: number): Promise<Team | undefined>;\n  getTeamsByOwnerId(ownerId: number): Promise<Team[]>;\n  createTeam(team: InsertTeam): Promise<Team>;\n  updateTeam(id: number, team: Partial<InsertTeam>): Promise<Team>;\n  deleteTeam(id: number): Promise<void>;\n\n  // Team Members\n  getTeamMembers(teamId: number): Promise<TeamMember[]>;\n  getTeamMemberById(id: number): Promise<TeamMember | undefined>;\n  createTeamMember(member: InsertTeamMember): Promise<TeamMember>;\n  updateTeamMember(id: number, member: Partial<InsertTeamMember>): Promise<TeamMember>;\n  deleteTeamMember(id: number): Promise<void>;\n\n  // Team Activity Logs\n  getTeamActivityLogs(teamId: number, limit?: number): Promise<TeamActivityLog[]>;\n  createTeamActivityLog(log: InsertTeamActivityLog): Promise<TeamActivityLog>;\n\n  // Notification Preferences\n  getNotificationPreferencesByUserId(userId: number): Promise<NotificationPreference | undefined>;\n  createNotificationPreferences(prefs: InsertNotificationPreference): Promise<NotificationPreference>;\n  updateNotificationPreferences(userId: number, prefs: Partial<InsertNotificationPreference>): Promise<NotificationPreference>;\n\n  // User Notifications (actual notification messages)\n  getUserNotifications(userId: number): Promise<UserNotification[]>;\n  getUserNotificationById(id: number): Promise<UserNotification | undefined>;\n  createUserNotification(notification: InsertUserNotification): Promise<UserNotification>;\n  markNotificationAsRead(id: number): Promise<UserNotification>;\n  deleteUserNotification(id: number): Promise<void>;\n  deleteAllUserNotifications(userId: number): Promise<void>;\n  markAllNotificationsAsRead(userId: number): Promise<void>;\n\n  // User Goals\n  getUserGoals(userId: number): Promise<UserGoal[]>;\n  getUserGoalById(id: number): Promise<UserGoal | undefined>;\n  createUserGoal(goal: InsertUserGoal): Promise<UserGoal>;\n  updateUserGoal(id: number, goal: Partial<InsertUserGoal>): Promise<UserGoal>;\n  deleteUserGoal(id: number): Promise<void>;\n\n  // Offers\n  getOffers(): Promise<Offer[]>;\n  getOfferById(id: number): Promise<Offer | undefined>;\n  getOffersByUserId(userId: number): Promise<Offer[]>;\n  getOffersByPropertyId(propertyId: number): Promise<Offer[]>;\n  createOffer(offer: InsertOffer): Promise<Offer>;\n  updateOffer(id: number, offer: Partial<InsertOffer>): Promise<Offer>;\n  deleteOffer(id: number): Promise<void>;\n\n  // Timesheet Entries\n  getTimesheetEntries(userId: number): Promise<TimesheetEntry[]>;\n  getTimesheetEntryById(id: number): Promise<TimesheetEntry | undefined>;\n  createTimesheetEntry(entry: InsertTimesheetEntry): Promise<TimesheetEntry>;\n  updateTimesheetEntry(id: number, entry: Partial<InsertTimesheetEntry>): Promise<TimesheetEntry>;\n  deleteTimesheetEntry(id: number): Promise<void>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Leads\n  async getLeads(): Promise<Lead[]> {\n    return db.select().from(leads);\n  }\n\n  async getLeadById(id: number): Promise<Lead | undefined> {\n    const result = await db.select().from(leads).where(eq(leads.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createLead(lead: InsertLead): Promise<Lead> {\n    const result = await db.insert(leads).values(lead as any).returning();\n    return result[0];\n  }\n\n  async updateLead(id: number, lead: Partial<InsertLead>): Promise<Lead> {\n    const result = await db.update(leads).set(lead as any).where(eq(leads.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteLead(id: number): Promise<void> {\n    await db.delete(leads).where(eq(leads.id, id));\n  }\n\n  // Properties\n  async getProperties(): Promise<Property[]> {\n    return db.select().from(properties);\n  }\n\n  async getPropertyById(id: number): Promise<Property | undefined> {\n    const result = await db.select().from(properties).where(eq(properties.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createProperty(property: InsertProperty): Promise<Property> {\n    const result = await db.insert(properties).values(property as any).returning();\n    return result[0];\n  }\n\n  async updateProperty(id: number, property: Partial<InsertProperty>): Promise<Property> {\n    const result = await db.update(properties).set(property as any).where(eq(properties.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteProperty(id: number): Promise<void> {\n    await db.delete(properties).where(eq(properties.id, id));\n  }\n\n  // Contacts\n  async getContacts(): Promise<Contact[]> {\n    return db.select().from(contacts);\n  }\n\n  async getContactById(id: number): Promise<Contact | undefined> {\n    const result = await db.select().from(contacts).where(eq(contacts.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createContact(contact: InsertContact): Promise<Contact> {\n    const result = await db.insert(contacts).values(contact as any).returning();\n    return result[0];\n  }\n\n  async updateContact(id: number, contact: Partial<InsertContact>): Promise<Contact> {\n    const result = await db.update(contacts).set(contact as any).where(eq(contacts.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteContact(id: number): Promise<void> {\n    await db.delete(contacts).where(eq(contacts.id, id));\n  }\n\n  // Contracts\n  async getContracts(): Promise<Contract[]> {\n    return db.select().from(contracts);\n  }\n\n  async getContractById(id: number): Promise<Contract | undefined> {\n    const result = await db.select().from(contracts).where(eq(contracts.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createContract(contract: InsertContract): Promise<Contract> {\n    const result = await db.insert(contracts).values(contract as any).returning();\n    return result[0];\n  }\n\n  async updateContract(id: number, contract: Partial<InsertContract>): Promise<Contract> {\n    const result = await db.update(contracts).set(contract as any).where(eq(contracts.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteContract(id: number): Promise<void> {\n    await db.delete(contracts).where(eq(contracts.id, id));\n  }\n\n  // Contract Templates\n  async getContractTemplates(): Promise<ContractTemplate[]> {\n    return db.select().from(contractTemplates);\n  }\n\n  async getContractTemplateById(id: number): Promise<ContractTemplate | undefined> {\n    const result = await db.select().from(contractTemplates).where(eq(contractTemplates.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createContractTemplate(template: InsertContractTemplate): Promise<ContractTemplate> {\n    const result = await db.insert(contractTemplates).values(template as any).returning();\n    return result[0];\n  }\n\n  async updateContractTemplate(id: number, template: Partial<InsertContractTemplate>): Promise<ContractTemplate> {\n    const result = await db.update(contractTemplates).set(template as any).where(eq(contractTemplates.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteContractTemplate(id: number): Promise<void> {\n    await db.delete(contractTemplates).where(eq(contractTemplates.id, id));\n  }\n\n  // Contract Documents\n  async getContractDocuments(): Promise<ContractDocument[]> {\n    return db.select().from(contractDocuments);\n  }\n\n  async getContractDocumentById(id: number): Promise<ContractDocument | undefined> {\n    const result = await db.select().from(contractDocuments).where(eq(contractDocuments.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createContractDocument(document: InsertContractDocument): Promise<ContractDocument> {\n    const result = await db.insert(contractDocuments).values(document as any).returning();\n    return result[0];\n  }\n\n  async updateContractDocument(id: number, document: Partial<InsertContractDocument>): Promise<ContractDocument> {\n    const result = await db.update(contractDocuments).set(document as any).where(eq(contractDocuments.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteContractDocument(id: number): Promise<void> {\n    await db.delete(contractDocuments).where(eq(contractDocuments.id, id));\n  }\n\n  // Document Versions\n  async getDocumentVersions(documentId: number): Promise<DocumentVersion[]> {\n    return db.select().from(documentVersions).where(eq(documentVersions.documentId, documentId));\n  }\n\n  async createDocumentVersion(version: InsertDocumentVersion): Promise<DocumentVersion> {\n    const result = await db.insert(documentVersions).values(version as any).returning();\n    return result[0];\n  }\n\n  // LOIs\n  async getLois(): Promise<Loi[]> {\n    return db.select().from(lois);\n  }\n\n  async getLoiById(id: number): Promise<Loi | undefined> {\n    const result = await db.select().from(lois).where(eq(lois.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createLoi(loi: InsertLoi): Promise<Loi> {\n    const result = await db.insert(lois).values(loi as any).returning();\n    return result[0];\n  }\n\n  async updateLoi(id: number, loi: Partial<InsertLoi>): Promise<Loi> {\n    const result = await db.update(lois).set(loi as any).where(eq(lois.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteLoi(id: number): Promise<void> {\n    await db.delete(lois).where(eq(lois.id, id));\n  }\n\n  // Users\n  async getUsers(): Promise<User[]> {\n    return db.select().from(users);\n  }\n\n  async getUserById(id: number): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.email, email)).limit(1);\n    return result[0];\n  }\n\n  async createUser(user: InsertUser): Promise<User> {\n    const result = await db.insert(users).values(user as any).returning();\n    return result[0];\n  }\n\n  async updateUser(id: number, user: Partial<InsertUser>): Promise<User> {\n    const result = await db.update(users).set(user as any).where(eq(users.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteUser(id: number): Promise<void> {\n    await db.delete(users).where(eq(users.id, id));\n  }\n\n  // Two Factor Auth\n  async getTwoFactorAuthByUserId(userId: number): Promise<TwoFactorAuth | undefined> {\n    const result = await db.select().from(twoFactorAuth).where(eq(twoFactorAuth.userId, userId)).limit(1);\n    return result[0];\n  }\n\n  async createTwoFactorAuth(auth: InsertTwoFactorAuth): Promise<TwoFactorAuth> {\n    const result = await db.insert(twoFactorAuth).values(auth as any).returning();\n    return result[0];\n  }\n\n  async updateTwoFactorAuth(userId: number, auth: Partial<InsertTwoFactorAuth>): Promise<TwoFactorAuth> {\n    const result = await db.update(twoFactorAuth).set(auth as any).where(eq(twoFactorAuth.userId, userId)).returning();\n    return result[0];\n  }\n\n  async deleteTwoFactorAuth(userId: number): Promise<void> {\n    await db.delete(twoFactorAuth).where(eq(twoFactorAuth.userId, userId));\n  }\n\n  // Backup Codes\n  async getBackupCodesByUserId(userId: number): Promise<BackupCode[]> {\n    return db.select().from(backupCodes).where(eq(backupCodes.userId, userId));\n  }\n\n  async createBackupCode(code: InsertBackupCode): Promise<BackupCode> {\n    const result = await db.insert(backupCodes).values(code as any).returning();\n    return result[0];\n  }\n\n  async useBackupCode(userId: number, code: string): Promise<boolean> {\n    const result = await db.update(backupCodes)\n      .set({ isUsed: true, usedAt: new Date() } as any)\n      .where(eq(backupCodes.userId, userId))\n      .where(eq(backupCodes.code, code))\n      .where(eq(backupCodes.isUsed, false))\n      .returning();\n    return result.length > 0;\n  }\n\n  async deleteBackupCodes(userId: number): Promise<void> {\n    await db.delete(backupCodes).where(eq(backupCodes.userId, userId));\n  }\n\n  // Teams\n  async getTeams(): Promise<Team[]> {\n    return db.select().from(teams);\n  }\n\n  async getTeamById(id: number): Promise<Team | undefined> {\n    const result = await db.select().from(teams).where(eq(teams.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getTeamsByOwnerId(ownerId: number): Promise<Team[]> {\n    return db.select().from(teams).where(eq(teams.ownerId, ownerId));\n  }\n\n  async createTeam(team: InsertTeam): Promise<Team> {\n    const result = await db.insert(teams).values(team as any).returning();\n    return result[0];\n  }\n\n  async updateTeam(id: number, team: Partial<InsertTeam>): Promise<Team> {\n    const result = await db.update(teams).set(team as any).where(eq(teams.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteTeam(id: number): Promise<void> {\n    await db.delete(teams).where(eq(teams.id, id));\n  }\n\n  // Team Members\n  async getTeamMembers(teamId: number): Promise<TeamMember[]> {\n    return db.select().from(teamMembers).where(eq(teamMembers.teamId, teamId));\n  }\n\n  async getTeamMemberById(id: number): Promise<TeamMember | undefined> {\n    const result = await db.select().from(teamMembers).where(eq(teamMembers.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createTeamMember(member: InsertTeamMember): Promise<TeamMember> {\n    const result = await db.insert(teamMembers).values(member as any).returning();\n    return result[0];\n  }\n\n  async updateTeamMember(id: number, member: Partial<InsertTeamMember>): Promise<TeamMember> {\n    const result = await db.update(teamMembers).set(member as any).where(eq(teamMembers.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteTeamMember(id: number): Promise<void> {\n    await db.delete(teamMembers).where(eq(teamMembers.id, id));\n  }\n\n  // Team Activity Logs\n  async getTeamActivityLogs(teamId: number, limit: number = 50): Promise<TeamActivityLog[]> {\n    return db.select().from(teamActivityLogs).where(eq(teamActivityLogs.teamId, teamId)).limit(limit);\n  }\n\n  async createTeamActivityLog(log: InsertTeamActivityLog): Promise<TeamActivityLog> {\n    const result = await db.insert(teamActivityLogs).values(log as any).returning();\n    return result[0];\n  }\n\n  // Notification Preferences\n  async getNotificationPreferencesByUserId(userId: number): Promise<NotificationPreference | undefined> {\n    const result = await db.select().from(notificationPreferences).where(eq(notificationPreferences.userId, userId)).limit(1);\n    return result[0];\n  }\n\n  async createNotificationPreferences(prefs: InsertNotificationPreference): Promise<NotificationPreference> {\n    const result = await db.insert(notificationPreferences).values(prefs as any).returning();\n    return result[0];\n  }\n\n  async updateNotificationPreferences(userId: number, prefs: Partial<InsertNotificationPreference>): Promise<NotificationPreference> {\n    const result = await db.update(notificationPreferences).set(prefs as any).where(eq(notificationPreferences.userId, userId)).returning();\n    return result[0];\n  }\n\n  // User Notifications (actual notification messages)\n  async getUserNotifications(userId: number): Promise<UserNotification[]> {\n    return db.select().from(userNotifications).where(eq(userNotifications.userId, userId));\n  }\n\n  async getUserNotificationById(id: number): Promise<UserNotification | undefined> {\n    const result = await db.select().from(userNotifications).where(eq(userNotifications.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createUserNotification(notification: InsertUserNotification): Promise<UserNotification> {\n    const result = await db.insert(userNotifications).values(notification as any).returning();\n    return result[0];\n  }\n\n  async markNotificationAsRead(id: number): Promise<UserNotification> {\n    const result = await db.update(userNotifications).set({ read: true }).where(eq(userNotifications.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteUserNotification(id: number): Promise<void> {\n    await db.delete(userNotifications).where(eq(userNotifications.id, id));\n  }\n\n  async deleteAllUserNotifications(userId: number): Promise<void> {\n    await db.delete(userNotifications).where(eq(userNotifications.userId, userId));\n  }\n\n  async markAllNotificationsAsRead(userId: number): Promise<void> {\n    await db.update(userNotifications).set({ read: true }).where(eq(userNotifications.userId, userId));\n  }\n\n  // User Goals\n  async getUserGoals(userId: number): Promise<UserGoal[]> {\n    return db.select().from(userGoals).where(eq(userGoals.userId, userId));\n  }\n\n  async getUserGoalById(id: number): Promise<UserGoal | undefined> {\n    const result = await db.select().from(userGoals).where(eq(userGoals.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createUserGoal(goal: InsertUserGoal): Promise<UserGoal> {\n    const result = await db.insert(userGoals).values(goal as any).returning();\n    return result[0];\n  }\n\n  async updateUserGoal(id: number, goal: Partial<InsertUserGoal>): Promise<UserGoal> {\n    const result = await db.update(userGoals).set(goal as any).where(eq(userGoals.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteUserGoal(id: number): Promise<void> {\n    await db.delete(userGoals).where(eq(userGoals.id, id));\n  }\n\n  // Offers\n  async getOffers(): Promise<Offer[]> {\n    return db.select().from(offers);\n  }\n\n  async getOfferById(id: number): Promise<Offer | undefined> {\n    const result = await db.select().from(offers).where(eq(offers.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getOffersByUserId(userId: number): Promise<Offer[]> {\n    return db.select().from(offers).where(eq(offers.userId, userId));\n  }\n\n  async getOffersByPropertyId(propertyId: number): Promise<Offer[]> {\n    return db.select().from(offers).where(eq(offers.propertyId, propertyId));\n  }\n\n  async createOffer(offer: InsertOffer): Promise<Offer> {\n    const result = await db.insert(offers).values(offer as any).returning();\n    return result[0];\n  }\n\n  async updateOffer(id: number, offer: Partial<InsertOffer>): Promise<Offer> {\n    const result = await db.update(offers).set(offer as any).where(eq(offers.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteOffer(id: number): Promise<void> {\n    await db.delete(offers).where(eq(offers.id, id));\n  }\n\n  // Timesheet Entries\n  async getTimesheetEntries(userId: number): Promise<TimesheetEntry[]> {\n    return db.select().from(timesheetEntries).where(eq(timesheetEntries.userId, userId));\n  }\n\n  async getTimesheetEntryById(id: number): Promise<TimesheetEntry | undefined> {\n    const result = await db.select().from(timesheetEntries).where(eq(timesheetEntries.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createTimesheetEntry(entry: InsertTimesheetEntry): Promise<TimesheetEntry> {\n    const result = await db.insert(timesheetEntries).values(entry as any).returning();\n    return result[0];\n  }\n\n  async updateTimesheetEntry(id: number, entry: Partial<InsertTimesheetEntry>): Promise<TimesheetEntry> {\n    const result = await db.update(timesheetEntries).set(entry as any).where(eq(timesheetEntries.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteTimesheetEntry(id: number): Promise<void> {\n    await db.delete(timesheetEntries).where(eq(timesheetEntries.id, id));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":23512,"size_tokens":null},"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","path":null,"size_bytes":894,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1598,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3835,"size_tokens":null},"client/src/pages/calculator.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useState } from \"react\";\nimport { DollarSign, TrendingUp } from \"lucide-react\";\n\nexport default function Calculator() {\n  const [arv, setArv] = useState(0);\n  const [purchasePrice, setPurchasePrice] = useState(0);\n  const [repairCosts, setRepairCosts] = useState(0);\n  const [closingCosts, setClosingCosts] = useState(0);\n  const [holdingCosts, setHoldingCosts] = useState(0);\n  const [marketingCosts, setMarketingCosts] = useState(0);\n  const [sellingCosts, setSellingCosts] = useState(0);\n\n  const totalCosts = purchasePrice + repairCosts + closingCosts + holdingCosts + marketingCosts + sellingCosts;\n  const profit = arv - totalCosts;\n  const profitMargin = arv > 0 ? ((profit / arv) * 100).toFixed(1) : 0;\n  const percentOfArv = arv > 0 ? ((purchasePrice / arv) * 100).toFixed(1) : 0;\n\n  const handleReset = () => {\n    setArv(0);\n    setPurchasePrice(0);\n    setRepairCosts(0);\n    setClosingCosts(0);\n    setHoldingCosts(0);\n    setMarketingCosts(0);\n    setSellingCosts(0);\n  };\n\n  return (\n    <Layout>\n      <div className=\"space-y-1 mb-6\">\n        <h1 className=\"text-3xl font-bold tracking-tight\">Deal Calculator</h1>\n        <p className=\"text-muted-foreground\">Analyze deal profitability and ROI on potential properties.</p>\n      </div>\n\n      <div className=\"grid gap-6 lg:grid-cols-3\">\n        {/* Input Section */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Property Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"arv\">After Repair Value (ARV)</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2.5 text-muted-foreground\">$</span>\n                    <Input\n                      id=\"arv\"\n                      type=\"number\"\n                      placeholder=\"500000\"\n                      value={arv || \"\"}\n                      onChange={(e) => setArv(parseFloat(e.target.value) || 0)}\n                      className=\"pl-7\"\n                    />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"purchasePrice\">Purchase Price</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2.5 text-muted-foreground\">$</span>\n                    <Input\n                      id=\"purchasePrice\"\n                      type=\"number\"\n                      placeholder=\"300000\"\n                      value={purchasePrice || \"\"}\n                      onChange={(e) => setPurchasePrice(parseFloat(e.target.value) || 0)}\n                      className=\"pl-7\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Costs & Expenses</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"repairs\">Repair Costs</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2.5 text-muted-foreground\">$</span>\n                    <Input\n                      id=\"repairs\"\n                      type=\"number\"\n                      placeholder=\"50000\"\n                      value={repairCosts || \"\"}\n                      onChange={(e) => setRepairCosts(parseFloat(e.target.value) || 0)}\n                      className=\"pl-7\"\n                    />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"closing\">Closing Costs</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2.5 text-muted-foreground\">$</span>\n                    <Input\n                      id=\"closing\"\n                      type=\"number\"\n                      placeholder=\"9000\"\n                      value={closingCosts || \"\"}\n                      onChange={(e) => setClosingCosts(parseFloat(e.target.value) || 0)}\n                      className=\"pl-7\"\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"holding\">Holding Costs</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2.5 text-muted-foreground\">$</span>\n                    <Input\n                      id=\"holding\"\n                      type=\"number\"\n                      placeholder=\"3000\"\n                      value={holdingCosts || \"\"}\n                      onChange={(e) => setHoldingCosts(parseFloat(e.target.value) || 0)}\n                      className=\"pl-7\"\n                    />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"marketing\">Marketing Costs</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2.5 text-muted-foreground\">$</span>\n                    <Input\n                      id=\"marketing\"\n                      type=\"number\"\n                      placeholder=\"2000\"\n                      value={marketingCosts || \"\"}\n                      onChange={(e) => setMarketingCosts(parseFloat(e.target.value) || 0)}\n                      className=\"pl-7\"\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"selling\">Selling Costs (Real Estate Commission, etc.)</Label>\n                <div className=\"relative\">\n                  <span className=\"absolute left-3 top-2.5 text-muted-foreground\">$</span>\n                  <Input\n                    id=\"selling\"\n                    type=\"number\"\n                    placeholder=\"30000\"\n                    value={sellingCosts || \"\"}\n                    onChange={(e) => setSellingCosts(parseFloat(e.target.value) || 0)}\n                    className=\"pl-7\"\n                  />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <div className=\"flex gap-2\">\n            <Button onClick={handleReset} variant=\"outline\" className=\"flex-1\">\n              Clear All\n            </Button>\n            <Button className=\"flex-1 bg-primary hover:bg-primary/90 text-white\">\n              Save Deal\n            </Button>\n          </div>\n        </div>\n\n        {/* Results Section */}\n        <div className=\"space-y-4\">\n          <Card className=\"border-primary/50 bg-primary/5\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"flex items-center gap-2 text-lg\">\n                <TrendingUp className=\"h-5 w-5 text-primary\" />\n                Profit Analysis\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <p className=\"text-xs text-muted-foreground mb-1\">Total Profit</p>\n                <p className={`text-3xl font-bold ${profit >= 0 ? 'text-green-600' : 'text-destructive'}`}>\n                  ${profit.toLocaleString('en-US', { maximumFractionDigits: 0 })}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-xs text-muted-foreground mb-1\">Profit Margin</p>\n                <p className={`text-2xl font-bold ${profit >= 0 ? 'text-green-600' : 'text-destructive'}`}>\n                  {profitMargin}%\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-sm\">Cost Breakdown</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3 text-sm\">\n              <div className=\"flex justify-between pb-2 border-b\">\n                <span className=\"text-muted-foreground\">ARV:</span>\n                <span className=\"font-medium\">${arv.toLocaleString('en-US', { maximumFractionDigits: 0 })}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Purchase:</span>\n                <span>${purchasePrice.toLocaleString('en-US', { maximumFractionDigits: 0 })} ({percentOfArv}%)</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Repairs:</span>\n                <span>${repairCosts.toLocaleString('en-US', { maximumFractionDigits: 0 })}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Closing:</span>\n                <span>${closingCosts.toLocaleString('en-US', { maximumFractionDigits: 0 })}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Holding:</span>\n                <span>${holdingCosts.toLocaleString('en-US', { maximumFractionDigits: 0 })}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Marketing:</span>\n                <span>${marketingCosts.toLocaleString('en-US', { maximumFractionDigits: 0 })}</span>\n              </div>\n              <div className=\"flex justify-between pb-2 border-b\">\n                <span className=\"text-muted-foreground\">Selling:</span>\n                <span>${sellingCosts.toLocaleString('en-US', { maximumFractionDigits: 0 })}</span>\n              </div>\n              <div className=\"flex justify-between font-bold\">\n                <span>Total Costs:</span>\n                <span>${totalCosts.toLocaleString('en-US', { maximumFractionDigits: 0 })}</span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":10526,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/pages/dashboard.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Layout } from \"@/components/layout/Layout\";\nimport { ArrowUpRight, DollarSign, Users, Briefcase, Activity } from \"lucide-react\";\nimport { Area, AreaChart, ResponsiveContainer, Tooltip, XAxis, YAxis, CartesianGrid } from \"recharts\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useMemo } from \"react\";\nimport { MotivationalBanner } from \"@/components/dashboard/MotivationalBanner\";\n\nexport default function Dashboard() {\n  // Fetch real data from APIs\n  const { data: leads = [], isLoading: leadsLoading } = useQuery<any[]>({\n    queryKey: ['/api/leads'],\n  });\n\n  const { data: properties = [], isLoading: propertiesLoading } = useQuery<any[]>({\n    queryKey: ['/api/properties'],\n  });\n\n  const { data: contracts = [], isLoading: contractsLoading } = useQuery<any[]>({\n    queryKey: ['/api/contracts'],\n  });\n\n  const { data: contractDocs = [] } = useQuery<any[]>({\n    queryKey: ['/api/contract-documents'],\n  });\n\n  const isLoading = leadsLoading || propertiesLoading || contractsLoading;\n\n  // Calculate real KPIs from data\n  const kpiData = useMemo(() => {\n    const totalRevenue = contracts.reduce((sum, contract) => {\n      return sum + (parseFloat(contract.amount) || 0);\n    }, 0);\n\n    const activeLeads = leads.filter(lead => \n      lead.status === 'new' || lead.status === 'contacted' || lead.status === 'qualified'\n    ).length;\n\n    const dealsInPipeline = contracts.filter(contract => \n      contract.status === 'pending' || contract.status === 'negotiating'\n    ).length;\n\n    const closedDeals = contracts.filter(contract => \n      contract.status === 'signed' || contract.status === 'closed'\n    ).length;\n\n    const conversionRate = leads.length > 0 \n      ? ((closedDeals / leads.length) * 100).toFixed(1)\n      : \"0.0\";\n\n    return [\n      {\n        title: \"Total Contract Value\",\n        value: totalRevenue > 0 ? `$${totalRevenue.toLocaleString()}` : \"$0\",\n        change: contracts.length > 0 ? `${contracts.length} contracts` : \"No contracts yet\",\n        trend: \"neutral\",\n        icon: DollarSign,\n        description: \"\"\n      },\n      {\n        title: \"Active Leads\",\n        value: leads.length.toString(),\n        change: activeLeads > 0 ? `${activeLeads} active` : \"No active leads\",\n        trend: \"neutral\",\n        icon: Users,\n        description: \"\"\n      },\n      {\n        title: \"Deals in Pipeline\",\n        value: dealsInPipeline.toString(),\n        change: `${contracts.length} total`,\n        trend: \"neutral\",\n        icon: Briefcase,\n        description: \"\"\n      },\n      {\n        title: \"Conversion Rate\",\n        value: `${conversionRate}%`,\n        change: closedDeals > 0 ? `${closedDeals} closed` : \"No closed deals\",\n        trend: \"neutral\",\n        icon: Activity,\n        description: \"\"\n      }\n    ];\n  }, [leads, contracts]);\n\n  // Generate chart data from contracts grouped by month\n  const chartData = useMemo(() => {\n    if (contracts.length === 0) {\n      return [\n        { name: \"Jan\", value: 0 },\n        { name: \"Feb\", value: 0 },\n        { name: \"Mar\", value: 0 },\n        { name: \"Apr\", value: 0 },\n        { name: \"May\", value: 0 },\n        { name: \"Jun\", value: 0 },\n      ];\n    }\n\n    const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    const contractsByMonth: { [key: string]: number } = {};\n\n    contracts.forEach(contract => {\n      if (contract.createdAt) {\n        const date = new Date(contract.createdAt);\n        const monthKey = `${date.getFullYear()}-${date.getMonth()}`;\n        const monthName = monthNames[date.getMonth()];\n        \n        if (!contractsByMonth[monthName]) {\n          contractsByMonth[monthName] = 0;\n        }\n        contractsByMonth[monthName] += parseFloat(contract.amount) || 0;\n      }\n    });\n\n    // Get last 6 months\n    const result = [];\n    const now = new Date();\n    for (let i = 5; i >= 0; i--) {\n      const monthDate = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      const monthName = monthNames[monthDate.getMonth()];\n      result.push({\n        name: monthName,\n        value: contractsByMonth[monthName] || 0\n      });\n    }\n\n    return result;\n  }, [contracts]);\n\n  // Generate recent activity from real data\n  const recentActivity = useMemo(() => {\n    const activities: any[] = [];\n\n    // Add contract activities\n    contractDocs.slice(0, 2).forEach(doc => {\n      activities.push({\n        user: doc.createdBy || \"User\",\n        action: doc.status === 'draft' ? 'created draft contract' : 'finalized contract',\n        target: doc.title,\n        time: formatTimeAgo(doc.createdAt),\n        initials: (doc.createdBy || \"U\").substring(0, 2).toUpperCase()\n      });\n    });\n\n    // Add lead activities\n    leads.slice(0, 2).forEach(lead => {\n      activities.push({\n        user: \"System\",\n        action: `added ${lead.status} lead`,\n        target: `${lead.address}, ${lead.city}`,\n        time: formatTimeAgo(lead.createdAt),\n        initials: \"SYS\"\n      });\n    });\n\n    return activities.slice(0, 4);\n  }, [leads, contractDocs]);\n\n  function formatTimeAgo(dateString: string | null): string {\n    if (!dateString) return \"Recently\";\n    \n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n    \n    if (diffInSeconds < 60) return \"Just now\";\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} min ago`;\n    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;\n    if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} days ago`;\n    return date.toLocaleDateString();\n  }\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <MotivationalBanner />\n        <div className=\"flex flex-col gap-2\">\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground\" data-testid=\"page-title\">Dashboard</h1>\n          <p className=\"text-muted-foreground\">Overview of your wholesaling operations and performance metrics.</p>\n        </div>\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n          {[1, 2, 3, 4].map(i => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader className=\"pb-2\">\n                <div className=\"h-4 w-24 bg-muted rounded\"></div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-8 w-32 bg-muted rounded mb-2\"></div>\n                <div className=\"h-3 w-20 bg-muted rounded\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <MotivationalBanner />\n      <div className=\"flex flex-col gap-2\">\n        <h1 className=\"text-3xl font-bold tracking-tight text-foreground\" data-testid=\"page-title\">Dashboard</h1>\n        <p className=\"text-muted-foreground\">Overview of your wholesaling operations and performance metrics.</p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {kpiData.map((kpi) => (\n          <Card key={kpi.title} className=\"hover-elevate transition-all duration-200\" data-testid={`kpi-${kpi.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                {kpi.title}\n              </CardTitle>\n              <kpi.icon className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid={`value-${kpi.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                {kpi.value}\n              </div>\n              <p className=\"text-xs text-muted-foreground flex items-center gap-1 mt-1\">\n                <span className=\"text-muted-foreground\">\n                  {kpi.change}\n                </span>\n                {kpi.description}\n              </p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-7\">\n        <Card className=\"col-span-4 hover-elevate\">\n          <CardHeader>\n            <CardTitle>Revenue Overview</CardTitle>\n          </CardHeader>\n          <CardContent className=\"pl-2\">\n            {chartData.every(d => d.value === 0) ? (\n              <div className=\"h-[300px] flex items-center justify-center text-center\">\n                <div>\n                  <DollarSign className=\"w-12 h-12 mx-auto text-muted-foreground/50 mb-3\" />\n                  <p className=\"text-muted-foreground\">No contract data yet</p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">Start adding contracts to see your revenue trends</p>\n                </div>\n              </div>\n            ) : (\n              <div className=\"h-[300px] w-full\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <AreaChart data={chartData}>\n                    <defs>\n                      <linearGradient id=\"colorValue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0.3}/>\n                        <stop offset=\"95%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0}/>\n                      </linearGradient>\n                    </defs>\n                    <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"hsl(var(--border))\" />\n                    <XAxis \n                      dataKey=\"name\" \n                      stroke=\"hsl(var(--muted-foreground))\" \n                      fontSize={12} \n                      tickLine={false} \n                      axisLine={false} \n                    />\n                    <YAxis \n                      stroke=\"hsl(var(--muted-foreground))\" \n                      fontSize={12} \n                      tickLine={false} \n                      axisLine={false}\n                      tickFormatter={(value) => `$${value.toLocaleString()}`} \n                    />\n                    <Tooltip \n                      contentStyle={{ \n                        backgroundColor: 'hsl(var(--card))', \n                        borderColor: 'hsl(var(--border))',\n                        borderRadius: 'var(--radius)',\n                        color: 'hsl(var(--foreground))'\n                      }}\n                      itemStyle={{ color: 'hsl(var(--primary))' }}\n                      formatter={(value: any) => [`$${value.toLocaleString()}`, 'Revenue']}\n                    />\n                    <Area \n                      type=\"monotone\" \n                      dataKey=\"value\" \n                      stroke=\"hsl(var(--primary))\" \n                      strokeWidth={2}\n                      fillOpacity={1} \n                      fill=\"url(#colorValue)\" \n                    />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card className=\"col-span-3 hover-elevate\">\n          <CardHeader>\n            <CardTitle>Recent Activity</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {recentActivity.length === 0 ? (\n              <div className=\"h-[300px] flex items-center justify-center text-center\">\n                <div>\n                  <Activity className=\"w-12 h-12 mx-auto text-muted-foreground/50 mb-3\" />\n                  <p className=\"text-muted-foreground\">No activity yet</p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">Activity will appear as you add leads and contracts</p>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-8\">\n                {recentActivity.map((item, i) => (\n                  <div key={i} className=\"flex items-center\" data-testid={`activity-${i}`}>\n                    <div className=\"relative flex h-9 w-9 shrink-0 overflow-hidden rounded-full border border-border items-center justify-center bg-secondary text-xs font-medium text-secondary-foreground\">\n                      {item.initials}\n                    </div>\n                    <div className=\"ml-4 space-y-1\">\n                      <p className=\"text-sm font-medium leading-none\">\n                        {item.user} <span className=\"text-muted-foreground font-normal\">{item.action}</span>\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {item.target}\n                      </p>\n                    </div>\n                    <div className=\"ml-auto font-medium text-xs text-muted-foreground\">\n                      {item.time}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":12914,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2859,"size_tokens":null},"client/src/components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  \"mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction EmptyMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        \"flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","path":null,"size_bytes":2396,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":649,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1148,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1031,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route, Redirect, useLocation } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider, useAuth } from \"@/contexts/AuthContext\";\nimport { Loader2 } from \"lucide-react\";\nimport NotFound from \"@/pages/not-found\";\nimport Dashboard from \"@/pages/dashboard\";\nimport Leads from \"@/pages/leads\";\nimport PropertyDetail from \"@/pages/property-detail\";\nimport Properties from \"@/pages/properties\";\nimport Contracts from \"@/pages/contracts\";\nimport ContractGenerator from \"@/pages/contract-generator\";\nimport Analytics from \"@/pages/analytics\";\nimport Settings from \"@/pages/settings\";\nimport Calculator from \"@/pages/calculator\";\nimport Timesheet from \"@/pages/timesheet\";\nimport Login from \"@/pages/login\";\nimport Signup from \"@/pages/signup\";\nimport Notifications from \"@/pages/notifications\";\n\nfunction ProtectedRoute({ component: Component }: { component: React.ComponentType }) {\n  const { isAuthenticated, loading } = useAuth();\n  const [location] = useLocation();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  return <Component />;\n}\n\nfunction Router() {\n  const { isAuthenticated, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  return (\n    <Switch>\n      <Route path=\"/login\">\n        {isAuthenticated ? <Redirect to=\"/\" /> : <Login />}\n      </Route>\n      <Route path=\"/signup\">\n        {isAuthenticated ? <Redirect to=\"/\" /> : <Signup />}\n      </Route>\n      <Route path=\"/\">\n        {() => <ProtectedRoute component={Dashboard} />}\n      </Route>\n      <Route path=\"/leads\">\n        {() => <ProtectedRoute component={Leads} />}\n      </Route>\n      <Route path=\"/properties\">\n        {() => <ProtectedRoute component={Properties} />}\n      </Route>\n      <Route path=\"/properties/:id\">\n        {() => <ProtectedRoute component={PropertyDetail} />}\n      </Route>\n      <Route path=\"/contracts\">\n        {() => <ProtectedRoute component={ContractGenerator} />}\n      </Route>\n      <Route path=\"/contracts-old\">\n        {() => <ProtectedRoute component={Contracts} />}\n      </Route>\n      <Route path=\"/analytics\">\n        {() => <ProtectedRoute component={Analytics} />}\n      </Route>\n      <Route path=\"/settings\">\n        {() => <ProtectedRoute component={Settings} />}\n      </Route>\n      <Route path=\"/calculator\">\n        {() => <ProtectedRoute component={Calculator} />}\n      </Route>\n      <Route path=\"/timesheet\">\n        {() => <ProtectedRoute component={Timesheet} />}\n      </Route>\n      <Route path=\"/notifications\">\n        {() => <ProtectedRoute component={Notifications} />}\n      </Route>\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <TooltipProvider>\n          <Toaster />\n          <Router />\n        </TooltipProvider>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":3447,"size_tokens":null},"client/src/components/layout/Header.tsx":{"content":"import { Bell, Search, Menu, PanelLeft } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useSidebar } from \"@/contexts/SidebarContext\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { useLocation } from \"wouter\";\n\nexport function Header() {\n  const { state, setState, cycleState, isHidden } = useSidebar();\n  const { user, logout } = useAuth();\n  const [, setLocation] = useLocation();\n\n  const { data: userData } = useQuery<any>({\n    queryKey: [`/api/users/${user?.id}`],\n    enabled: !!user?.id,\n  });\n\n  const getNextStateLabel = () => {\n    if (state === \"expanded\") return \"Collapse to icons\";\n    if (state === \"icon\") return \"Hide sidebar\";\n    return \"Show sidebar\";\n  };\n\n  const getInitials = () => {\n    if (userData?.firstName && userData?.lastName) {\n      return `${userData.firstName[0]}${userData.lastName[0]}`.toUpperCase();\n    }\n    return user?.email?.[0]?.toUpperCase() || \"U\";\n  };\n\n  const profileImage = userData?.profilePicture || userData?.avatarUrl;\n\n  return (\n    <header className=\"sticky top-0 z-30 flex h-16 w-full items-center border-b bg-background px-4 md:px-6 shadow-sm gap-4\">\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <Button \n              variant=\"ghost\" \n              size=\"icon\" \n              onClick={isHidden ? () => setState(\"expanded\") : cycleState}\n              className=\"text-muted-foreground hover:text-foreground shrink-0\"\n              data-testid=\"button-hamburger\"\n            >\n              {isHidden ? (\n                <PanelLeft className=\"h-5 w-5\" />\n              ) : (\n                <Menu className=\"h-5 w-5\" />\n              )}\n            </Button>\n          </TooltipTrigger>\n          <TooltipContent side=\"bottom\">\n            {getNextStateLabel()}\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n\n      <div className=\"flex flex-1 items-center gap-4\">\n        <div className=\"relative w-full max-w-md\">\n          <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n          <Input\n            type=\"search\"\n            placeholder=\"Search leads, properties, or contacts...\"\n            className=\"w-full bg-muted/50 pl-9 md:w-[300px] lg:w-[400px] border-none focus-visible:ring-1\"\n          />\n        </div>\n      </div>\n      \n      <div className=\"flex items-center gap-4\">\n        <Button \n          variant=\"ghost\" \n          size=\"icon\" \n          className=\"relative text-muted-foreground hover:text-foreground\"\n          onClick={() => setLocation('/notifications')}\n        >\n          <Bell className=\"h-5 w-5\" />\n          <span className=\"absolute top-2 right-2 h-2 w-2 rounded-full bg-accent ring-2 ring-background\" />\n        </Button>\n        \n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"ghost\" className=\"relative h-9 w-9 rounded-full\">\n              <Avatar className=\"h-9 w-9 border border-border\">\n                {profileImage && <AvatarImage src={profileImage} alt=\"User\" />}\n                <AvatarFallback className=\"bg-primary/10 text-primary font-semibold\">\n                  {getInitials()}\n                </AvatarFallback>\n              </Avatar>\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\">\n            <DropdownMenuLabel>\n              {userData?.firstName && userData?.lastName \n                ? `${userData.firstName} ${userData.lastName}` \n                : user?.email}\n            </DropdownMenuLabel>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem onClick={() => setLocation('/settings')}>\n              Profile\n            </DropdownMenuItem>\n            <DropdownMenuItem onClick={() => setLocation('/settings')}>\n              Settings\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem className=\"text-destructive\" onClick={logout}>\n              Log out\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n    </header>\n  );\n}\n","path":null,"size_bytes":4558,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7406,"size_tokens":null},"vite-plugin-meta-images.ts":{"content":"import type { Plugin } from 'vite';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Vite plugin that updates og:image and twitter:image meta tags\n * to point to the app's opengraph image with the correct Replit domain.\n */\nexport function metaImagesPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-meta-images',\n    transformIndexHtml(html) {\n      const baseUrl = getDeploymentUrl();\n      if (!baseUrl) {\n        log('[meta-images] no Replit deployment domain found, skipping meta tag updates');\n        return html;\n      }\n\n      // Check if opengraph image exists in public directory\n      const publicDir = path.resolve(process.cwd(), 'client', 'public');\n      const opengraphPngPath = path.join(publicDir, 'opengraph.png');\n      const opengraphJpgPath = path.join(publicDir, 'opengraph.jpg');\n      const opengraphJpegPath = path.join(publicDir, 'opengraph.jpeg');\n\n      let imageExt: string | null = null;\n      if (fs.existsSync(opengraphPngPath)) {\n        imageExt = 'png';\n      } else if (fs.existsSync(opengraphJpgPath)) {\n        imageExt = 'jpg';\n      } else if (fs.existsSync(opengraphJpegPath)) {\n        imageExt = 'jpeg';\n      }\n\n      if (!imageExt) {\n        log('[meta-images] OpenGraph image not found, skipping meta tag updates');\n        return html;\n      }\n\n      const imageUrl = `${baseUrl}/opengraph.${imageExt}`;\n\n      log('[meta-images] updating meta image tags to:', imageUrl);\n\n      html = html.replace(\n        /<meta\\s+property=\"og:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta property=\"og:image\" content=\"${imageUrl}\" />`\n      );\n\n      html = html.replace(\n        /<meta\\s+name=\"twitter:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta name=\"twitter:image\" content=\"${imageUrl}\" />`\n      );\n\n      return html;\n    },\n  };\n}\n\nfunction getDeploymentUrl(): string | null {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    log('[meta-images] using internal app domain:', url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    log('[meta-images] using dev domain:', url);\n    return url;\n  }\n\n  return null;\n}\n\nfunction log(...args: any[]): void {\n  if (process.env.NODE_ENV === 'production') {\n    console.log(...args);\n  }\n}\n","path":null,"size_bytes":2333,"size_tokens":null},"client/src/pages/contract-generator.tsx":{"content":"import { useState } from \"react\";\nimport { Layout } from \"@/components/layout/Layout\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { FileText, Download, Plus, Eye, Save, FileSignature } from \"lucide-react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function ContractGenerator() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [activeTab, setActiveTab] = useState(\"list\");\n\n  // Fetch contracts\n  const { data: contracts = [], isLoading: contractsLoading } = useQuery<any[]>({\n    queryKey: ['/api/contract-documents'],\n  });\n\n  // Fetch templates\n  const { data: templates = [], isLoading: templatesLoading } = useQuery<any[]>({\n    queryKey: ['/api/contract-templates'],\n  });\n\n  // Fetch LOIs\n  const { data: lois = [], isLoading: loisLoading } = useQuery<any[]>({\n    queryKey: ['/api/lois'],\n  });\n\n  // Fetch properties for dropdown\n  const { data: properties = [] } = useQuery<any[]>({\n    queryKey: ['/api/properties'],\n  });\n\n  return (\n    <Layout>\n      <div className=\"p-8 space-y-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-4xl font-display font-bold text-foreground mb-2\" data-testid=\"page-title\">\n              Document Management\n            </h1>\n            <p className=\"text-muted-foreground\">\n              Create and manage contracts, templates, and letters of intent\n            </p>\n          </div>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-4 lg:w-auto\">\n            <TabsTrigger value=\"list\" data-testid=\"tab-contracts\">\n              <FileText className=\"w-4 h-4 mr-2\" />\n              Contracts\n            </TabsTrigger>\n            <TabsTrigger value=\"create\" data-testid=\"tab-create\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Create New\n            </TabsTrigger>\n            <TabsTrigger value=\"templates\" data-testid=\"tab-templates\">\n              <FileSignature className=\"w-4 h-4 mr-2\" />\n              Templates\n            </TabsTrigger>\n            <TabsTrigger value=\"lois\" data-testid=\"tab-lois\">\n              <FileText className=\"w-4 h-4 mr-2\" />\n              LOIs\n            </TabsTrigger>\n          </TabsList>\n\n          {/* Contracts List Tab */}\n          <TabsContent value=\"list\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Active Contracts</CardTitle>\n                <CardDescription>View and manage all contract documents</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {contractsLoading ? (\n                  <div className=\"text-center py-8 text-muted-foreground\">Loading contracts...</div>\n                ) : contracts.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <FileText className=\"w-12 h-12 mx-auto text-muted-foreground/50 mb-3\" />\n                    <p className=\"text-muted-foreground mb-4\">No contracts yet</p>\n                    <Button onClick={() => setActiveTab(\"create\")} data-testid=\"button-create-first\">\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      Create Your First Contract\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {contracts.map((contract: any) => (\n                      <div\n                        key={contract.id}\n                        className=\"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/5 transition-colors\"\n                        data-testid={`contract-${contract.id}`}\n                      >\n                        <div className=\"flex-1\">\n                          <h3 className=\"font-semibold text-foreground\">{contract.title}</h3>\n                          <div className=\"flex items-center gap-4 mt-1 text-sm text-muted-foreground\">\n                            <span>Type: {contract.documentType}</span>\n                            <span className=\"capitalize\">Status: {contract.status}</span>\n                            <span>Version: {contract.version}</span>\n                          </div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Button variant=\"outline\" size=\"sm\" data-testid={`button-view-${contract.id}`}>\n                            <Eye className=\"w-4 h-4 mr-2\" />\n                            View\n                          </Button>\n                          {contract.pdfUrl && (\n                            <Button variant=\"outline\" size=\"sm\" data-testid={`button-download-${contract.id}`}>\n                              <Download className=\"w-4 h-4 mr-2\" />\n                              Download\n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Create Contract Tab */}\n          <TabsContent value=\"create\" className=\"space-y-4\">\n            <ContractCreator templates={templates} properties={properties} />\n          </TabsContent>\n\n          {/* Templates Tab */}\n          <TabsContent value=\"templates\" className=\"space-y-4\">\n            <TemplatesManager templates={templates} isLoading={templatesLoading} />\n          </TabsContent>\n\n          {/* LOIs Tab */}\n          <TabsContent value=\"lois\" className=\"space-y-4\">\n            <LOIManager lois={lois} properties={properties} isLoading={loisLoading} />\n          </TabsContent>\n        </Tabs>\n      </div>\n    </Layout>\n  );\n}\n\n// Contract Creator Component\nfunction ContractCreator({ templates, properties }: { templates: any[], properties: any[] }) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedTemplate, setSelectedTemplate] = useState(\"\");\n  const [formData, setFormData] = useState({\n    title: \"\",\n    propertyId: \"\",\n    buyerName: \"\",\n    sellerName: \"\",\n    amount: \"\",\n    terms: \"\",\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await fetch('/api/contract-documents', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error('Failed to create contract');\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Contract created successfully\" });\n      queryClient.invalidateQueries({ queryKey: ['/api/contract-documents'] });\n      setFormData({ title: \"\", propertyId: \"\", buyerName: \"\", sellerName: \"\", amount: \"\", terms: \"\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to create contract\", variant: \"destructive\" });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const template = templates.find(t => t.id.toString() === selectedTemplate);\n    createMutation.mutate({\n      templateId: selectedTemplate ? parseInt(selectedTemplate) : null,\n      propertyId: formData.propertyId ? parseInt(formData.propertyId) : null,\n      title: formData.title,\n      content: template?.content || formData.terms,\n      mergeData: JSON.stringify(formData),\n      status: 'draft',\n    });\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Create New Contract</CardTitle>\n        <CardDescription>Generate a contract from a template or create a custom one</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template\">Template (Optional)</Label>\n              <Select value={selectedTemplate} onValueChange={setSelectedTemplate}>\n                <SelectTrigger data-testid=\"select-template\">\n                  <SelectValue placeholder=\"Select a template\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {templates.map((template: any) => (\n                    <SelectItem key={template.id} value={template.id.toString()}>\n                      {template.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"title\">Contract Title</Label>\n              <Input\n                id=\"title\"\n                data-testid=\"input-title\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                placeholder=\"Purchase Agreement - 123 Main St\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"property\">Property</Label>\n              <Select value={formData.propertyId} onValueChange={(value) => setFormData({ ...formData, propertyId: value })}>\n                <SelectTrigger data-testid=\"select-property\">\n                  <SelectValue placeholder=\"Select property\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {properties.map((property: any) => (\n                    <SelectItem key={property.id} value={property.id.toString()}>\n                      {property.address}, {property.city}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"buyer\">Buyer Name</Label>\n              <Input\n                id=\"buyer\"\n                data-testid=\"input-buyer\"\n                value={formData.buyerName}\n                onChange={(e) => setFormData({ ...formData, buyerName: e.target.value })}\n                placeholder=\"John Doe\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"seller\">Seller Name</Label>\n              <Input\n                id=\"seller\"\n                data-testid=\"input-seller\"\n                value={formData.sellerName}\n                onChange={(e) => setFormData({ ...formData, sellerName: e.target.value })}\n                placeholder=\"Jane Smith\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"amount\">Contract Amount</Label>\n              <Input\n                id=\"amount\"\n                data-testid=\"input-amount\"\n                type=\"number\"\n                value={formData.amount}\n                onChange={(e) => setFormData({ ...formData, amount: e.target.value })}\n                placeholder=\"150000\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"terms\">Contract Terms & Content</Label>\n            <Textarea\n              id=\"terms\"\n              data-testid=\"textarea-terms\"\n              value={formData.terms}\n              onChange={(e) => setFormData({ ...formData, terms: e.target.value })}\n              placeholder=\"Enter contract terms and conditions...\"\n              className=\"min-h-[200px] font-mono text-sm\"\n            />\n          </div>\n\n          <div className=\"flex gap-3\">\n            <Button type=\"submit\" data-testid=\"button-save-draft\" disabled={createMutation.isPending}>\n              <Save className=\"w-4 h-4 mr-2\" />\n              {createMutation.isPending ? \"Saving...\" : \"Save as Draft\"}\n            </Button>\n            <Button type=\"button\" variant=\"outline\" data-testid=\"button-preview\">\n              <Eye className=\"w-4 h-4 mr-2\" />\n              Preview\n            </Button>\n            <Button type=\"button\" variant=\"outline\" data-testid=\"button-export-pdf\">\n              <Download className=\"w-4 h-4 mr-2\" />\n              Export as PDF\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n\n// Templates Manager Component\nfunction TemplatesManager({ templates, isLoading }: { templates: any[], isLoading: boolean }) {\n  const [showCreate, setShowCreate] = useState(false);\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <CardTitle>Contract Templates</CardTitle>\n            <CardDescription>Manage reusable contract templates</CardDescription>\n          </div>\n          <Button onClick={() => setShowCreate(!showCreate)} data-testid=\"button-new-template\">\n            <Plus className=\"w-4 h-4 mr-2\" />\n            New Template\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {showCreate && <TemplateCreator onClose={() => setShowCreate(false)} />}\n        \n        {isLoading ? (\n          <div className=\"text-center py-8 text-muted-foreground\">Loading templates...</div>\n        ) : templates.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <FileSignature className=\"w-12 h-12 mx-auto text-muted-foreground/50 mb-3\" />\n            <p className=\"text-muted-foreground mb-4\">No templates yet</p>\n            <Button onClick={() => setShowCreate(true)} data-testid=\"button-create-first-template\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Create Your First Template\n            </Button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n            {templates.map((template: any) => (\n              <div\n                key={template.id}\n                className=\"p-4 border border-border rounded-lg hover:border-primary/50 transition-colors\"\n                data-testid={`template-${template.id}`}\n              >\n                <h3 className=\"font-semibold text-foreground mb-1\">{template.name}</h3>\n                <p className=\"text-sm text-muted-foreground mb-3\">{template.description}</p>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-xs text-muted-foreground capitalize\">{template.category}</span>\n                  <div className=\"flex gap-2\">\n                    <Button variant=\"outline\" size=\"sm\" data-testid={`button-edit-${template.id}`}>\n                      Edit\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" data-testid={`button-use-${template.id}`}>\n                      Use\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\n// Template Creator Component\nfunction TemplateCreator({ onClose }: { onClose: () => void }) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n    category: \"purchase\",\n    content: \"\",\n    mergeFields: \"\",\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await fetch('/api/contract-templates', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error('Failed to create template');\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Template created successfully\" });\n      queryClient.invalidateQueries({ queryKey: ['/api/contract-templates'] });\n      onClose();\n    },\n    onError: () => {\n      toast({ title: \"Failed to create template\", variant: \"destructive\" });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    createMutation.mutate({\n      ...formData,\n      mergeFields: formData.mergeFields ? formData.mergeFields.split(',').map(f => f.trim()) : [],\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4 p-4 bg-accent/5 rounded-lg mb-4\">\n      <h3 className=\"font-semibold text-lg\">Create New Template</h3>\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"template-name\">Template Name</Label>\n          <Input\n            id=\"template-name\"\n            data-testid=\"input-template-name\"\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n            placeholder=\"e.g., Standard Purchase Agreement\"\n            required\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"template-category\">Category</Label>\n          <Select value={formData.category} onValueChange={(value) => setFormData({ ...formData, category: value })}>\n            <SelectTrigger data-testid=\"select-template-category\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"purchase\">Purchase Agreement</SelectItem>\n              <SelectItem value=\"assignment\">Assignment Contract</SelectItem>\n              <SelectItem value=\"option\">Option Contract</SelectItem>\n              <SelectItem value=\"loi\">Letter of Intent</SelectItem>\n              <SelectItem value=\"other\">Other</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"template-description\">Description</Label>\n        <Input\n          id=\"template-description\"\n          data-testid=\"input-template-description\"\n          value={formData.description}\n          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n          placeholder=\"Brief description of this template\"\n        />\n      </div>\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"template-content\">Template Content</Label>\n        <Textarea\n          id=\"template-content\"\n          data-testid=\"textarea-template-content\"\n          value={formData.content}\n          onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n          placeholder=\"Enter template content with merge fields like {{buyerName}}, {{sellerName}}, etc.\"\n          className=\"min-h-[200px] font-mono text-sm\"\n          required\n        />\n      </div>\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"template-merge-fields\">Merge Fields (comma-separated)</Label>\n        <Input\n          id=\"template-merge-fields\"\n          data-testid=\"input-template-merge-fields\"\n          value={formData.mergeFields}\n          onChange={(e) => setFormData({ ...formData, mergeFields: e.target.value })}\n          placeholder=\"e.g., buyerName, sellerName, propertyAddress, purchasePrice\"\n        />\n      </div>\n      <div className=\"flex gap-3\">\n        <Button type=\"submit\" data-testid=\"button-save-template\" disabled={createMutation.isPending}>\n          <Save className=\"w-4 h-4 mr-2\" />\n          {createMutation.isPending ? \"Saving...\" : \"Save Template\"}\n        </Button>\n        <Button type=\"button\" variant=\"outline\" onClick={onClose} data-testid=\"button-cancel-template\">\n          Cancel\n        </Button>\n      </div>\n    </form>\n  );\n}\n\n// LOI Manager Component\nfunction LOIManager({ lois, properties, isLoading }: { lois: any[], properties: any[], isLoading: boolean }) {\n  const [showCreate, setShowCreate] = useState(false);\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <CardTitle>Letters of Intent</CardTitle>\n            <CardDescription>Create and track LOIs for property acquisitions</CardDescription>\n          </div>\n          <Button onClick={() => setShowCreate(!showCreate)} data-testid=\"button-new-loi\">\n            <Plus className=\"w-4 h-4 mr-2\" />\n            New LOI\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {showCreate && <LOICreator properties={properties} onClose={() => setShowCreate(false)} />}\n        \n        {isLoading ? (\n          <div className=\"text-center py-8 text-muted-foreground\">Loading LOIs...</div>\n        ) : lois.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <FileText className=\"w-12 h-12 mx-auto text-muted-foreground/50 mb-3\" />\n            <p className=\"text-muted-foreground\">No LOIs yet</p>\n          </div>\n        ) : (\n          <div className=\"space-y-3 mt-4\">\n            {lois.map((loi: any) => (\n              <div\n                key={loi.id}\n                className=\"flex items-center justify-between p-4 border border-border rounded-lg\"\n                data-testid={`loi-${loi.id}`}\n              >\n                <div className=\"flex-1\">\n                  <h3 className=\"font-semibold text-foreground\">{loi.buyerName} → {loi.sellerName}</h3>\n                  <div className=\"flex items-center gap-4 mt-1 text-sm text-muted-foreground\">\n                    <span>Offer: ${parseFloat(loi.offerAmount).toLocaleString()}</span>\n                    <span className=\"capitalize\">Status: {loi.status}</span>\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button variant=\"outline\" size=\"sm\" data-testid={`button-view-loi-${loi.id}`}>\n                    View\n                  </Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\n// LOI Creator Component\nfunction LOICreator({ properties, onClose }: { properties: any[], onClose: () => void }) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [formData, setFormData] = useState({\n    propertyId: \"\",\n    buyerName: \"\",\n    sellerName: \"\",\n    offerAmount: \"\",\n    earnestMoney: \"\",\n    closingDate: \"\",\n    specialTerms: \"\",\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await fetch('/api/lois', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error('Failed to create LOI');\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"LOI created successfully\" });\n      queryClient.invalidateQueries({ queryKey: ['/api/lois'] });\n      onClose();\n    },\n    onError: () => {\n      toast({ title: \"Failed to create LOI\", variant: \"destructive\" });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    createMutation.mutate({\n      ...formData,\n      propertyId: parseInt(formData.propertyId),\n      offerAmount: formData.offerAmount,\n      earnestMoney: formData.earnestMoney || null,\n      closingDate: formData.closingDate || null,\n      status: 'draft',\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4 p-4 bg-accent/5 rounded-lg mb-4\">\n      <h3 className=\"font-semibold text-lg\">Create New LOI</h3>\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"loi-property\">Property</Label>\n          <Select value={formData.propertyId} onValueChange={(value) => setFormData({ ...formData, propertyId: value })} required>\n            <SelectTrigger data-testid=\"select-loi-property\">\n              <SelectValue placeholder=\"Select property\" />\n            </SelectTrigger>\n            <SelectContent>\n              {properties.map((property: any) => (\n                <SelectItem key={property.id} value={property.id.toString()}>\n                  {property.address}, {property.city}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"loi-buyer\">Buyer Name</Label>\n          <Input\n            id=\"loi-buyer\"\n            data-testid=\"input-loi-buyer\"\n            value={formData.buyerName}\n            onChange={(e) => setFormData({ ...formData, buyerName: e.target.value })}\n            required\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"loi-seller\">Seller Name</Label>\n          <Input\n            id=\"loi-seller\"\n            data-testid=\"input-loi-seller\"\n            value={formData.sellerName}\n            onChange={(e) => setFormData({ ...formData, sellerName: e.target.value })}\n            required\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"loi-offer\">Offer Amount</Label>\n          <Input\n            id=\"loi-offer\"\n            data-testid=\"input-loi-offer\"\n            type=\"number\"\n            value={formData.offerAmount}\n            onChange={(e) => setFormData({ ...formData, offerAmount: e.target.value })}\n            required\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"loi-earnest\">Earnest Money</Label>\n          <Input\n            id=\"loi-earnest\"\n            data-testid=\"input-loi-earnest\"\n            type=\"number\"\n            value={formData.earnestMoney}\n            onChange={(e) => setFormData({ ...formData, earnestMoney: e.target.value })}\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"loi-closing\">Closing Date</Label>\n          <Input\n            id=\"loi-closing\"\n            data-testid=\"input-loi-closing\"\n            type=\"date\"\n            value={formData.closingDate}\n            onChange={(e) => setFormData({ ...formData, closingDate: e.target.value })}\n          />\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"loi-terms\">Special Terms</Label>\n        <Textarea\n          id=\"loi-terms\"\n          data-testid=\"textarea-loi-terms\"\n          value={formData.specialTerms}\n          onChange={(e) => setFormData({ ...formData, specialTerms: e.target.value })}\n          placeholder=\"Enter any special terms or conditions...\"\n          className=\"min-h-[100px]\"\n        />\n      </div>\n\n      <div className=\"flex gap-3\">\n        <Button type=\"submit\" data-testid=\"button-create-loi\" disabled={createMutation.isPending}>\n          {createMutation.isPending ? \"Creating...\" : \"Create LOI\"}\n        </Button>\n        <Button type=\"button\" variant=\"outline\" onClick={onClose} data-testid=\"button-cancel-loi\">\n          Cancel\n        </Button>\n      </div>\n    </form>\n  );\n}\n","path":null,"size_bytes":26907,"size_tokens":null},"client/src/components/ui/button-group.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\n        vertical:\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\n      },\n    },\n    defaultVariants: {\n      orientation: \"horizontal\",\n    },\n  }\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","path":null,"size_bytes":2209,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport bcrypt from \"bcryptjs\";\nimport { storage } from \"./storage\";\nimport { \n  insertLeadSchema, \n  insertPropertySchema, \n  insertContactSchema, \n  insertContractSchema,\n  insertContractTemplateSchema,\n  insertContractDocumentSchema,\n  insertDocumentVersionSchema,\n  insertLoiSchema,\n  insertUserSchema,\n  insertTwoFactorAuthSchema,\n  insertBackupCodeSchema,\n  insertTeamSchema,\n  insertTeamMemberSchema,\n  insertTeamActivityLogSchema,\n  insertNotificationPreferenceSchema,\n  insertUserNotificationSchema,\n  insertUserGoalSchema,\n  insertOfferSchema,\n  insertTimesheetEntrySchema\n} from \"@shared/schema\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // AUTH ENDPOINTS\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n      \n      if (!email || !password) {\n        return res.status(400).json({ message: \"Email and password are required\" });\n      }\n\n      const user = await storage.getUserByEmail(email);\n      if (!user || !user.passwordHash) {\n        return res.status(401).json({ message: \"Invalid email or password\" });\n      }\n\n      const isValid = await bcrypt.compare(password, user.passwordHash);\n      if (!isValid) {\n        return res.status(401).json({ message: \"Invalid email or password\" });\n      }\n\n      if (!user.isActive) {\n        return res.status(403).json({ message: \"Account is inactive\" });\n      }\n\n      req.session.userId = user.id;\n      req.session.email = user.email;\n\n      const { passwordHash, ...userWithoutPassword } = user;\n      res.json({ user: userWithoutPassword });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/auth/signup\", async (req, res) => {\n    try {\n      const { firstName, lastName, email, password, role = \"employee\", isSuperAdmin = false, isActive = true } = req.body;\n      \n      if (!firstName || !lastName || !email || !password) {\n        return res.status(400).json({ message: \"All fields are required\" });\n      }\n\n      const existingUser = await storage.getUserByEmail(email);\n      if (existingUser) {\n        return res.status(409).json({ message: \"Email already in use\" });\n      }\n\n      const passwordHash = await bcrypt.hash(password, 12);\n\n      const newUser = await storage.createUser({\n        email,\n        passwordHash,\n        firstName,\n        lastName,\n        role,\n        isSuperAdmin,\n        isActive,\n      });\n\n      req.session.userId = newUser.id;\n      req.session.email = newUser.email;\n\n      const { passwordHash: _, ...userWithoutPassword } = newUser;\n      res.status(201).json({ user: userWithoutPassword });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", async (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        return res.status(500).json({ message: \"Failed to logout\" });\n      }\n      res.json({ message: \"Logged out successfully\" });\n    });\n  });\n\n  app.get(\"/api/auth/me\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Not authenticated\" });\n      }\n\n      const user = await storage.getUserById(req.session.userId);\n      if (!user) {\n        req.session.destroy(() => {});\n        return res.status(401).json({ message: \"User not found\" });\n      }\n\n      const { passwordHash, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // LEADS ENDPOINTS\n  app.get(\"/api/leads\", async (req, res) => {\n    try {\n      const allLeads = await storage.getLeads();\n      res.json(allLeads);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/leads/:id\", async (req, res) => {\n    try {\n      const lead = await storage.getLeadById(parseInt(req.params.id));\n      if (!lead) return res.status(404).json({ message: \"Lead not found\" });\n      res.json(lead);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/leads\", async (req, res) => {\n    try {\n      const validated = insertLeadSchema.parse(req.body);\n      const lead = await storage.createLead(validated);\n      res.status(201).json(lead);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/leads/:id\", async (req, res) => {\n    try {\n      const partial = insertLeadSchema.partial().parse(req.body);\n      const lead = await storage.updateLead(parseInt(req.params.id), partial);\n      res.json(lead);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/leads/:id\", async (req, res) => {\n    try {\n      await storage.deleteLead(parseInt(req.params.id));\n      res.json({ message: \"Lead deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // PROPERTIES ENDPOINTS\n  app.get(\"/api/properties\", async (req, res) => {\n    try {\n      const allProperties = await storage.getProperties();\n      res.json(allProperties);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/properties/:id\", async (req, res) => {\n    try {\n      const property = await storage.getPropertyById(parseInt(req.params.id));\n      if (!property) return res.status(404).json({ message: \"Property not found\" });\n      res.json(property);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/properties\", async (req, res) => {\n    try {\n      const validated = insertPropertySchema.parse(req.body);\n      const property = await storage.createProperty(validated);\n      res.status(201).json(property);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/properties/:id\", async (req, res) => {\n    try {\n      const partial = insertPropertySchema.partial().parse(req.body);\n      const property = await storage.updateProperty(parseInt(req.params.id), partial);\n      res.json(property);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/properties/:id\", async (req, res) => {\n    try {\n      await storage.deleteProperty(parseInt(req.params.id));\n      res.json({ message: \"Property deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // CONTRACTS ENDPOINTS\n  app.get(\"/api/contracts\", async (req, res) => {\n    try {\n      const allContracts = await storage.getContracts();\n      res.json(allContracts);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/contracts/:id\", async (req, res) => {\n    try {\n      const contract = await storage.getContractById(parseInt(req.params.id));\n      if (!contract) return res.status(404).json({ message: \"Contract not found\" });\n      res.json(contract);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/contracts\", async (req, res) => {\n    try {\n      const validated = insertContractSchema.parse(req.body);\n      const contract = await storage.createContract(validated);\n      res.status(201).json(contract);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/contracts/:id\", async (req, res) => {\n    try {\n      const partial = insertContractSchema.partial().parse(req.body);\n      const contract = await storage.updateContract(parseInt(req.params.id), partial);\n      res.json(contract);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/contracts/:id\", async (req, res) => {\n    try {\n      await storage.deleteContract(parseInt(req.params.id));\n      res.json({ message: \"Contract deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // CONTACTS ENDPOINTS\n  app.get(\"/api/contacts\", async (req, res) => {\n    try {\n      const allContacts = await storage.getContacts();\n      res.json(allContacts);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/contacts\", async (req, res) => {\n    try {\n      const validated = insertContactSchema.parse(req.body);\n      const contact = await storage.createContact(validated);\n      res.status(201).json(contact);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // CONTRACT TEMPLATES ENDPOINTS\n  app.get(\"/api/contract-templates\", async (req, res) => {\n    try {\n      const templates = await storage.getContractTemplates();\n      res.json(templates);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/contract-templates/:id\", async (req, res) => {\n    try {\n      const template = await storage.getContractTemplateById(parseInt(req.params.id));\n      if (!template) return res.status(404).json({ message: \"Template not found\" });\n      res.json(template);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/contract-templates\", async (req, res) => {\n    try {\n      const validated = insertContractTemplateSchema.parse(req.body);\n      const template = await storage.createContractTemplate(validated);\n      res.status(201).json(template);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/contract-templates/:id\", async (req, res) => {\n    try {\n      const partial = insertContractTemplateSchema.partial().parse(req.body);\n      const template = await storage.updateContractTemplate(parseInt(req.params.id), partial);\n      res.json(template);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/contract-templates/:id\", async (req, res) => {\n    try {\n      await storage.deleteContractTemplate(parseInt(req.params.id));\n      res.json({ message: \"Template deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // CONTRACT DOCUMENTS ENDPOINTS\n  app.get(\"/api/contract-documents\", async (req, res) => {\n    try {\n      const documents = await storage.getContractDocuments();\n      res.json(documents);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/contract-documents/:id\", async (req, res) => {\n    try {\n      const document = await storage.getContractDocumentById(parseInt(req.params.id));\n      if (!document) return res.status(404).json({ message: \"Document not found\" });\n      res.json(document);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/contract-documents\", async (req, res) => {\n    try {\n      const validated = insertContractDocumentSchema.parse(req.body);\n      const document = await storage.createContractDocument(validated);\n      res.status(201).json(document);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/contract-documents/:id\", async (req, res) => {\n    try {\n      const partial = insertContractDocumentSchema.partial().parse(req.body);\n      const document = await storage.updateContractDocument(parseInt(req.params.id), partial);\n      res.json(document);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/contract-documents/:id\", async (req, res) => {\n    try {\n      await storage.deleteContractDocument(parseInt(req.params.id));\n      res.json({ message: \"Document deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // DOCUMENT VERSIONS ENDPOINTS\n  app.get(\"/api/documents/:documentId/versions\", async (req, res) => {\n    try {\n      const versions = await storage.getDocumentVersions(parseInt(req.params.documentId));\n      res.json(versions);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/documents/:documentId/versions\", async (req, res) => {\n    try {\n      const validated = insertDocumentVersionSchema.parse({\n        ...req.body,\n        documentId: parseInt(req.params.documentId)\n      });\n      const version = await storage.createDocumentVersion(validated);\n      res.status(201).json(version);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // LOIS ENDPOINTS\n  app.get(\"/api/lois\", async (req, res) => {\n    try {\n      const allLois = await storage.getLois();\n      res.json(allLois);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/lois/:id\", async (req, res) => {\n    try {\n      const loi = await storage.getLoiById(parseInt(req.params.id));\n      if (!loi) return res.status(404).json({ message: \"LOI not found\" });\n      res.json(loi);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/lois\", async (req, res) => {\n    try {\n      const validated = insertLoiSchema.parse(req.body);\n      const loi = await storage.createLoi(validated);\n      res.status(201).json(loi);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/lois/:id\", async (req, res) => {\n    try {\n      const partial = insertLoiSchema.partial().parse(req.body);\n      const loi = await storage.updateLoi(parseInt(req.params.id), partial);\n      res.json(loi);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/lois/:id\", async (req, res) => {\n    try {\n      await storage.deleteLoi(parseInt(req.params.id));\n      res.json({ message: \"LOI deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // USERS ENDPOINTS\n  app.get(\"/api/users\", async (req, res) => {\n    try {\n      const users = await storage.getUsers();\n      res.json(users);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/users/:id\", async (req, res) => {\n    try {\n      const user = await storage.getUserById(parseInt(req.params.id));\n      if (!user) return res.status(404).json({ message: \"User not found\" });\n      res.json(user);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/users\", async (req, res) => {\n    try {\n      const validated = insertUserSchema.parse(req.body);\n      const user = await storage.createUser(validated);\n      res.status(201).json(user);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // Change password\n  app.patch(\"/api/users/:id/password\", async (req, res) => {\n    if (!req.session.userId) {\n      return res.status(401).json({ message: \"Not authenticated\" });\n    }\n\n    const userId = parseInt(req.params.id);\n    if (req.session.userId !== userId) {\n      return res.status(403).json({ message: \"Forbidden\" });\n    }\n\n    try {\n      const { currentPassword, newPassword } = req.body;\n\n      if (!currentPassword || !newPassword) {\n        return res.status(400).json({ message: \"Current and new password are required\" });\n      }\n\n      if (newPassword.length < 8) {\n        return res.status(400).json({ message: \"Password must be at least 8 characters long\" });\n      }\n\n      const user = await storage.getUserById(userId);\n      if (!user || !user.passwordHash) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const isValid = await bcrypt.compare(currentPassword, user.passwordHash);\n      if (!isValid) {\n        return res.status(401).json({ message: \"Current password is incorrect\" });\n      }\n\n      const newPasswordHash = await bcrypt.hash(newPassword, 12);\n      await storage.updateUser(userId, { passwordHash: newPasswordHash });\n\n      res.json({ message: \"Password updated successfully\" });\n    } catch (error) {\n      console.error(\"Error changing password:\", error);\n      res.status(500).json({ message: \"Failed to change password\" });\n    }\n  });\n\n  app.patch(\"/api/users/:id\", async (req, res) => {\n    try {\n      const partial = insertUserSchema.partial().parse(req.body);\n      const user = await storage.updateUser(parseInt(req.params.id), partial);\n      res.json(user);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // TWO FACTOR AUTH ENDPOINTS\n  app.get(\"/api/users/:userId/2fa\", async (req, res) => {\n    try {\n      const auth = await storage.getTwoFactorAuthByUserId(parseInt(req.params.userId));\n      res.json(auth || { isEnabled: false });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/users/:userId/2fa\", async (req, res) => {\n    try {\n      const validated = insertTwoFactorAuthSchema.parse({ ...req.body, userId: parseInt(req.params.userId) });\n      const auth = await storage.createTwoFactorAuth(validated);\n      res.status(201).json(auth);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/users/:userId/2fa\", async (req, res) => {\n    try {\n      const partial = insertTwoFactorAuthSchema.partial().parse(req.body);\n      const auth = await storage.updateTwoFactorAuth(parseInt(req.params.userId), partial);\n      res.json(auth);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/users/:userId/2fa\", async (req, res) => {\n    try {\n      await storage.deleteTwoFactorAuth(parseInt(req.params.userId));\n      res.json({ message: \"2FA disabled\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // BACKUP CODES ENDPOINTS\n  app.get(\"/api/users/:userId/backup-codes\", async (req, res) => {\n    try {\n      const codes = await storage.getBackupCodesByUserId(parseInt(req.params.userId));\n      res.json(codes);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/users/:userId/backup-codes\", async (req, res) => {\n    try {\n      const validated = insertBackupCodeSchema.parse({ ...req.body, userId: parseInt(req.params.userId) });\n      const code = await storage.createBackupCode(validated);\n      res.status(201).json(code);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // TEAMS ENDPOINTS\n  app.get(\"/api/teams\", async (req, res) => {\n    try {\n      const teams = await storage.getTeams();\n      res.json(teams);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/teams/:id\", async (req, res) => {\n    try {\n      const team = await storage.getTeamById(parseInt(req.params.id));\n      if (!team) return res.status(404).json({ message: \"Team not found\" });\n      res.json(team);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/teams\", async (req, res) => {\n    try {\n      const validated = insertTeamSchema.parse(req.body);\n      const team = await storage.createTeam(validated);\n      res.status(201).json(team);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/teams/:id\", async (req, res) => {\n    try {\n      const partial = insertTeamSchema.partial().parse(req.body);\n      const team = await storage.updateTeam(parseInt(req.params.id), partial);\n      res.json(team);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/teams/:id\", async (req, res) => {\n    try {\n      await storage.deleteTeam(parseInt(req.params.id));\n      res.json({ message: \"Team deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // TEAM MEMBERS ENDPOINTS\n  app.get(\"/api/teams/:teamId/members\", async (req, res) => {\n    try {\n      const members = await storage.getTeamMembers(parseInt(req.params.teamId));\n      res.json(members);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/teams/:teamId/members\", async (req, res) => {\n    try {\n      const validated = insertTeamMemberSchema.parse({ ...req.body, teamId: parseInt(req.params.teamId) });\n      const member = await storage.createTeamMember(validated);\n      res.status(201).json(member);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/team-members/:id\", async (req, res) => {\n    try {\n      const partial = insertTeamMemberSchema.partial().parse(req.body);\n      const member = await storage.updateTeamMember(parseInt(req.params.id), partial);\n      res.json(member);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/team-members/:id\", async (req, res) => {\n    try {\n      await storage.deleteTeamMember(parseInt(req.params.id));\n      res.json({ message: \"Team member removed\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // TEAM ACTIVITY LOGS ENDPOINTS\n  app.get(\"/api/teams/:teamId/activity\", async (req, res) => {\n    try {\n      const limit = req.query.limit ? parseInt(req.query.limit as string) : undefined;\n      const logs = await storage.getTeamActivityLogs(parseInt(req.params.teamId), limit);\n      res.json(logs);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/teams/:teamId/activity\", async (req, res) => {\n    try {\n      const validated = insertTeamActivityLogSchema.parse({ ...req.body, teamId: parseInt(req.params.teamId) });\n      const log = await storage.createTeamActivityLog(validated);\n      res.status(201).json(log);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // NOTIFICATION PREFERENCES ENDPOINTS\n  app.get(\"/api/users/:userId/notification-preferences\", async (req, res) => {\n    try {\n      const prefs = await storage.getNotificationPreferencesByUserId(parseInt(req.params.userId));\n      res.json(prefs || {});\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/users/:userId/notification-preferences\", async (req, res) => {\n    try {\n      const validated = insertNotificationPreferenceSchema.parse({ ...req.body, userId: parseInt(req.params.userId) });\n      const prefs = await storage.createNotificationPreferences(validated);\n      res.status(201).json(prefs);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/users/:userId/notification-preferences\", async (req, res) => {\n    try {\n      const partial = insertNotificationPreferenceSchema.partial().parse(req.body);\n      const prefs = await storage.updateNotificationPreferences(parseInt(req.params.userId), partial);\n      res.json(prefs);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // USER NOTIFICATIONS ENDPOINTS (actual notification messages)\n  app.get(\"/api/users/:userId/notifications\", async (req, res) => {\n    try {\n      const notifications = await storage.getUserNotifications(parseInt(req.params.userId));\n      res.json(notifications);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/users/:userId/notifications\", async (req, res) => {\n    try {\n      const validated = insertUserNotificationSchema.parse({ ...req.body, userId: parseInt(req.params.userId) });\n      const notification = await storage.createUserNotification(validated);\n      res.status(201).json(notification);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/notifications/:id/read\", async (req, res) => {\n    try {\n      const notification = await storage.markNotificationAsRead(parseInt(req.params.id));\n      res.json(notification);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/notifications/:id\", async (req, res) => {\n    try {\n      await storage.deleteUserNotification(parseInt(req.params.id));\n      res.json({ message: \"Notification deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/users/:userId/notifications\", async (req, res) => {\n    try {\n      await storage.deleteAllUserNotifications(parseInt(req.params.userId));\n      res.json({ message: \"All notifications deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/users/:userId/notifications/read-all\", async (req, res) => {\n    try {\n      await storage.markAllNotificationsAsRead(parseInt(req.params.userId));\n      res.json({ message: \"All notifications marked as read\" });\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // USER GOALS ENDPOINTS\n  app.get(\"/api/users/:userId/goals\", async (req, res) => {\n    try {\n      const goals = await storage.getUserGoals(parseInt(req.params.userId));\n      res.json(goals);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/goals/:id\", async (req, res) => {\n    try {\n      const goal = await storage.getUserGoalById(parseInt(req.params.id));\n      if (!goal) return res.status(404).json({ message: \"Goal not found\" });\n      res.json(goal);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/users/:userId/goals\", async (req, res) => {\n    try {\n      const validated = insertUserGoalSchema.parse({ ...req.body, userId: parseInt(req.params.userId) });\n      const goal = await storage.createUserGoal(validated);\n      res.status(201).json(goal);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/goals/:id\", async (req, res) => {\n    try {\n      const partial = insertUserGoalSchema.partial().parse(req.body);\n      const goal = await storage.updateUserGoal(parseInt(req.params.id), partial);\n      res.json(goal);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/goals/:id\", async (req, res) => {\n    try {\n      await storage.deleteUserGoal(parseInt(req.params.id));\n      res.json({ message: \"Goal deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // OFFERS ENDPOINTS\n  app.get(\"/api/offers\", async (req, res) => {\n    try {\n      const userId = req.query.userId ? parseInt(req.query.userId as string) : undefined;\n      const propertyId = req.query.propertyId ? parseInt(req.query.propertyId as string) : undefined;\n      \n      if (userId) {\n        const offers = await storage.getOffersByUserId(userId);\n        return res.json(offers);\n      }\n      if (propertyId) {\n        const offers = await storage.getOffersByPropertyId(propertyId);\n        return res.json(offers);\n      }\n      const offers = await storage.getOffers();\n      res.json(offers);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/offers/:id\", async (req, res) => {\n    try {\n      const offer = await storage.getOfferById(parseInt(req.params.id));\n      if (!offer) return res.status(404).json({ message: \"Offer not found\" });\n      res.json(offer);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/offers\", async (req, res) => {\n    try {\n      const validated = insertOfferSchema.parse(req.body);\n      const offer = await storage.createOffer(validated);\n      res.status(201).json(offer);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/offers/:id\", async (req, res) => {\n    try {\n      const partial = insertOfferSchema.partial().parse(req.body);\n      const offer = await storage.updateOffer(parseInt(req.params.id), partial);\n      res.json(offer);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/offers/:id\", async (req, res) => {\n    try {\n      await storage.deleteOffer(parseInt(req.params.id));\n      res.json({ message: \"Offer deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // TIMESHEET ENTRIES ENDPOINTS\n  app.get(\"/api/users/:userId/timesheet\", async (req, res) => {\n    try {\n      const entries = await storage.getTimesheetEntries(parseInt(req.params.userId));\n      res.json(entries);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/timesheet/:id\", async (req, res) => {\n    try {\n      const entry = await storage.getTimesheetEntryById(parseInt(req.params.id));\n      if (!entry) return res.status(404).json({ message: \"Entry not found\" });\n      res.json(entry);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/users/:userId/timesheet\", async (req, res) => {\n    try {\n      const validated = insertTimesheetEntrySchema.parse({ ...req.body, userId: parseInt(req.params.userId) });\n      const entry = await storage.createTimesheetEntry(validated);\n      res.status(201).json(entry);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/timesheet/:id\", async (req, res) => {\n    try {\n      const partial = insertTimesheetEntrySchema.partial().parse(req.body);\n      const entry = await storage.updateTimesheetEntry(parseInt(req.params.id), partial);\n      res.json(entry);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/timesheet/:id\", async (req, res) => {\n    try {\n      await storage.deleteTimesheetEntry(parseInt(req.params.id));\n      res.json({ message: \"Entry deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","path":null,"size_bytes":30962,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, decimal, timestamp, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// LEADS TABLE\nexport const leads = pgTable(\"leads\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  address: varchar(\"address\", { length: 255 }).notNull(),\n  city: varchar(\"city\", { length: 100 }).notNull(),\n  state: varchar(\"state\", { length: 2 }).notNull(),\n  zipCode: varchar(\"zip_code\", { length: 10 }).notNull(),\n  ownerName: varchar(\"owner_name\", { length: 255 }).notNull(),\n  ownerPhone: varchar(\"owner_phone\", { length: 20 }),\n  ownerEmail: varchar(\"owner_email\", { length: 255 }),\n  estimatedValue: decimal(\"estimated_value\", { precision: 12, scale: 2 }),\n  relasScore: integer(\"relas_score\"),\n  motivation: varchar(\"motivation\", { length: 50 }),\n  status: varchar(\"status\", { length: 50 }).default(\"new\"),\n  notes: text(\"notes\"),\n  source: varchar(\"source\", { length: 100 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertLeadSchema = createInsertSchema(leads).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type Lead = typeof leads.$inferSelect;\nexport type InsertLead = z.infer<typeof insertLeadSchema>;\n\n// PROPERTIES TABLE\nexport const properties = pgTable(\"properties\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  address: varchar(\"address\", { length: 255 }).notNull(),\n  city: varchar(\"city\", { length: 100 }).notNull(),\n  state: varchar(\"state\", { length: 2 }).notNull(),\n  zipCode: varchar(\"zip_code\", { length: 10 }).notNull(),\n  beds: integer(\"beds\"),\n  baths: integer(\"baths\"),\n  sqft: integer(\"sqft\"),\n  price: decimal(\"price\", { precision: 12, scale: 2 }),\n  status: varchar(\"status\", { length: 50 }).default(\"active\"),\n  apn: varchar(\"apn\", { length: 100 }),\n  yearBuilt: integer(\"year_built\"),\n  lotSize: varchar(\"lot_size\", { length: 50 }),\n  occupancy: varchar(\"occupancy\", { length: 50 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertPropertySchema = createInsertSchema(properties).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type Property = typeof properties.$inferSelect;\nexport type InsertProperty = z.infer<typeof insertPropertySchema>;\n\n// CONTACTS TABLE\nexport const contacts = pgTable(\"contacts\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  email: varchar(\"email\", { length: 255 }),\n  phone: varchar(\"phone\", { length: 20 }),\n  type: varchar(\"type\", { length: 50 }),\n  company: varchar(\"company\", { length: 255 }),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertContactSchema = createInsertSchema(contacts).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type Contact = typeof contacts.$inferSelect;\nexport type InsertContact = z.infer<typeof insertContactSchema>;\n\n// CONTRACTS TABLE\nexport const contracts = pgTable(\"contracts\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  propertyId: integer(\"property_id\").notNull(),\n  buyerId: integer(\"buyer_id\"),\n  sellerId: integer(\"seller_id\"),\n  amount: decimal(\"amount\", { precision: 12, scale: 2 }).notNull(),\n  status: varchar(\"status\", { length: 50 }).default(\"pending\"),\n  signDate: timestamp(\"sign_date\"),\n  closeDate: timestamp(\"close_date\"),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertContractSchema = createInsertSchema(contracts).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type Contract = typeof contracts.$inferSelect;\nexport type InsertContract = z.infer<typeof insertContractSchema>;\n\n// CONTRACT TEMPLATES TABLE\nexport const contractTemplates = pgTable(\"contract_templates\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  category: varchar(\"category\", { length: 100 }),\n  content: text(\"content\").notNull(),\n  mergeFields: text(\"merge_fields\").array(),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertContractTemplateSchema = createInsertSchema(contractTemplates).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type ContractTemplate = typeof contractTemplates.$inferSelect;\nexport type InsertContractTemplate = z.infer<typeof insertContractTemplateSchema>;\n\n// CONTRACT DOCUMENTS TABLE\nexport const contractDocuments = pgTable(\"contract_documents\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  templateId: integer(\"template_id\"),\n  propertyId: integer(\"property_id\"),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  documentType: varchar(\"document_type\", { length: 50 }).default(\"contract\"),\n  status: varchar(\"status\", { length: 50 }).default(\"draft\"),\n  content: text(\"content\").notNull(),\n  mergeData: text(\"merge_data\"),\n  pdfUrl: varchar(\"pdf_url\", { length: 500 }),\n  version: integer(\"version\").default(1),\n  createdBy: varchar(\"created_by\", { length: 255 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertContractDocumentSchema = createInsertSchema(contractDocuments).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type ContractDocument = typeof contractDocuments.$inferSelect;\nexport type InsertContractDocument = z.infer<typeof insertContractDocumentSchema>;\n\n// DOCUMENT VERSIONS TABLE\nexport const documentVersions = pgTable(\"document_versions\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  documentId: integer(\"document_id\").notNull(),\n  versionNumber: integer(\"version_number\").notNull(),\n  content: text(\"content\").notNull(),\n  changes: text(\"changes\"),\n  createdBy: varchar(\"created_by\", { length: 255 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertDocumentVersionSchema = createInsertSchema(documentVersions).omit({ id: true, createdAt: true } as any);\nexport type DocumentVersion = typeof documentVersions.$inferSelect;\nexport type InsertDocumentVersion = z.infer<typeof insertDocumentVersionSchema>;\n\n// LETTERS OF INTENT (LOI) TABLE\nexport const lois = pgTable(\"lois\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  propertyId: integer(\"property_id\").notNull(),\n  buyerName: varchar(\"buyer_name\", { length: 255 }).notNull(),\n  sellerName: varchar(\"seller_name\", { length: 255 }).notNull(),\n  offerAmount: decimal(\"offer_amount\", { precision: 12, scale: 2 }).notNull(),\n  earnestMoney: decimal(\"earnest_money\", { precision: 12, scale: 2 }),\n  closingDate: timestamp(\"closing_date\"),\n  contingencies: text(\"contingencies\").array(),\n  specialTerms: text(\"special_terms\"),\n  status: varchar(\"status\", { length: 50 }).default(\"draft\"),\n  sentDate: timestamp(\"sent_date\"),\n  responseDate: timestamp(\"response_date\"),\n  content: text(\"content\"),\n  pdfUrl: varchar(\"pdf_url\", { length: 500 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertLoiSchema = createInsertSchema(lois).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type Loi = typeof lois.$inferSelect;\nexport type InsertLoi = z.infer<typeof insertLoiSchema>;\n\n// USERS TABLE\nexport const users = pgTable(\"users\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  passwordHash: varchar(\"password_hash\", { length: 255 }),\n  firstName: varchar(\"first_name\", { length: 100 }),\n  lastName: varchar(\"last_name\", { length: 100 }),\n  phone: varchar(\"phone\", { length: 20 }),\n  companyName: varchar(\"company_name\", { length: 255 }),\n  licenseNumber: varchar(\"license_number\", { length: 100 }),\n  role: varchar(\"role\", { length: 50 }).default(\"user\"),\n  isSuperAdmin: boolean(\"is_super_admin\").default(false),\n  avatarUrl: varchar(\"avatar_url\", { length: 500 }),\n  profilePicture: text(\"profile_picture\"),\n  showBannerQuotes: boolean(\"show_banner_quotes\").default(true),\n  customBannerImages: text(\"custom_banner_images\").array(),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\n// TWO FACTOR AUTH TABLE\nexport const twoFactorAuth = pgTable(\"two_factor_auth\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: integer(\"user_id\").notNull().unique(),\n  secret: varchar(\"secret\", { length: 255 }).notNull(),\n  isEnabled: boolean(\"is_enabled\").default(false),\n  method: varchar(\"method\", { length: 50 }).default(\"totp\"),\n  phoneNumber: varchar(\"phone_number\", { length: 20 }),\n  emailBackup: varchar(\"email_backup\", { length: 255 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertTwoFactorAuthSchema = createInsertSchema(twoFactorAuth).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type TwoFactorAuth = typeof twoFactorAuth.$inferSelect;\nexport type InsertTwoFactorAuth = z.infer<typeof insertTwoFactorAuthSchema>;\n\n// BACKUP CODES TABLE\nexport const backupCodes = pgTable(\"backup_codes\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: integer(\"user_id\").notNull(),\n  code: varchar(\"code\", { length: 20 }).notNull(),\n  isUsed: boolean(\"is_used\").default(false),\n  usedAt: timestamp(\"used_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertBackupCodeSchema = createInsertSchema(backupCodes).omit({ id: true, createdAt: true } as any);\nexport type BackupCode = typeof backupCodes.$inferSelect;\nexport type InsertBackupCode = z.infer<typeof insertBackupCodeSchema>;\n\n// TEAMS TABLE\nexport const teams = pgTable(\"teams\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  ownerId: integer(\"owner_id\").notNull(),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertTeamSchema = createInsertSchema(teams).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type Team = typeof teams.$inferSelect;\nexport type InsertTeam = z.infer<typeof insertTeamSchema>;\n\n// TEAM MEMBERS TABLE\nexport const teamMembers = pgTable(\"team_members\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  teamId: integer(\"team_id\").notNull(),\n  userId: integer(\"user_id\").notNull(),\n  role: varchar(\"role\", { length: 50 }).default(\"member\"),\n  permissions: text(\"permissions\").array(),\n  invitedBy: integer(\"invited_by\"),\n  invitedAt: timestamp(\"invited_at\").defaultNow(),\n  joinedAt: timestamp(\"joined_at\"),\n  status: varchar(\"status\", { length: 50 }).default(\"active\"),\n});\n\nexport const insertTeamMemberSchema = createInsertSchema(teamMembers).omit({ id: true, invitedAt: true } as any);\nexport type TeamMember = typeof teamMembers.$inferSelect;\nexport type InsertTeamMember = z.infer<typeof insertTeamMemberSchema>;\n\n// TEAM ACTIVITY LOGS TABLE\nexport const teamActivityLogs = pgTable(\"team_activity_logs\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  teamId: integer(\"team_id\").notNull(),\n  userId: integer(\"user_id\"),\n  action: varchar(\"action\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  metadata: text(\"metadata\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertTeamActivityLogSchema = createInsertSchema(teamActivityLogs).omit({ id: true, createdAt: true } as any);\nexport type TeamActivityLog = typeof teamActivityLogs.$inferSelect;\nexport type InsertTeamActivityLog = z.infer<typeof insertTeamActivityLogSchema>;\n\n// NOTIFICATION PREFERENCES TABLE\nexport const notificationPreferences = pgTable(\"notification_preferences\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: integer(\"user_id\").notNull().unique(),\n  emailEnabled: boolean(\"email_enabled\").default(true),\n  pushEnabled: boolean(\"push_enabled\").default(true),\n  inAppEnabled: boolean(\"in_app_enabled\").default(true),\n  newLeads: boolean(\"new_leads\").default(true),\n  dealUpdates: boolean(\"deal_updates\").default(true),\n  contractAlerts: boolean(\"contract_alerts\").default(true),\n  weeklySummary: boolean(\"weekly_summary\").default(true),\n  frequency: varchar(\"frequency\", { length: 50 }).default(\"instant\"),\n  dndEnabled: boolean(\"dnd_enabled\").default(false),\n  dndStartTime: varchar(\"dnd_start_time\", { length: 10 }),\n  dndEndTime: varchar(\"dnd_end_time\", { length: 10 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertNotificationPreferenceSchema = createInsertSchema(notificationPreferences).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type NotificationPreference = typeof notificationPreferences.$inferSelect;\nexport type InsertNotificationPreference = z.infer<typeof insertNotificationPreferenceSchema>;\n\n// USER GOALS TABLE\nexport const userGoals = pgTable(\"user_goals\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: integer(\"user_id\").notNull(),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  targetValue: integer(\"target_value\").notNull(),\n  currentValue: integer(\"current_value\").default(0),\n  unit: varchar(\"unit\", { length: 50 }).default(\"deals\"),\n  period: varchar(\"period\", { length: 50 }).default(\"monthly\"),\n  startDate: timestamp(\"start_date\").defaultNow(),\n  endDate: timestamp(\"end_date\"),\n  status: varchar(\"status\", { length: 50 }).default(\"active\"),\n  milestones: text(\"milestones\").array(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertUserGoalSchema = createInsertSchema(userGoals).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type UserGoal = typeof userGoals.$inferSelect;\nexport type InsertUserGoal = z.infer<typeof insertUserGoalSchema>;\n\n// USER NOTIFICATIONS TABLE (actual notification messages)\nexport const userNotifications = pgTable(\"user_notifications\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: integer(\"user_id\").notNull(),\n  type: varchar(\"type\", { length: 50 }).default(\"system\"),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  read: boolean(\"read\").default(false),\n  relatedId: integer(\"related_id\"),\n  relatedType: varchar(\"related_type\", { length: 50 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertUserNotificationSchema = createInsertSchema(userNotifications).omit({ id: true, createdAt: true } as any);\nexport type UserNotification = typeof userNotifications.$inferSelect;\nexport type InsertUserNotification = z.infer<typeof insertUserNotificationSchema>;\n\n// OFFERS TABLE\nexport const offers = pgTable(\"offers\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  propertyId: integer(\"property_id\").notNull(),\n  userId: integer(\"user_id\").notNull(),\n  buyerName: varchar(\"buyer_name\", { length: 255 }),\n  sellerName: varchar(\"seller_name\", { length: 255 }),\n  offerAmount: decimal(\"offer_amount\", { precision: 12, scale: 2 }).notNull(),\n  status: varchar(\"status\", { length: 50 }).default(\"pending\"),\n  sentDate: timestamp(\"sent_date\"),\n  responseDate: timestamp(\"response_date\"),\n  expirationDate: timestamp(\"expiration_date\"),\n  notes: text(\"notes\"),\n  documents: text(\"documents\").array(),\n  responseNotes: text(\"response_notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertOfferSchema = createInsertSchema(offers).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type Offer = typeof offers.$inferSelect;\nexport type InsertOffer = z.infer<typeof insertOfferSchema>;\n\n// TIMESHEET ENTRIES TABLE\nexport const timesheetEntries = pgTable(\"timesheet_entries\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: integer(\"user_id\").notNull(),\n  date: varchar(\"date\", { length: 10 }).notNull(),\n  employee: varchar(\"employee\", { length: 255 }).notNull(),\n  task: varchar(\"task\", { length: 255 }).notNull(),\n  startTime: varchar(\"start_time\", { length: 10 }).notNull(),\n  endTime: varchar(\"end_time\", { length: 10 }).notNull(),\n  hours: decimal(\"hours\", { precision: 5, scale: 2 }).notNull(),\n  hourlyRate: decimal(\"hourly_rate\", { precision: 10, scale: 2 }).default(\"50\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertTimesheetEntrySchema = createInsertSchema(timesheetEntries).omit({ id: true, createdAt: true, updatedAt: true } as any);\nexport type TimesheetEntry = typeof timesheetEntries.$inferSelect;\nexport type InsertTimesheetEntry = z.infer<typeof insertTimesheetEntrySchema>;\n","path":null,"size_bytes":17637,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4887,"size_tokens":null},"client/src/components/ui/spinner.tsx":{"content":"import { Loader2Icon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn(\"size-4 animate-spin\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","path":null,"size_bytes":331,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":266,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n\" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n           // @replit: no hover, and add primary border\n           \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm border-destructive-border\",\n        outline:\n          // @replit Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color. Uses shadow-xs. no shadow on active\n          // No hover state\n          \" border [border-color:var(--button-outline)] shadow-xs active:shadow-none \",\n        secondary:\n          // @replit border, no hover, no shadow, secondary border.\n          \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // @replit no hover, transparent border\n        ghost: \"border border-transparent\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // @replit changed sizes\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2356,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"server/index-dev.ts":{"content":"import fs from \"node:fs\";\nimport { type Server } from \"node:http\";\nimport path from \"node:path\";\n\nimport type { Express } from \"express\";\nimport { nanoid } from \"nanoid\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\n\nimport runApp from \"./app\";\n\nimport viteConfig from \"../vite.config\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\n(async () => {\n  await runApp(setupVite);\n})();\n","path":null,"size_bytes":1609,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/node-postgres\";\nimport pg from \"pg\";\n\nconst { Pool } = pg;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL is required\");\n}\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nexport const db = drizzle(pool);\n","path":null,"size_bytes":288,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":2001,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4280,"size_tokens":null},"client/src/pages/leads.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Filter, Plus, Search, Building2 } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\n\nexport default function Leads() {\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n  const [newLead, setNewLead] = useState({\n    address: \"\",\n    city: \"\",\n    state: \"FL\",\n    zipCode: \"\",\n    ownerName: \"\",\n    ownerPhone: \"\",\n    ownerEmail: \"\",\n    estimatedValue: \"\",\n    status: \"new\"\n  });\n\n  const { data: leads = [], isLoading } = useQuery({\n    queryKey: [\"leads\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/leads\");\n      if (!res.ok) throw new Error(\"Failed to fetch leads\");\n      return res.json();\n    }\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (lead: any) => {\n      const payload = {\n        ...lead,\n        estimatedValue: lead.estimatedValue ? parseFloat(lead.estimatedValue) : null,\n      };\n      const res = await fetch(\"/api/leads\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) throw new Error(\"Failed to create lead\");\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"leads\"] });\n      setNewLead({ address: \"\", city: \"\", state: \"FL\", zipCode: \"\", ownerName: \"\", ownerPhone: \"\", ownerEmail: \"\", estimatedValue: \"\", status: \"new\" });\n    }\n  });\n\n  const handleAddLead = async () => {\n    if (newLead.address && newLead.city && newLead.zipCode && newLead.ownerName) {\n      await createMutation.mutateAsync(newLead);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"text-center py-12\">Loading leads...</div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n        <div className=\"space-y-1\">\n          <h1 className=\"text-3xl font-bold tracking-tight\">Leads Pipeline</h1>\n          <p className=\"text-muted-foreground\">Manage and track your active property leads.</p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative hidden md:block\">\n            <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n            <Input placeholder=\"Filter leads...\" className=\"w-[200px] pl-9\" />\n          </div>\n          <Button variant=\"outline\" size=\"sm\">\n            <Filter className=\"mr-2 h-4 w-4\" /> Filter\n          </Button>\n          \n          <Dialog>\n            <DialogTrigger asChild>\n              <Button size=\"sm\" className=\"bg-primary hover:bg-primary/90\">\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Add Lead\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"sm:max-w-[425px]\">\n              <DialogHeader>\n                <DialogTitle>Add New Lead</DialogTitle>\n                <DialogDescription>Enter property details to create a new lead.</DialogDescription>\n              </DialogHeader>\n              <div className=\"grid gap-4 py-4\">\n                <div className=\"grid grid-cols-4 items-center gap-4\">\n                  <Label htmlFor=\"address\" className=\"text-right\">Address</Label>\n                  <Input id=\"address\" placeholder=\"123 Main St\" className=\"col-span-3\" value={newLead.address} onChange={(e) => setNewLead({...newLead, address: e.target.value})} />\n                </div>\n                <div className=\"grid grid-cols-4 items-center gap-4\">\n                  <Label htmlFor=\"city\" className=\"text-right\">City</Label>\n                  <Input id=\"city\" placeholder=\"Orlando\" className=\"col-span-3\" value={newLead.city} onChange={(e) => setNewLead({...newLead, city: e.target.value})} />\n                </div>\n                <div className=\"grid grid-cols-4 items-center gap-4\">\n                  <Label htmlFor=\"zipCode\" className=\"text-right\">Zip Code</Label>\n                  <Input id=\"zipCode\" placeholder=\"32801\" className=\"col-span-3\" value={newLead.zipCode} onChange={(e) => setNewLead({...newLead, zipCode: e.target.value})} />\n                </div>\n                <div className=\"grid grid-cols-4 items-center gap-4\">\n                  <Label htmlFor=\"owner\" className=\"text-right\">Owner</Label>\n                  <Input id=\"owner\" placeholder=\"John Doe\" className=\"col-span-3\" value={newLead.ownerName} onChange={(e) => setNewLead({...newLead, ownerName: e.target.value})} />\n                </div>\n                <div className=\"grid grid-cols-4 items-center gap-4\">\n                  <Label htmlFor=\"phone\" className=\"text-right\">Phone</Label>\n                  <Input id=\"phone\" placeholder=\"(555) 123-4567\" className=\"col-span-3\" value={newLead.ownerPhone} onChange={(e) => setNewLead({...newLead, ownerPhone: e.target.value})} />\n                </div>\n              </div>\n              <DialogFooter>\n                <Button onClick={handleAddLead} disabled={createMutation.isPending} className=\"bg-primary hover:bg-primary/90 text-white\">\n                  {createMutation.isPending ? \"Creating...\" : \"Create Lead\"}\n                </Button>\n              </DialogFooter>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      <div className=\"rounded-md border bg-card shadow-sm\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>Address</TableHead>\n              <TableHead>Owner</TableHead>\n              <TableHead>Status</TableHead>\n              <TableHead>Score</TableHead>\n              <TableHead>Value</TableHead>\n              <TableHead className=\"text-right\">Contact</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {leads.map((lead: any) => (\n              <TableRow key={lead.id} className=\"hover:bg-muted/50 cursor-pointer transition-colors\" onClick={() => setLocation(`/properties/${lead.id}`)}>\n                <TableCell className=\"font-medium\">{lead.address}, {lead.city}</TableCell>\n                <TableCell>{lead.ownerName}</TableCell>\n                <TableCell>\n                  <Badge className={lead.status === \"negotiation\" ? \"bg-primary text-primary-foreground\" : \"bg-secondary\"}>{lead.status}</Badge>\n                </TableCell>\n                <TableCell>{lead.relasScore || \"—\"}</TableCell>\n                <TableCell>${lead.estimatedValue ? parseInt(lead.estimatedValue).toLocaleString() : \"—\"}</TableCell>\n                <TableCell className=\"text-right text-muted-foreground\">{lead.ownerPhone || \"—\"}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        {leads.length === 0 && (\n          <div className=\"text-center py-8 text-muted-foreground\">No leads yet. Create one to get started!</div>\n        )}\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":7459,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { metaImagesPlugin } from \"./vite-plugin-meta-images\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    tailwindcss(),\n    metaImagesPlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  css: {\n    postcss: {\n      plugins: [],\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1330,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // @replit\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \",\n  {\n    variants: {\n      variant: {\n        default:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary:\n          // @replit no hover because we use hover-elevate\n          \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n          // @replit shadow-xs\" - use badge outline variable\n        outline: \"text-foreground border [border-color:var(--badge-outline)]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1522,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":724,"size_tokens":null},"server/index-prod.ts":{"content":"import fs from \"node:fs\";\nimport { type Server } from \"node:http\";\nimport path from \"node:path\";\n\nimport express, { type Express, type Request } from \"express\";\n\nimport runApp from \"./app\";\n\nexport async function serveStatic(app: Express, server: Server) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n\n(async () => {\n  await runApp(serveStatic);\n})();\n","path":null,"size_bytes":726,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5124,"size_tokens":null},"client/src/components/ui/field.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        \"flex flex-col gap-6\",\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = \"legend\",\n  ...props\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        \"mb-3 font-medium\",\n        \"data-[variant=legend]:text-base\",\n        \"data-[variant=label]:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  \"group/field data-[invalid=true]:text-destructive flex w-full gap-3\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"[&>[data-slot=field-label]]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px has-[>[data-slot=field-content]]:items-start\",\n        ],\n        responsive: [\n          \"@md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto flex-col [&>*]:w-full [&>.sr-only]:w-auto\",\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  }\n)\n\nfunction Field({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>[data-slot=field]]:p-4\",\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug group-data-[disabled=true]/field:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        \"text-muted-foreground text-sm font-normal leading-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\n        \"nth-last-2:-mt-1 last:mt-0 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\n        className\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors?.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","path":null,"size_bytes":6044,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\"\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown\n        ),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-[--cell-size] select-none\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-muted-foreground select-none text-[0.8rem]\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md\",\n          defaultClassNames.day\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            )\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","path":null,"size_bytes":7569,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":768,"size_tokens":null},"client/src/components/ui/item.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn(\"group/item-group flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn(\"my-0\", className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  \"group/item [a]:hover:bg-accent/50 focus-visible:border-ring focus-visible:ring-ring/50 [a]:transition-colors flex flex-wrap items-center rounded-md border border-transparent text-sm outline-none transition-colors duration-100 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border-border\",\n        muted: \"bg-muted/50\",\n      },\n      size: {\n        default: \"gap-4 p-4 \",\n        sm: \"gap-2.5 px-4 py-3\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Item({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted size-8 rounded-sm border [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          \"size-10 overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction ItemMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        \"text-muted-foreground line-clamp-2 text-balance text-sm font-normal leading-normal\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn(\"flex items-center gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","path":null,"size_bytes":4494,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5745,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1486,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3007,"size_tokens":null},"client/src/pages/timesheet.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Clock, Plus, Trash2, Loader2 } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { toast } from \"sonner\";\n\ninterface TimeEntry {\n  id: number;\n  userId: number;\n  date: string;\n  employee: string;\n  task: string;\n  startTime: string;\n  endTime: string;\n  hours: number;\n  hourlyRate: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport default function Timesheet() {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const [openDialog, setOpenDialog] = useState(false);\n  const [formData, setFormData] = useState({\n    date: new Date().toISOString().split(\"T\")[0],\n    employee: \"\",\n    task: \"\",\n    startTime: \"09:00\",\n    endTime: \"17:00\",\n    hourlyRate: 50,\n  });\n\n  const { data: entries = [], isLoading } = useQuery<TimeEntry[]>({\n    queryKey: [`/api/users/${user?.id}/timesheet`],\n    enabled: !!user?.id,\n  });\n\n  const calculateHours = (start: string, end: string): number => {\n    if (!start || !end) return 0;\n    const [startH, startM] = start.split(\":\").map(Number);\n    const [endH, endM] = end.split(\":\").map(Number);\n    const startTotal = startH * 60 + startM;\n    const endTotal = endH * 60 + endM;\n    return (endTotal - startTotal) / 60;\n  };\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const hours = calculateHours(data.startTime, data.endTime);\n      const res = await fetch(`/api/users/${user?.id}/timesheet`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...data,\n          hours: hours.toFixed(2),\n          hourlyRate: parseFloat(data.hourlyRate),\n        }),\n        credentials: \"include\",\n      });\n      if (!res.ok) throw new Error(\"Failed to create entry\");\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}/timesheet`] });\n      toast.success(\"Time entry added\");\n      setOpenDialog(false);\n      setFormData({\n        date: new Date().toISOString().split(\"T\")[0],\n        employee: \"\",\n        task: \"\",\n        startTime: \"09:00\",\n        endTime: \"17:00\",\n        hourlyRate: 50,\n      });\n    },\n    onError: () => {\n      toast.error(\"Failed to add time entry\");\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: number) => {\n      const res = await fetch(`/api/timesheet/${id}`, {\n        method: \"DELETE\",\n        credentials: \"include\",\n      });\n      if (!res.ok) throw new Error(\"Failed to delete\");\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}/timesheet`] });\n      toast.success(\"Entry deleted\");\n    },\n    onError: () => {\n      toast.error(\"Failed to delete entry\");\n    },\n  });\n\n  const totalHours = entries.reduce((sum, e) => sum + parseFloat(e.hours.toString()), 0);\n  const uniqueEmployees = new Set(entries.map((e) => e.employee)).size;\n  const totalCost = entries.reduce((sum, e) => sum + parseFloat(e.hours.toString()) * parseFloat(e.hourlyRate.toString()), 0);\n\n  const getEmployeeTotal = (employee: string) => {\n    return entries\n      .filter((e) => e.employee === employee)\n      .reduce((sum, e) => sum + parseFloat(e.hours.toString()), 0);\n  };\n\n  const employees = Array.from(new Set(entries.map((e) => e.employee)));\n\n  return (\n    <Layout>\n      <div className=\"space-y-1 mb-6\">\n        <h1 className=\"text-3xl font-bold tracking-tight\">Team Timesheet</h1>\n        <p className=\"text-muted-foreground\">Track team member hours and labor costs.</p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-4 mb-6\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Total Hours</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">{totalHours.toFixed(1)}h</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">tracked</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Team Members</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">{uniqueEmployees}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">actively logging</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Est. Labor Cost</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold text-primary\">${totalCost.toLocaleString(\"en-US\", { maximumFractionDigits: 2 })}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">total</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Entries</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">{entries.length}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">time entries</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid gap-6 lg:grid-cols-3\">\n        <div className=\"lg:col-span-2 space-y-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold\">Time Entries</h2>\n            <Dialog open={openDialog} onOpenChange={setOpenDialog}>\n              <DialogTrigger asChild>\n                <Button size=\"sm\" data-testid=\"button-log-time\">\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Log Time\n                </Button>\n              </DialogTrigger>\n              <DialogContent data-testid=\"dialog-add-timesheet\">\n                <DialogHeader>\n                  <DialogTitle>Log Time Entry</DialogTitle>\n                </DialogHeader>\n                <div className=\"space-y-4\">\n                  <div>\n                    <Label htmlFor=\"date\">Date</Label>\n                    <Input\n                      id=\"date\"\n                      type=\"date\"\n                      value={formData.date}\n                      onChange={(e) => setFormData({ ...formData, date: e.target.value })}\n                      data-testid=\"input-date\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"employee\">Employee Name</Label>\n                    <Input\n                      id=\"employee\"\n                      value={formData.employee}\n                      onChange={(e) => setFormData({ ...formData, employee: e.target.value })}\n                      placeholder=\"Enter employee name\"\n                      data-testid=\"input-employee\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"task\">Task</Label>\n                    <Input\n                      id=\"task\"\n                      value={formData.task}\n                      onChange={(e) => setFormData({ ...formData, task: e.target.value })}\n                      placeholder=\"Enter task description\"\n                      data-testid=\"input-task\"\n                    />\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <Label htmlFor=\"startTime\">Start Time</Label>\n                      <Input\n                        id=\"startTime\"\n                        type=\"time\"\n                        value={formData.startTime}\n                        onChange={(e) => setFormData({ ...formData, startTime: e.target.value })}\n                        data-testid=\"input-start-time\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"endTime\">End Time</Label>\n                      <Input\n                        id=\"endTime\"\n                        type=\"time\"\n                        value={formData.endTime}\n                        onChange={(e) => setFormData({ ...formData, endTime: e.target.value })}\n                        data-testid=\"input-end-time\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"hourlyRate\">Hourly Rate ($)</Label>\n                    <Input\n                      id=\"hourlyRate\"\n                      type=\"number\"\n                      value={formData.hourlyRate}\n                      onChange={(e) => setFormData({ ...formData, hourlyRate: parseFloat(e.target.value) })}\n                      placeholder=\"50\"\n                      data-testid=\"input-hourly-rate\"\n                    />\n                  </div>\n                  <Button\n                    onClick={() => createMutation.mutate(formData)}\n                    disabled={createMutation.isPending || !formData.employee || !formData.task}\n                    className=\"w-full\"\n                    data-testid=\"button-add-entry\"\n                  >\n                    {createMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                    Add Entry\n                  </Button>\n                </div>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          {isLoading ? (\n            <div className=\"flex justify-center py-8\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n            </div>\n          ) : entries.length === 0 ? (\n            <Card>\n              <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                <Clock className=\"w-12 h-12 text-muted-foreground/50 mb-3\" />\n                <p className=\"text-muted-foreground\">No time entries yet</p>\n                <p className=\"text-sm text-muted-foreground\">Click \"Log Time\" to add your first entry</p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"rounded-md border bg-card\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Date</TableHead>\n                    <TableHead>Employee</TableHead>\n                    <TableHead>Task</TableHead>\n                    <TableHead>Start</TableHead>\n                    <TableHead>End</TableHead>\n                    <TableHead className=\"text-right\">Hours</TableHead>\n                    <TableHead className=\"text-right\">Cost</TableHead>\n                    <TableHead className=\"text-right\">Actions</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {entries.map((entry) => (\n                    <TableRow key={entry.id} className=\"hover:bg-muted/50\" data-testid={`row-timesheet-${entry.id}`}>\n                      <TableCell className=\"text-sm\">{entry.date}</TableCell>\n                      <TableCell className=\"font-medium\">{entry.employee}</TableCell>\n                      <TableCell className=\"text-sm text-muted-foreground\">{entry.task}</TableCell>\n                      <TableCell className=\"text-sm\">{entry.startTime}</TableCell>\n                      <TableCell className=\"text-sm\">{entry.endTime}</TableCell>\n                      <TableCell className=\"text-right font-medium\">{parseFloat(entry.hours.toString()).toFixed(2)}h</TableCell>\n                      <TableCell className=\"text-right font-medium\">\n                        ${(parseFloat(entry.hours.toString()) * parseFloat(entry.hourlyRate.toString())).toFixed(2)}\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => deleteMutation.mutate(entry.id)}\n                          disabled={deleteMutation.isPending}\n                          className=\"text-destructive hover:bg-destructive/10\"\n                          data-testid={`button-delete-timesheet-${entry.id}`}\n                        >\n                          {deleteMutation.isPending ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Trash2 className=\"h-4 w-4\" />}\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </div>\n\n        <div className=\"space-y-4\">\n          <h2 className=\"text-lg font-semibold\">Employee Summary</h2>\n          {employees.length === 0 ? (\n            <Card>\n              <CardContent className=\"pt-4\">\n                <p className=\"text-sm text-muted-foreground\">No employees yet</p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"space-y-3\">\n              {employees.map((emp) => {\n                const empTotal = getEmployeeTotal(emp);\n                const empCost = entries\n                  .filter((e) => e.employee === emp)\n                  .reduce((sum, e) => sum + parseFloat(e.hours.toString()) * parseFloat(e.hourlyRate.toString()), 0);\n                const maxHours = Math.max(...employees.map(getEmployeeTotal), 1);\n                return (\n                  <Card key={emp} data-testid={`card-employee-${emp}`}>\n                    <CardContent className=\"pt-4\">\n                      <div className=\"space-y-2\">\n                        <p className=\"font-medium text-sm\">{emp}</p>\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Hours:</span>\n                          <span className=\"font-medium\">{empTotal.toFixed(1)}h</span>\n                        </div>\n                        <div className=\"flex justify-between text-sm mb-2\">\n                          <span className=\"text-muted-foreground\">Est. Cost:</span>\n                          <span className=\"font-medium text-primary\">${empCost.toFixed(2)}</span>\n                        </div>\n                        <div className=\"h-2 bg-secondary rounded-full overflow-hidden\">\n                          <div className=\"h-full bg-primary\" style={{ width: `${(empTotal / maxHours) * 100}%` }} />\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":15147,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1267,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter((item) => item.type !== \"none\")\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n              const itemConfig = getPayloadConfigFromPayload(config, item, key)\n              const indicatorColor = color || item.payload.fill || item.color\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                    indicator === \"dot\" && \"items-center\"\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                              {\n                                \"h-2.5 w-2.5\": indicator === \"dot\",\n                                \"w-1\": indicator === \"line\",\n                                \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                  indicator === \"dashed\",\n                                \"my-0.5\": nestLabel && indicator === \"dashed\",\n                              }\n                            )}\n                            style={\n                              {\n                                \"--color-bg\": indicatorColor,\n                                \"--color-border\": indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          \"flex flex-1 justify-between leading-none\",\n                          nestLabel ? \"items-end\" : \"items-center\"\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              )\n            })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload\n          .filter((item) => item.type !== \"none\")\n          .map((item) => {\n            const key = `${nameKey || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n            return (\n              <div\n                key={item.value}\n                className={cn(\n                  \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n                )}\n              >\n                {itemConfig?.icon && !hideIcon ? (\n                  <itemConfig.icon />\n                ) : (\n                  <div\n                    className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                  />\n                )}\n                {itemConfig?.label}\n              </div>\n            )\n          })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10763,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1037,"size_tokens":null},"client/src/pages/properties.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Plus, Filter, Search, Home } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nexport default function Properties() {\n  const { data: properties = [], isLoading } = useQuery({\n    queryKey: [\"properties\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/properties\");\n      if (!res.ok) throw new Error(\"Failed to fetch properties\");\n      return res.json();\n    }\n  });\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"text-center py-12\">Loading properties...</div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n        <div className=\"space-y-1\">\n          <h1 className=\"text-3xl font-bold tracking-tight\">Properties</h1>\n          <p className=\"text-muted-foreground\">Browse and manage all properties in your portfolio.</p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative hidden md:block\">\n            <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n            <Input placeholder=\"Search...\" className=\"w-[200px] pl-9\" />\n          </div>\n          <Button variant=\"outline\" size=\"sm\">\n            <Filter className=\"mr-2 h-4 w-4\" /> Filter\n          </Button>\n          <Button size=\"sm\">\n            <Plus className=\"mr-2 h-4 w-4\" /> Add Property\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n        {properties.map((prop: any) => (\n          <Card key={prop.id} className=\"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer\">\n            <div className=\"relative h-40 bg-muted overflow-hidden\">\n              <div className=\"h-full w-full flex items-center justify-center bg-secondary\">\n                <Home className=\"h-8 w-8 text-muted-foreground\" />\n              </div>\n              <div className=\"absolute top-2 right-2\">\n                <Badge className={prop.status === \"active\" ? \"bg-green-600 text-white\" : \"bg-primary text-primary-foreground\"}>\n                  {prop.status || \"Active\"}\n                </Badge>\n              </div>\n            </div>\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-lg line-clamp-1\">{prop.address}</CardTitle>\n              <p className=\"text-sm text-muted-foreground\">{prop.city}, {prop.state}</p>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"text-2xl font-bold text-primary\">${prop.price ? parseInt(prop.price).toLocaleString() : \"—\"}</div>\n              <div className=\"grid grid-cols-3 gap-2 text-sm\">\n                <div>\n                  <p className=\"text-muted-foreground\">Beds</p>\n                  <p className=\"font-medium\">{prop.beds || \"—\"}</p>\n                </div>\n                <div>\n                  <p className=\"text-muted-foreground\">Baths</p>\n                  <p className=\"font-medium\">{prop.baths || \"—\"}</p>\n                </div>\n                <div>\n                  <p className=\"text-muted-foreground\">SqFt</p>\n                  <p className=\"font-medium\">{prop.sqft ? prop.sqft.toLocaleString() : \"—\"}</p>\n                </div>\n              </div>\n              <Button className=\"w-full bg-primary hover:bg-primary/90 text-white\">View Details</Button>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n      {properties.length === 0 && (\n        <div className=\"text-center py-12 text-muted-foreground\">No properties yet.</div>\n      )}\n    </Layout>\n  );\n}\n","path":null,"size_bytes":3884,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8608,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":792,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2143,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","path":null,"size_bytes":1342,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/pages/property-detail.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { \n  ArrowLeft, \n  MapPin, \n  Phone, \n  Mail, \n  Calendar, \n  CheckCircle2, \n  XCircle, \n  MessageSquare,\n  FileText,\n  Calculator\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport propertyImage from \"@assets/generated_images/modern_suburban_house_exterior_for_real_estate_placeholder.png\";\nimport interiorImage from \"@assets/generated_images/interior_of_a_modern_living_room_for_real_estate_placeholder.png\";\n\nexport default function PropertyDetail() {\n  return (\n    <Layout>\n      <div className=\"flex flex-col gap-6\">\n        {/* Header */}\n        <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-1\">\n              <Link href=\"/leads\" className=\"hover:text-foreground flex items-center gap-1 transition-colors\">\n                <ArrowLeft className=\"h-3 w-3\" /> Back to Leads\n              </Link>\n              <span>/</span>\n              <span>L-1024</span>\n            </div>\n            <h1 className=\"text-3xl font-bold tracking-tight flex items-center gap-3\">\n              456 Oak Avenue\n              <Badge variant=\"default\" className=\"bg-accent text-accent-foreground hover:bg-accent/80\">Negotiation</Badge>\n            </h1>\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\n              <MapPin className=\"h-4 w-4\" />\n              Tampa, FL 33602\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button variant=\"outline\">\n              <Calculator className=\"mr-2 h-4 w-4\" />\n              Run Comps\n            </Button>\n            <Button variant=\"outline\">\n              <FileText className=\"mr-2 h-4 w-4\" />\n              Generate Offer\n            </Button>\n            <Button>\n              <Phone className=\"mr-2 h-4 w-4\" />\n              Call Owner\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Left Column - Property Info & Photos */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* Photos */}\n            <div className=\"grid grid-cols-2 gap-4 h-64 md:h-80\">\n              <div className=\"relative h-full rounded-lg overflow-hidden group\">\n                <img \n                  src={propertyImage} \n                  alt=\"Exterior\" \n                  className=\"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105\"\n                />\n                <div className=\"absolute bottom-2 left-2 bg-black/50 text-white px-2 py-1 text-xs rounded backdrop-blur-sm\">\n                  Front Exterior\n                </div>\n              </div>\n              <div className=\"relative h-full rounded-lg overflow-hidden group\">\n                <img \n                  src={interiorImage} \n                  alt=\"Interior\" \n                  className=\"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105\"\n                />\n                <div className=\"absolute bottom-2 left-2 bg-black/50 text-white px-2 py-1 text-xs rounded backdrop-blur-sm\">\n                  Living Room\n                </div>\n              </div>\n            </div>\n\n            {/* Tabs for Details */}\n            <Tabs defaultValue=\"details\" className=\"w-full\">\n              <TabsList className=\"w-full justify-start border-b rounded-none bg-transparent p-0 h-auto\">\n                <TabsTrigger \n                  value=\"details\" \n                  className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\"\n                >\n                  Property Details\n                </TabsTrigger>\n                <TabsTrigger \n                  value=\"financials\" \n                  className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\"\n                >\n                  Financial Analysis\n                </TabsTrigger>\n                <TabsTrigger \n                  value=\"activity\" \n                  className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\"\n                >\n                  Activity Log\n                </TabsTrigger>\n              </TabsList>\n              \n              <TabsContent value=\"details\" className=\"mt-6 space-y-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-lg\">Property Facts</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    <div className=\"space-y-1\">\n                      <p className=\"text-xs text-muted-foreground\">Bedrooms</p>\n                      <p className=\"font-medium text-lg\">3</p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <p className=\"text-xs text-muted-foreground\">Bathrooms</p>\n                      <p className=\"font-medium text-lg\">2</p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <p className=\"text-xs text-muted-foreground\">Square Feet</p>\n                      <p className=\"font-medium text-lg\">1,850</p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <p className=\"text-xs text-muted-foreground\">Year Built</p>\n                      <p className=\"font-medium text-lg\">1998</p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <p className=\"text-xs text-muted-foreground\">Lot Size</p>\n                      <p className=\"font-medium text-lg\">0.25 ac</p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <p className=\"text-xs text-muted-foreground\">Occupancy</p>\n                      <p className=\"font-medium text-lg\">Vacant</p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <p className=\"text-xs text-muted-foreground\">Zoning</p>\n                      <p className=\"font-medium text-lg\">R-2</p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <p className=\"text-xs text-muted-foreground\">APN</p>\n                      <p className=\"font-medium text-lg\">12-34-56-789</p>\n                    </div>\n                  </CardContent>\n                </Card>\n                \n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-lg\">Owner Information</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold\">\n                          JS\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">Jane Smith</p>\n                          <p className=\"text-xs text-muted-foreground\">Primary Owner</p>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button variant=\"ghost\" size=\"sm\"><Phone className=\"h-4 w-4\" /></Button>\n                        <Button variant=\"ghost\" size=\"sm\"><Mail className=\"h-4 w-4\" /></Button>\n                      </div>\n                    </div>\n                    <Separator />\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                      <div>\n                        <p className=\"text-muted-foreground\">Phone</p>\n                        <p className=\"font-medium\">(813) 555-0123</p>\n                      </div>\n                      <div>\n                        <p className=\"text-muted-foreground\">Email</p>\n                        <p className=\"font-medium\">jane.smith@email.com</p>\n                      </div>\n                      <div>\n                        <p className=\"text-muted-foreground\">Mailing Address</p>\n                        <p className=\"font-medium\">Same as property</p>\n                      </div>\n                      <div>\n                        <p className=\"text-muted-foreground\">Motivation</p>\n                        <p className=\"font-medium\">Relocating for work</p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </TabsContent>\n              \n              <TabsContent value=\"financials\">\n                <Card>\n                  <CardContent className=\"pt-6\">\n                    <p className=\"text-muted-foreground text-center py-8\">Financial analysis module would go here.</p>\n                  </CardContent>\n                </Card>\n              </TabsContent>\n              \n              <TabsContent value=\"activity\">\n                <Card>\n                  <CardContent className=\"pt-6\">\n                    <p className=\"text-muted-foreground text-center py-8\">Activity log module would go here.</p>\n                  </CardContent>\n                </Card>\n              </TabsContent>\n            </Tabs>\n          </div>\n\n          {/* Right Column - RELAS Score & Actions */}\n          <div className=\"space-y-6\">\n            <Card className=\"border-accent/50 bg-accent/5\">\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"flex items-center justify-between\">\n                  <span>RELAS Score</span>\n                  <Badge className=\"bg-accent hover:bg-accent/90 text-xl px-3 py-1\">92</Badge>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  This lead shows <strong className=\"text-accent-foreground\">High Motivation</strong> based on 4 key factors.\n                </p>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"flex items-center gap-2\"><CheckCircle2 className=\"h-4 w-4 text-accent\" /> Vacant Property</span>\n                    <span className=\"font-medium\">+25</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"flex items-center gap-2\"><CheckCircle2 className=\"h-4 w-4 text-accent\" /> Out of State Owner</span>\n                    <span className=\"font-medium\">+20</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"flex items-center gap-2\"><CheckCircle2 className=\"h-4 w-4 text-accent\" /> Tax Delinquent</span>\n                    <span className=\"font-medium\">+30</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"flex items-center gap-2\"><CheckCircle2 className=\"h-4 w-4 text-accent\" /> Quick Sale Requested</span>\n                    <span className=\"font-medium\">+17</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">Deal Status</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Current Stage</span>\n                    <span className=\"font-medium\">Negotiation</span>\n                  </div>\n                  <div className=\"h-2 bg-secondary rounded-full overflow-hidden\">\n                    <div className=\"h-full bg-primary w-[60%]\"></div>\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">Started 4 days ago</p>\n                </div>\n                \n                <Separator />\n                \n                <div className=\"space-y-2\">\n                  <h4 className=\"text-sm font-medium\">Next Steps</h4>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-start gap-2 text-sm\">\n                      <div className=\"h-4 w-4 rounded-full border border-muted-foreground mt-0.5\"></div>\n                      <span>Confirm repair estimates</span>\n                    </div>\n                    <div className=\"flex items-start gap-2 text-sm\">\n                      <div className=\"h-4 w-4 rounded-full border border-muted-foreground mt-0.5\"></div>\n                      <span>Send final offer letter</span>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">Notes</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"bg-muted/50 p-3 rounded-md text-sm text-muted-foreground italic mb-3\">\n                  \"Owner is motivated to sell before end of month. Roof needs work.\"\n                </div>\n                <div className=\"relative\">\n                  <textarea \n                    className=\"w-full min-h-[80px] rounded-md border bg-background p-2 text-sm focus:outline-none focus:ring-1 focus:ring-primary\"\n                    placeholder=\"Add a note...\"\n                  ></textarea>\n                  <Button size=\"sm\" className=\"absolute bottom-2 right-2 h-7 px-2\">\n                    Add\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":14378,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1410,"size_tokens":null},"client/src/components/layout/Layout.tsx":{"content":"import { Sidebar } from \"./Sidebar\";\nimport { Header } from \"./Header\";\nimport { SidebarProvider, useSidebar } from \"@/contexts/SidebarContext\";\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nfunction LayoutContent({ children }: LayoutProps) {\n  const { isHidden, isExpanded, setState } = useSidebar();\n\n  return (\n    <div className=\"flex h-screen w-full overflow-hidden bg-background\">\n      <Sidebar />\n      \n      {isExpanded && (\n        <div \n          className=\"fixed inset-0 bg-black/50 md:hidden z-30 transition-opacity duration-300\"\n          onClick={() => setState(\"hidden\")}\n          data-testid=\"sidebar-overlay\"\n        />\n      )}\n      \n      <div className=\"flex flex-1 flex-col overflow-hidden w-full\">\n        <Header />\n        <main className=\"flex-1 scroll-y-container bg-muted/20 p-4 md:p-6\">\n          <div className=\"mx-auto max-w-7xl space-y-6 md:space-y-8\">\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport function Layout({ children }: LayoutProps) {\n  return (\n    <SidebarProvider>\n      <LayoutContent>{children}</LayoutContent>\n    </SidebarProvider>\n  );\n}\n","path":null,"size_bytes":1150,"size_tokens":null},"client/src/pages/analytics.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BarChart, Bar, LineChart, Line, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useMemo } from \"react\";\n\nconst COLORS = [\"#0a0a0a\", \"#dc2626\", \"#7f1d1d\", \"#fca5a5\", \"#fee2e2\"];\n\nexport default function Analytics() {\n  // Fetch real data\n  const { data: leads = [], isLoading: leadsLoading } = useQuery<any[]>({\n    queryKey: ['/api/leads'],\n  });\n\n  const { data: contracts = [], isLoading: contractsLoading } = useQuery<any[]>({\n    queryKey: ['/api/contracts'],\n  });\n\n  const isLoading = leadsLoading || contractsLoading;\n\n  // Calculate YTD metrics\n  const ytdMetrics = useMemo(() => {\n    const closedContracts = contracts.filter(c => c.status === 'signed' || c.status === 'closed');\n    const totalRevenue = closedContracts.reduce((sum, c) => sum + (parseFloat(c.amount) || 0), 0);\n    const avgDealSize = closedContracts.length > 0 ? totalRevenue / closedContracts.length : 0;\n    const conversionRate = leads.length > 0 ? (closedContracts.length / leads.length) * 100 : 0;\n\n    return {\n      revenue: totalRevenue,\n      closedDeals: closedContracts.length,\n      avgDealSize,\n      conversionRate\n    };\n  }, [leads, contracts]);\n\n  // Monthly performance data\n  const monthlyData = useMemo(() => {\n    if (contracts.length === 0) return [];\n\n    const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    const dealsByMonth: { [key: string]: { deals: number, revenue: number } } = {};\n\n    contracts.forEach(contract => {\n      if (contract.createdAt) {\n        const date = new Date(contract.createdAt);\n        const monthName = monthNames[date.getMonth()];\n        \n        if (!dealsByMonth[monthName]) {\n          dealsByMonth[monthName] = { deals: 0, revenue: 0 };\n        }\n        dealsByMonth[monthName].deals += 1;\n        if (contract.status === 'signed' || contract.status === 'closed') {\n          dealsByMonth[monthName].revenue += parseFloat(contract.amount) || 0;\n        }\n      }\n    });\n\n    // Get last 6 months\n    const result = [];\n    const now = new Date();\n    for (let i = 5; i >= 0; i--) {\n      const monthDate = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      const monthName = monthNames[monthDate.getMonth()];\n      result.push({\n        month: monthName,\n        deals: dealsByMonth[monthName]?.deals || 0,\n        revenue: dealsByMonth[monthName]?.revenue || 0\n      });\n    }\n\n    return result;\n  }, [contracts]);\n\n  // Lead source distribution\n  const leadSourceData = useMemo(() => {\n    if (leads.length === 0) return [];\n\n    const sources: { [key: string]: number } = {};\n    leads.forEach(lead => {\n      const source = lead.source || \"Unknown\";\n      sources[source] = (sources[source] || 0) + 1;\n    });\n\n    const total = leads.length;\n    return Object.entries(sources).map(([name, count]) => ({\n      name,\n      value: parseFloat(((count / total) * 100).toFixed(1))\n    }));\n  }, [leads]);\n\n  // Conversion funnel data\n  const conversionFunnelData = useMemo(() => {\n    const statusCounts = {\n      \"New Leads\": leads.filter(l => l.status === 'new').length,\n      \"Contacted\": leads.filter(l => l.status === 'contacted').length,\n      \"Qualified\": leads.filter(l => l.status === 'qualified').length,\n      \"Negotiating\": contracts.filter(c => c.status === 'negotiating' || c.status === 'pending').length,\n      \"Closed\": contracts.filter(c => c.status === 'signed' || c.status === 'closed').length,\n    };\n\n    return Object.entries(statusCounts).map(([stage, count]) => ({\n      stage,\n      count\n    }));\n  }, [leads, contracts]);\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"space-y-1 mb-6\">\n          <h1 className=\"text-3xl font-bold tracking-tight\" data-testid=\"page-title\">Analytics</h1>\n          <p className=\"text-muted-foreground\">Key metrics and performance insights for your wholesaling business.</p>\n        </div>\n        <div className=\"grid gap-4 md:grid-cols-4 mb-6\">\n          {[1, 2, 3, 4].map(i => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader className=\"pb-2\">\n                <div className=\"h-4 w-24 bg-muted rounded\"></div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-8 w-32 bg-muted rounded\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"space-y-1 mb-6\">\n        <h1 className=\"text-3xl font-bold tracking-tight\" data-testid=\"page-title\">Analytics</h1>\n        <p className=\"text-muted-foreground\">Key metrics and performance insights for your wholesaling business.</p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-4 mb-6\">\n        <Card data-testid=\"metric-revenue\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">YTD Revenue</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold text-primary\" data-testid=\"value-revenue\">\n              ${(ytdMetrics.revenue / 1000).toFixed(1)}K\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">From closed deals</p>\n          </CardContent>\n        </Card>\n        <Card data-testid=\"metric-deals\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Deals Closed</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"value-deals\">{ytdMetrics.closedDeals}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">This year</p>\n          </CardContent>\n        </Card>\n        <Card data-testid=\"metric-avg-deal\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Avg Deal Size</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"value-avg-deal\">\n              ${ytdMetrics.avgDealSize > 0 ? (ytdMetrics.avgDealSize / 1000).toFixed(0) + 'K' : '0'}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Per transaction</p>\n          </CardContent>\n        </Card>\n        <Card data-testid=\"metric-conversion\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm text-muted-foreground\">Conv. Rate</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"value-conversion\">\n              {ytdMetrics.conversionRate.toFixed(1)}%\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Lead to close</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Monthly Performance</CardTitle>\n          </CardHeader>\n          <CardContent className=\"pl-2\">\n            {monthlyData.length === 0 ? (\n              <div className=\"h-[300px] flex items-center justify-center text-muted-foreground\">\n                <p>No contract data available</p>\n              </div>\n            ) : (\n              <div className=\"h-[300px]\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <BarChart data={monthlyData}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"hsl(var(--border))\" />\n                    <XAxis dataKey=\"month\" stroke=\"hsl(var(--muted-foreground))\" />\n                    <YAxis stroke=\"hsl(var(--muted-foreground))\" />\n                    <Tooltip \n                      contentStyle={{ backgroundColor: 'hsl(var(--card))', border: '1px solid hsl(var(--border))' }}\n                      formatter={(value: any, name: string) => {\n                        if (name === 'revenue') return [`$${value.toLocaleString()}`, 'Revenue'];\n                        return [value, 'Deals'];\n                      }}\n                    />\n                    <Legend />\n                    <Bar dataKey=\"deals\" fill=\"hsl(var(--primary))\" name=\"Deals\" />\n                  </BarChart>\n                </ResponsiveContainer>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Lead Source Distribution</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {leadSourceData.length === 0 ? (\n              <div className=\"h-[300px] flex items-center justify-center text-muted-foreground\">\n                <p>No lead source data available</p>\n              </div>\n            ) : (\n              <div className=\"h-[300px]\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <PieChart>\n                    <Pie \n                      data={leadSourceData} \n                      cx=\"50%\" \n                      cy=\"50%\" \n                      labelLine={false} \n                      label={({ name, value }) => `${name} ${value}%`} \n                      outerRadius={80} \n                      fill=\"#000\" \n                      dataKey=\"value\"\n                    >\n                      {leadSourceData.map((entry, index) => (\n                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                      ))}\n                    </Pie>\n                    <Tooltip formatter={(value) => `${value}%`} />\n                  </PieChart>\n                </ResponsiveContainer>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card className=\"md:col-span-2\">\n          <CardHeader>\n            <CardTitle>Conversion Funnel</CardTitle>\n          </CardHeader>\n          <CardContent className=\"pl-2\">\n            {conversionFunnelData.every(d => d.count === 0) ? (\n              <div className=\"h-[300px] flex items-center justify-center text-muted-foreground\">\n                <p>No pipeline data available</p>\n              </div>\n            ) : (\n              <div className=\"h-[300px]\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <BarChart data={conversionFunnelData} layout=\"vertical\">\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"hsl(var(--border))\" />\n                    <XAxis type=\"number\" stroke=\"hsl(var(--muted-foreground))\" />\n                    <YAxis dataKey=\"stage\" type=\"category\" stroke=\"hsl(var(--muted-foreground))\" width={100} />\n                    <Tooltip contentStyle={{ backgroundColor: 'hsl(var(--card))', border: '1px solid hsl(var(--border))' }} />\n                    <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" />\n                  </BarChart>\n                </ResponsiveContainer>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":11070,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7606,"size_tokens":null},"client/src/components/layout/Sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { \n  LayoutDashboard, \n  Users, \n  Building2, \n  FileText, \n  Settings, \n  PieChart, \n  LogOut,\n  Calculator,\n  Clock,\n  Bell,\n  ChevronLeft,\n  ChevronRight,\n  ChevronsLeft\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useSidebar } from \"@/contexts/SidebarContext\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\n\nconst navigation = [\n  { name: \"Dashboard\", href: \"/\", icon: LayoutDashboard },\n  { name: \"Leads Pipeline\", href: \"/leads\", icon: Users },\n  { name: \"Properties\", href: \"/properties\", icon: Building2 },\n  { name: \"Contracts\", href: \"/contracts\", icon: FileText },\n  { name: \"Analytics\", href: \"/analytics\", icon: PieChart },\n  { name: \"Calculator\", href: \"/calculator\", icon: Calculator },\n  { name: \"Timesheet\", href: \"/timesheet\", icon: Clock },\n  { name: \"Notifications\", href: \"/notifications\", icon: Bell },\n  { name: \"Settings\", href: \"/settings\", icon: Settings },\n];\n\nexport function Sidebar() {\n  const [location, setLocation] = useLocation();\n  const { user, logout } = useAuth();\n  const { state, cycleState, isExpanded, isIconOnly, isHidden } = useSidebar();\n\n  const { data: userData } = useQuery<any>({\n    queryKey: [`/api/users/${user?.id}`],\n    enabled: !!user?.id,\n  });\n\n  const { data: goals = [] } = useQuery<any[]>({\n    queryKey: [`/api/users/${user?.id}/goals`],\n    enabled: !!user?.id,\n  });\n\n  const activeGoal = goals.length > 0 ? goals[0] : null;\n  const goalProgress = activeGoal && activeGoal.targetValue > 0\n    ? Math.min(100, (activeGoal.currentValue / activeGoal.targetValue) * 100)\n    : 0;\n\n  const showIconsOnly = isIconOnly;\n  const showLabels = isExpanded;\n  \n  const profileImage = userData?.profilePicture || userData?.avatarUrl;\n\n  return (\n    <TooltipProvider delayDuration={0}>\n      <div \n        className={cn(\n          \"flex h-full flex-col bg-sidebar text-sidebar-foreground border-r border-sidebar-border shadow-xl z-40 transition-all duration-300 ease-in-out\",\n          isExpanded && \"w-64\",\n          isIconOnly && \"w-20\",\n          isHidden && \"w-0 border-r-0 overflow-hidden\"\n        )}\n        aria-hidden={isHidden}\n      >\n        <div className={cn(\n          \"flex h-16 items-center border-b border-sidebar-border bg-sidebar-accent/10 transition-all duration-300\",\n          isExpanded && \"px-6\",\n          isIconOnly && \"justify-center px-2\",\n          isHidden && \"opacity-0\"\n        )}>\n          <div className=\"flex items-center gap-3\">\n            <img \n              src=\"/flipstackk-logo.jpg\" \n              alt=\"FlipStackk Logo\" \n              className={cn(\n                \"object-contain transition-all duration-300\",\n                isIconOnly ? \"h-10 w-10\" : \"h-12 w-auto\"\n              )}\n            />\n          </div>\n        </div>\n\n        {!isHidden && (\n          <button\n            onClick={cycleState}\n            className=\"absolute -right-3 top-20 z-50 flex h-6 w-6 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-md hover:bg-primary/90 transition-colors\"\n            data-testid=\"button-toggle-sidebar\"\n          >\n            {isExpanded && <ChevronLeft className=\"h-4 w-4\" />}\n            {isIconOnly && <ChevronsLeft className=\"h-4 w-4\" />}\n          </button>\n        )}\n        \n        <div className={cn(\n          \"flex-1 scroll-y-container py-6 transition-all duration-300\",\n          isHidden && \"opacity-0\"\n        )}>\n          <nav className={cn(\"space-y-1.5\", showIconsOnly ? \"px-2\" : \"px-3\")}>\n            {navigation.map((item) => {\n              const isActive = location === item.href || (item.href !== '/' && location.startsWith(item.href));\n              \n              const navItem = (\n                <Link key={item.name} href={item.href}>\n                  <div\n                    className={cn(\n                      \"group relative flex items-center rounded-md text-sm font-medium transition-all duration-200 ease-in-out cursor-pointer\",\n                      showIconsOnly ? \"justify-center px-2 py-2.5\" : \"px-3 py-2.5\",\n                      isActive\n                        ? \"bg-primary text-primary-foreground shadow-md shadow-primary/20\"\n                        : \"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-white\"\n                    )}\n                  >\n                    <item.icon\n                      className={cn(\n                        \"h-5 w-5 flex-shrink-0 transition-colors\",\n                        showLabels && \"mr-3\",\n                        isActive ? \"text-primary-foreground\" : \"text-sidebar-foreground/50 group-hover:text-white\"\n                      )}\n                    />\n                    {showLabels && (\n                      <span className=\"transition-opacity duration-200\">{item.name}</span>\n                    )}\n                    \n                    {isActive && showLabels && (\n                      <div className=\"absolute right-2 h-1.5 w-1.5 rounded-full bg-white/30\" />\n                    )}\n                  </div>\n                </Link>\n              );\n\n              if (showIconsOnly) {\n                return (\n                  <Tooltip key={item.name}>\n                    <TooltipTrigger asChild>\n                      {navItem}\n                    </TooltipTrigger>\n                    <TooltipContent side=\"right\" className=\"bg-sidebar text-white border-sidebar-border\">\n                      {item.name}\n                    </TooltipContent>\n                  </Tooltip>\n                );\n              }\n\n              return navItem;\n            })}\n          </nav>\n        </div>\n\n        <div className={cn(\n          \"mt-auto border-t border-sidebar-border bg-sidebar-accent/5 transition-all duration-300\",\n          showIconsOnly ? \"p-2\" : \"p-4\",\n          isHidden && \"opacity-0\"\n        )}>\n          {user && showLabels && (\n            <div className=\"bg-sidebar-accent/50 rounded-lg p-3 mb-3\">\n              <p className=\"text-xs font-medium text-sidebar-foreground/60 uppercase tracking-wider mb-1\">\n                Logged in as\n              </p>\n              <p className=\"text-sm font-bold text-white truncate\">\n                {user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : user.email}\n              </p>\n              {user.isSuperAdmin && (\n                <span className=\"inline-block mt-1 text-xs px-2 py-0.5 bg-primary/20 text-primary rounded\">\n                  Super Admin\n                </span>\n              )}\n            </div>\n          )}\n\n          {user && showIconsOnly && (\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <div className=\"flex justify-center mb-3\">\n                  <div className=\"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center overflow-hidden\">\n                    {profileImage ? (\n                      <img src={profileImage} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n                    ) : (\n                      <span className=\"text-sm font-bold text-primary\">\n                        {userData?.firstName?.[0] || user.email[0].toUpperCase()}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </TooltipTrigger>\n              <TooltipContent side=\"right\" className=\"bg-sidebar text-white border-sidebar-border\">\n                {userData?.firstName && userData?.lastName ? `${userData.firstName} ${userData.lastName}` : user.email}\n                {user.isSuperAdmin && \" (Super Admin)\"}\n              </TooltipContent>\n            </Tooltip>\n          )}\n          \n          {showLabels && (\n            <div \n              className=\"bg-sidebar-accent/50 rounded-lg p-3 mb-4 cursor-pointer hover:bg-sidebar-accent/70 transition-colors\"\n              onClick={() => setLocation('/settings')}\n            >\n              <p className=\"text-xs font-medium text-sidebar-foreground/60 uppercase tracking-wider mb-1\">Current Goal</p>\n              {activeGoal ? (\n                <>\n                  <div className=\"flex justify-between items-end mb-1\">\n                    <span className=\"text-sm font-bold text-white\">\n                      {activeGoal.currentValue}/{activeGoal.targetValue} {activeGoal.unit}\n                    </span>\n                    <span className=\"text-xs text-accent\">{goalProgress.toFixed(0)}%</span>\n                  </div>\n                  <div className=\"h-1.5 w-full bg-sidebar-border rounded-full overflow-hidden\">\n                    <div \n                      className=\"h-full bg-accent rounded-full transition-all\" \n                      style={{ width: `${Math.min(goalProgress, 100)}%` }}\n                    />\n                  </div>\n                  <p className=\"text-xs text-sidebar-foreground/50 mt-1 truncate\">{activeGoal.title}</p>\n                </>\n              ) : (\n                <div className=\"text-xs text-sidebar-foreground/50\">\n                  No active goals. Click to create one!\n                </div>\n              )}\n            </div>\n          )}\n\n          {showIconsOnly && activeGoal && (\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <div \n                  className=\"flex justify-center mb-3 cursor-pointer\"\n                  onClick={() => setLocation('/settings')}\n                >\n                  <div className=\"relative h-10 w-10\">\n                    <svg className=\"h-10 w-10 -rotate-90\" viewBox=\"0 0 36 36\">\n                      <circle\n                        cx=\"18\"\n                        cy=\"18\"\n                        r=\"15\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"3\"\n                        className=\"text-sidebar-border\"\n                      />\n                      <circle\n                        cx=\"18\"\n                        cy=\"18\"\n                        r=\"15\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"3\"\n                        strokeDasharray={`${goalProgress} 100`}\n                        className=\"text-accent\"\n                      />\n                    </svg>\n                    <span className=\"absolute inset-0 flex items-center justify-center text-xs font-bold text-white\">\n                      {goalProgress.toFixed(0)}%\n                    </span>\n                  </div>\n                </div>\n              </TooltipTrigger>\n              <TooltipContent side=\"right\" className=\"bg-sidebar text-white border-sidebar-border\">\n                <p className=\"font-medium\">{activeGoal.title}</p>\n                <p className=\"text-xs text-sidebar-foreground/70\">\n                  {activeGoal.currentValue}/{activeGoal.targetValue} {activeGoal.unit}\n                </p>\n              </TooltipContent>\n            </Tooltip>\n          )}\n\n          {showIconsOnly ? (\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <button \n                  onClick={logout}\n                  className=\"flex w-full items-center justify-center rounded-md p-2 text-sidebar-foreground/70 hover:bg-destructive/10 hover:text-destructive transition-colors\"\n                  data-testid=\"button-logout\"\n                >\n                  <LogOut className=\"h-5 w-5\" />\n                </button>\n              </TooltipTrigger>\n              <TooltipContent side=\"right\" className=\"bg-sidebar text-white border-sidebar-border\">\n                Sign Out\n              </TooltipContent>\n            </Tooltip>\n          ) : showLabels ? (\n            <button \n              onClick={logout}\n              className=\"flex w-full items-center gap-3 rounded-md px-3 py-2 text-sm font-medium text-sidebar-foreground/70 hover:bg-destructive/10 hover:text-destructive transition-colors\"\n              data-testid=\"button-logout\"\n            >\n              <LogOut className=\"h-5 w-5\" />\n              Sign Out\n            </button>\n          ) : null}\n        </div>\n      </div>\n    </TooltipProvider>\n  );\n}\n","path":null,"size_bytes":12232,"size_tokens":null},"server/app.ts":{"content":"import { type Server } from \"node:http\";\n\nimport express, { type Express, type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport connectPgSimple from \"connect-pg-simple\";\nimport { db } from \"./db\";\nimport { registerRoutes } from \"./routes\";\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport const app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\n\ndeclare module 'express-session' {\n  interface SessionData {\n    userId?: number;\n    email?: string;\n  }\n}\n\n// Require SESSION_SECRET in production\nif (process.env.NODE_ENV === 'production' && !process.env.SESSION_SECRET) {\n  throw new Error('SESSION_SECRET environment variable is required in production');\n}\n\nconst sessionSecret = process.env.SESSION_SECRET || \n  (process.env.NODE_ENV === 'development' ? 'flipstackk-development-secret-DO-NOT-USE-IN-PRODUCTION' : '');\n\nif (!sessionSecret) {\n  throw new Error('SESSION_SECRET must be set');\n}\n\n// Use PostgreSQL-backed session store for production-ready persistence\nconst PgSession = connectPgSimple(session);\n\napp.use(session({\n  store: new PgSession({\n    conObject: {\n      connectionString: process.env.DATABASE_URL,\n    },\n    tableName: 'session',\n    createTableIfMissing: true,\n  }),\n  secret: sessionSecret,\n  resave: false,\n  saveUninitialized: false,\n  cookie: {\n    secure: process.env.NODE_ENV === 'production',\n    httpOnly: true,\n    maxAge: 1000 * 60 * 60 * 24 * 7, // 7 days\n    sameSite: 'lax',\n  }\n}));\n\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\nexport default async function runApp(\n  setup: (app: Express, server: Server) => Promise<void>,\n) {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly run the final setup after setting up all the other routes so\n  // the catch-all route doesn't interfere with the other routes\n  await setup(app, server);\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n}\n","path":null,"size_bytes":3665,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/input-group.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        \"group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]\",\n        \"h-9 has-[>textarea]:h-auto\",\n\n        // Variants based on alignment.\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\n\n        // Focus state.\n        \"has-[[data-slot=input-group-control]:focus-visible]:ring-ring has-[[data-slot=input-group-control]:focus-visible]:ring-1\",\n\n        // Error state.\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\n\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text select-none items-center justify-center gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      align: {\n        \"inline-start\":\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\n        \"inline-end\":\n          \"order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]\",\n        \"block-start\":\n          \"[.border-b]:pb-3 order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5\",\n        \"block-end\":\n          \"[.border-t]:pt-3 order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5\",\n      },\n    },\n    defaultVariants: {\n      align: \"inline-start\",\n    },\n  }\n)\n\nfunction InputGroupAddon({\n  className,\n  align = \"inline-start\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest(\"button\")) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  \"flex items-center gap-2 text-sm shadow-none\",\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>svg]:px-2 [&>svg:not([class*='size-'])]:size-3.5\",\n        sm: \"h-8 gap-1.5 rounded-md px-2.5 has-[>svg]:px-2.5\",\n        \"icon-xs\":\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\n      },\n    },\n    defaultVariants: {\n      size: \"xs\",\n    },\n  }\n)\n\nfunction InputGroupButton({\n  className,\n  type = \"button\",\n  variant = \"ghost\",\n  size = \"xs\",\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<\"textarea\">) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","path":null,"size_bytes":4971,"size_tokens":null},"client/src/pages/settings.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Shield, Users, Bell, Target, FileText, User, Loader2, Clock, ImageIcon, Camera, Upload, X, Trash2 } from \"lucide-react\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\nfunction SettingsContent() {\n  const queryClient = useQueryClient();\n  const [activeTab, setActiveTab] = useState(\"account\");\n  const [showCreateGoal, setShowCreateGoal] = useState(false);\n  const [passwordData, setPasswordData] = useState({\n    current: \"\",\n    new: \"\",\n    confirm: \"\",\n  });\n  const { user } = useAuth();\n\n  // Hardcoded team ID for now - would come from user's team membership\n  const CURRENT_TEAM_ID = 1;\n\n  // Fetch user data\n  const { data: userData, isLoading: userLoading } = useQuery<any>({\n    queryKey: [`/api/users/${user.id}`],\n  });\n\n  // Fetch 2FA status\n  const { data: twoFactorData } = useQuery<any>({\n    queryKey: [`/api/users/${user.id}/2fa`],\n  });\n\n  // Fetch notification preferences\n  const { data: notificationPrefs, isLoading: notifsLoading } = useQuery<any>({\n    queryKey: [`/api/users/${user.id}/notification-preferences`],\n  });\n\n  // Fetch team members\n  const { data: teamMembers = [], isLoading: teamLoading } = useQuery<any[]>({\n    queryKey: [`/api/teams/${CURRENT_TEAM_ID}/members`],\n  });\n\n  // Fetch goals\n  const { data: goals = [], isLoading: goalsLoading } = useQuery<any[]>({\n    queryKey: [`/api/users/${user.id}/goals`],\n  });\n\n  // Fetch offers\n  const { data: offers = [], isLoading: offersLoading } = useQuery<any[]>({\n    queryKey: [`/api/offers`],\n    queryFn: async () => {\n      const res = await fetch(`/api/offers?userId=${user.id}`, { credentials: 'include' });\n      if (!res.ok) throw new Error('Failed to fetch offers');\n      return res.json();\n    },\n  });\n\n  // Update user mutation\n  const updateUserMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(`/api/users/${user!.id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n        credentials: 'include',\n      });\n      if (!res.ok) throw new Error('Failed to update profile');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user!.id}`] });\n      toast.success('Profile updated successfully');\n    },\n    onError: () => {\n      toast.error('Failed to update profile');\n    },\n  });\n\n  // Update notifications mutation\n  const updateNotificationsMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(`/api/users/${user!.id}/notification-preferences`, {\n        method: notificationPrefs ? 'PATCH' : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n        credentials: 'include',\n      });\n      if (!res.ok) throw new Error('Failed to update notifications');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user!.id}/notification-preferences`] });\n      toast.success('Notification preferences updated');\n    },\n    onError: () => {\n      toast.error('Failed to update notification preferences');\n    },\n  });\n\n  // Create goal mutation\n  const createGoalMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(`/api/users/${user!.id}/goals`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n        credentials: 'include',\n      });\n      if (!res.ok) throw new Error('Failed to create goal');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user!.id}/goals`] });\n      toast.success('Goal created successfully');\n      setShowCreateGoal(false);\n    },\n    onError: () => {\n      toast.error('Failed to create goal');\n    },\n  });\n\n  // Change password mutation\n  const changePasswordMutation = useMutation({\n    mutationFn: async (data: { currentPassword: string; newPassword: string }) => {\n      const res = await fetch(`/api/users/${user!.id}/password`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n        credentials: 'include',\n      });\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.message || 'Failed to change password');\n      }\n      return res.json();\n    },\n    onSuccess: () => {\n      toast.success('Password updated successfully');\n      setPasswordData({ current: \"\", new: \"\", confirm: \"\" });\n    },\n    onError: (error: any) => {\n      toast.error(error.message || 'Failed to update password');\n    },\n  });\n\n  const handlePasswordChange = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (passwordData.new !== passwordData.confirm) {\n      toast.error(\"New passwords don't match\");\n      return;\n    }\n    if (passwordData.new.length < 8) {\n      toast.error(\"Password must be at least 8 characters\");\n      return;\n    }\n    changePasswordMutation.mutate({\n      currentPassword: passwordData.current,\n      newPassword: passwordData.new,\n    });\n  };\n\n  // Toggle 2FA mutation\n  const toggle2FAMutation = useMutation({\n    mutationFn: async (enable: boolean) => {\n      if (enable) {\n        // In production, this would generate a secret and return QR code data\n        const secret = Math.random().toString(36).substring(7);\n        const res = await fetch(`/api/users/${user!.id}/2fa`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ secret, isEnabled: true, method: 'totp' }),\n          credentials: 'include',\n        });\n        if (!res.ok) throw new Error('Failed to enable 2FA');\n        return res.json();\n      } else {\n        const res = await fetch(`/api/users/${user!.id}/2fa`, {\n          method: 'DELETE',\n          credentials: 'include',\n        });\n        if (!res.ok) throw new Error('Failed to disable 2FA');\n        return null;\n      }\n    },\n    onSuccess: (_, enable) => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user!.id}/2fa`] });\n      toast.success(enable ? '2FA enabled successfully' : '2FA disabled successfully');\n    },\n    onError: () => {\n      toast.error('Failed to toggle 2FA');\n    },\n  });\n\n  // Handle profile form submission\n  const handleProfileSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget);\n    updateUserMutation.mutate({\n      firstName: formData.get('firstName'),\n      lastName: formData.get('lastName'),\n      email: formData.get('email'),\n      phone: formData.get('phone'),\n      companyName: formData.get('companyName'),\n      licenseNumber: formData.get('licenseNumber'),\n    });\n  };\n\n  if (userLoading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center h-96\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"space-y-1 mb-6\">\n        <h1 className=\"text-3xl font-bold tracking-tight\" data-testid=\"page-title\">Settings</h1>\n        <p className=\"text-muted-foreground\">Manage your account and application preferences.</p>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        <TabsList className=\"border-b rounded-none bg-transparent p-0 h-auto flex-wrap\">\n          <TabsTrigger value=\"account\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\">\n            <User className=\"w-4 h-4 mr-2\" />\n            Account\n          </TabsTrigger>\n          <TabsTrigger value=\"security\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\">\n            <Shield className=\"w-4 h-4 mr-2\" />\n            Security\n          </TabsTrigger>\n          <TabsTrigger value=\"notifications\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\">\n            <Bell className=\"w-4 h-4 mr-2\" />\n            Notifications\n          </TabsTrigger>\n          <TabsTrigger value=\"team\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\">\n            <Users className=\"w-4 h-4 mr-2\" />\n            Team\n          </TabsTrigger>\n          <TabsTrigger value=\"goals\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\">\n            <Target className=\"w-4 h-4 mr-2\" />\n            Goals\n          </TabsTrigger>\n          <TabsTrigger value=\"offers\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\">\n            <FileText className=\"w-4 h-4 mr-2\" />\n            Offers\n          </TabsTrigger>\n          <TabsTrigger value=\"appearance\" className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2\">\n            <ImageIcon className=\"w-4 h-4 mr-2\" />\n            Appearance\n          </TabsTrigger>\n        </TabsList>\n\n        {/* ACCOUNT TAB */}\n        <TabsContent value=\"account\" className=\"mt-6 space-y-6\">\n          <form onSubmit={handleProfileSubmit}>\n            <Card>\n              <CardHeader>\n                <CardTitle>Profile Information</CardTitle>\n                <CardDescription>Update your personal details and contact information.</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"firstName\">First Name</Label>\n                    <Input \n                      id=\"firstName\" \n                      name=\"firstName\"\n                      placeholder=\"First Name\" \n                      defaultValue={userData?.firstName || ''} \n                      data-testid=\"input-first-name\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"lastName\">Last Name</Label>\n                    <Input \n                      id=\"lastName\" \n                      name=\"lastName\"\n                      placeholder=\"Last Name\" \n                      defaultValue={userData?.lastName || ''} \n                      data-testid=\"input-last-name\"\n                    />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"email\">Email Address</Label>\n                  <Input \n                    id=\"email\" \n                    name=\"email\"\n                    type=\"email\" \n                    placeholder=\"email@example.com\" \n                    defaultValue={userData?.email || ''} \n                    data-testid=\"input-email\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"phone\">Phone Number</Label>\n                  <Input \n                    id=\"phone\" \n                    name=\"phone\"\n                    placeholder=\"(555) 123-4567\" \n                    defaultValue={userData?.phone || ''} \n                    data-testid=\"input-phone\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"companyName\">Company Name</Label>\n                  <Input \n                    id=\"companyName\" \n                    name=\"companyName\"\n                    placeholder=\"Company Name\" \n                    defaultValue={userData?.companyName || ''} \n                    data-testid=\"input-company\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"licenseNumber\">License Number</Label>\n                  <Input \n                    id=\"licenseNumber\" \n                    name=\"licenseNumber\"\n                    placeholder=\"FL-123456\" \n                    defaultValue={userData?.licenseNumber || ''} \n                    data-testid=\"input-license\"\n                  />\n                </div>\n                <Button \n                  type=\"submit\" \n                  className=\"bg-primary hover:bg-primary/90 text-white\"\n                  disabled={updateUserMutation.isPending}\n                  data-testid=\"button-save-profile\"\n                >\n                  {updateUserMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                  Save Changes\n                </Button>\n              </CardContent>\n            </Card>\n          </form>\n        </TabsContent>\n\n        {/* SECURITY TAB */}\n        <TabsContent value=\"security\" className=\"mt-6 space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Password</CardTitle>\n              <CardDescription>Change your password to keep your account secure.</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <form onSubmit={handlePasswordChange} className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"current\">Current Password</Label>\n                  <Input \n                    id=\"current\" \n                    type=\"password\" \n                    placeholder=\"••••••••\" \n                    value={passwordData.current}\n                    onChange={(e) => setPasswordData({ ...passwordData, current: e.target.value })}\n                    required\n                    data-testid=\"input-current-password\" \n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"new\">New Password</Label>\n                  <Input \n                    id=\"new\" \n                    type=\"password\" \n                    placeholder=\"••••••••\" \n                    value={passwordData.new}\n                    onChange={(e) => setPasswordData({ ...passwordData, new: e.target.value })}\n                    required\n                    minLength={8}\n                    data-testid=\"input-new-password\" \n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"confirm\">Confirm Password</Label>\n                  <Input \n                    id=\"confirm\" \n                    type=\"password\" \n                    placeholder=\"••••••••\" \n                    value={passwordData.confirm}\n                    onChange={(e) => setPasswordData({ ...passwordData, confirm: e.target.value })}\n                    required\n                    minLength={8}\n                    data-testid=\"input-confirm-password\" \n                  />\n                </div>\n                <Button \n                  type=\"submit\"\n                  className=\"bg-primary hover:bg-primary/90 text-white\" \n                  disabled={changePasswordMutation.isPending}\n                  data-testid=\"button-update-password\"\n                >\n                  {changePasswordMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                  Update Password\n                </Button>\n              </form>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Two-Factor Authentication (2FA)</CardTitle>\n              <CardDescription>Add an extra layer of security using time-based one-time passwords (TOTP).</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                <div>\n                  <p className=\"font-medium\">\n                    Status: {twoFactorData?.isEnabled ? \n                      <span className=\"text-green-600\">Enabled</span> : \n                      <span className=\"text-muted-foreground\">Disabled</span>\n                    }\n                  </p>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    {twoFactorData?.isEnabled ? \n                      'Your account is protected with 2FA' : \n                      'Enhance your account security with 2FA'\n                    }\n                  </p>\n                  {twoFactorData?.isEnabled && (\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      Method: {twoFactorData.method === 'totp' ? 'Authenticator App' : 'SMS'}\n                    </p>\n                  )}\n                </div>\n                <Button \n                  onClick={() => toggle2FAMutation.mutate(!twoFactorData?.isEnabled)}\n                  variant={twoFactorData?.isEnabled ? \"destructive\" : \"default\"}\n                  className={!twoFactorData?.isEnabled ? \"bg-primary hover:bg-primary/90 text-white\" : \"\"}\n                  disabled={toggle2FAMutation.isPending}\n                  data-testid=\"button-toggle-2fa\"\n                >\n                  {toggle2FAMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                  {twoFactorData?.isEnabled ? 'Disable 2FA' : 'Enable 2FA'}\n                </Button>\n              </div>\n\n              {twoFactorData?.isEnabled && (\n                <div className=\"border-t pt-4 space-y-4\">\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Backup Codes</h4>\n                    <p className=\"text-sm text-muted-foreground mb-3\">\n                      Generate backup codes to use if you lose access to your authenticator app\n                    </p>\n                    <Button variant=\"outline\" size=\"sm\" data-testid=\"button-generate-backup-codes\">\n                      Generate Backup Codes\n                    </Button>\n                  </div>\n                  \n                  <div>\n                    <h4 className=\"font-medium mb-2\">Fallback Options</h4>\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span>SMS Backup</span>\n                        <Switch data-testid=\"switch-sms-backup\" />\n                      </div>\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span>Email Backup</span>\n                        <Switch data-testid=\"switch-email-backup\" />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* NOTIFICATIONS TAB */}\n        <TabsContent value=\"notifications\" className=\"mt-6 space-y-6\">\n          {notifsLoading ? (\n            <Card>\n              <CardContent className=\"flex items-center justify-center p-8\">\n                <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\n              </CardContent>\n            </Card>\n          ) : (\n            <>\n              <Card>\n                <CardHeader>\n                  <CardTitle>Notification Channels</CardTitle>\n                  <CardDescription>Choose how you want to receive notifications.</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {[\n                    { key: 'emailEnabled', label: 'Email Notifications', desc: 'Receive notifications via email' },\n                    { key: 'pushEnabled', label: 'Push Notifications', desc: 'Browser push notifications' },\n                    { key: 'inAppEnabled', label: 'In-App Notifications', desc: 'Notifications within the application' },\n                  ].map((channel) => (\n                    <div key={channel.key} className=\"flex items-center justify-between py-2\">\n                      <div>\n                        <p className=\"font-medium\">{channel.label}</p>\n                        <p className=\"text-sm text-muted-foreground\">{channel.desc}</p>\n                      </div>\n                      <Switch \n                        checked={notificationPrefs?.[channel.key] ?? true}\n                        onCheckedChange={(checked) => {\n                          updateNotificationsMutation.mutate({ [channel.key]: checked });\n                        }}\n                        data-testid={`switch-${channel.key}`}\n                      />\n                    </div>\n                  ))}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Notification Types</CardTitle>\n                  <CardDescription>Control which events trigger notifications.</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {[\n                    { key: 'newLeads', label: 'New Leads', desc: 'Get notified when new leads are added' },\n                    { key: 'dealUpdates', label: 'Deal Updates', desc: 'Updates on deals in progress' },\n                    { key: 'contractAlerts', label: 'Contract Alerts', desc: 'Important contract updates' },\n                    { key: 'weeklySummary', label: 'Weekly Summary', desc: 'Weekly performance summary' },\n                  ].map((type) => (\n                    <div key={type.key} className=\"flex items-center justify-between py-2\">\n                      <div>\n                        <p className=\"font-medium\">{type.label}</p>\n                        <p className=\"text-sm text-muted-foreground\">{type.desc}</p>\n                      </div>\n                      <Switch \n                        checked={notificationPrefs?.[type.key] ?? true}\n                        onCheckedChange={(checked) => {\n                          updateNotificationsMutation.mutate({ [type.key]: checked });\n                        }}\n                        data-testid={`switch-${type.key}`}\n                      />\n                    </div>\n                  ))}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Notification Frequency</CardTitle>\n                  <CardDescription>Control how often you receive notifications.</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"frequency\">Delivery Frequency</Label>\n                    <Select \n                      value={notificationPrefs?.frequency || 'instant'}\n                      onValueChange={(value) => {\n                        updateNotificationsMutation.mutate({ frequency: value });\n                      }}\n                    >\n                      <SelectTrigger data-testid=\"select-frequency\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"instant\">Instant</SelectItem>\n                        <SelectItem value=\"hourly\">Hourly Digest</SelectItem>\n                        <SelectItem value=\"daily\">Daily Digest</SelectItem>\n                        <SelectItem value=\"weekly\">Weekly Digest</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Do Not Disturb Schedule</CardTitle>\n                  <CardDescription>Set quiet hours when you don't want to receive notifications.</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"font-medium\">Enable Do Not Disturb</p>\n                      <p className=\"text-sm text-muted-foreground\">Mute notifications during specified hours</p>\n                    </div>\n                    <Switch \n                      checked={notificationPrefs?.dndEnabled ?? false}\n                      onCheckedChange={(checked) => {\n                        updateNotificationsMutation.mutate({ dndEnabled: checked });\n                      }}\n                      data-testid=\"switch-dnd-enabled\"\n                    />\n                  </div>\n\n                  {notificationPrefs?.dndEnabled && (\n                    <div className=\"grid grid-cols-2 gap-4 pt-4 border-t\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"dndStart\">Start Time</Label>\n                        <Input \n                          id=\"dndStart\" \n                          type=\"time\" \n                          defaultValue={notificationPrefs?.dndStartTime || '22:00'}\n                          onChange={(e) => {\n                            updateNotificationsMutation.mutate({ dndStartTime: e.target.value });\n                          }}\n                          data-testid=\"input-dnd-start\"\n                        />\n                      </div>\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"dndEnd\">End Time</Label>\n                        <Input \n                          id=\"dndEnd\" \n                          type=\"time\" \n                          defaultValue={notificationPrefs?.dndEndTime || '08:00'}\n                          onChange={(e) => {\n                            updateNotificationsMutation.mutate({ dndEndTime: e.target.value });\n                          }}\n                          data-testid=\"input-dnd-end\"\n                        />\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </>\n          )}\n        </TabsContent>\n\n        {/* TEAM TAB */}\n        <TabsContent value=\"team\" className=\"mt-6 space-y-6\">\n          {teamLoading ? (\n            <Card>\n              <CardContent className=\"flex items-center justify-center p-8\">\n                <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\n              </CardContent>\n            </Card>\n          ) : (\n            <>\n              <Card>\n                <CardHeader>\n                  <CardTitle>Team Members</CardTitle>\n                  <CardDescription>Manage your team and their permissions.</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {teamMembers.length === 0 ? (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <Users className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                      <p>No team members yet</p>\n                      <p className=\"text-sm mt-1\">Start by inviting your first team member</p>\n                    </div>\n                  ) : (\n                    teamMembers.map((member, index) => (\n                      <div key={member.id} className=\"flex items-center justify-between border rounded p-3\" data-testid={`team-member-${index}`}>\n                        <div>\n                          <p className=\"font-medium\">Team Member {member.userId}</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {member.role || 'Member'} • {member.status || 'Active'}\n                          </p>\n                        </div>\n                        <Button variant=\"ghost\" size=\"sm\" data-testid={`button-remove-member-${index}`}>\n                          Remove\n                        </Button>\n                      </div>\n                    ))\n                  )}\n                  <Button className=\"w-full bg-primary hover:bg-primary/90 text-white mt-4\" data-testid=\"button-add-team-member\">\n                    Add Team Member\n                  </Button>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Team Activity</CardTitle>\n                  <CardDescription>Recent team activity and changes.</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <p className=\"text-sm text-muted-foreground\">No recent activity</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </>\n          )}\n        </TabsContent>\n\n        {/* GOALS TAB */}\n        <TabsContent value=\"goals\" className=\"mt-6 space-y-6\">\n          {goalsLoading ? (\n            <Card>\n              <CardContent className=\"flex items-center justify-center p-8\">\n                <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\n              </CardContent>\n            </Card>\n          ) : (\n            <>\n              <Card>\n                <CardHeader>\n                  <CardTitle>Current Goals</CardTitle>\n                  <CardDescription>Track your progress towards sales and performance goals.</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  {goals.length === 0 ? (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <Target className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                      <p>No goals set yet</p>\n                      <p className=\"text-sm mt-1\">Create your first goal to start tracking progress</p>\n                    </div>\n                  ) : (\n                    goals.map((goal, index) => {\n                      const progress = goal.targetValue > 0 ? (goal.currentValue / goal.targetValue) * 100 : 0;\n                      return (\n                        <div key={goal.id} className=\"space-y-3\" data-testid={`goal-${index}`}>\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <h4 className=\"font-medium\">{goal.title}</h4>\n                              <p className=\"text-sm text-muted-foreground\">{goal.description}</p>\n                            </div>\n                            <span className=\"text-sm font-medium\">\n                              {goal.currentValue}/{goal.targetValue} {goal.unit}\n                            </span>\n                          </div>\n                          <div>\n                            <div className=\"flex items-center justify-between mb-1\">\n                              <span className=\"text-xs text-muted-foreground\">{progress.toFixed(0)}% Complete</span>\n                              <span className=\"text-xs text-muted-foreground\">{goal.period}</span>\n                            </div>\n                            <Progress value={progress} className=\"h-2\" />\n                          </div>\n                        </div>\n                      );\n                    })\n                  )}\n                  \n                  {showCreateGoal && <GoalCreator onClose={() => setShowCreateGoal(false)} onSubmit={createGoalMutation} />}\n                  \n                  <Button \n                    className=\"w-full bg-primary hover:bg-primary/90 text-white\" \n                    data-testid=\"button-add-goal\"\n                    onClick={() => setShowCreateGoal(!showCreateGoal)}\n                  >\n                    {showCreateGoal ? 'Cancel' : 'Create New Goal'}\n                  </Button>\n                </CardContent>\n              </Card>\n            </>\n          )}\n        </TabsContent>\n\n        {/* OFFERS TAB */}\n        <TabsContent value=\"offers\" className=\"mt-6 space-y-6\">\n          {offersLoading ? (\n            <Card>\n              <CardContent className=\"flex items-center justify-center p-8\">\n                <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\n              </CardContent>\n            </Card>\n          ) : (\n            <>\n              <Card>\n                <CardHeader>\n                  <CardTitle>Sent Offers</CardTitle>\n                  <CardDescription>Track all offers you've sent to sellers.</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {offers.length === 0 ? (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <FileText className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                      <p>No offers sent yet</p>\n                      <p className=\"text-sm mt-1\">Your sent offers will appear here</p>\n                    </div>\n                  ) : (\n                    offers.map((offer, index) => (\n                      <div key={offer.id} className=\"border rounded-lg p-4\" data-testid={`offer-${index}`}>\n                        <div className=\"flex items-start justify-between mb-2\">\n                          <div>\n                            <p className=\"font-medium\">Offer #{offer.id}</p>\n                            <p className=\"text-sm text-muted-foreground\">\n                              {offer.buyerName} → {offer.sellerName}\n                            </p>\n                          </div>\n                          <span className={`text-xs px-2 py-1 rounded-full ${\n                            offer.status === 'accepted' ? 'bg-green-100 text-green-800' :\n                            offer.status === 'rejected' ? 'bg-red-100 text-red-800' :\n                            offer.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                            'bg-gray-100 text-gray-800'\n                          }`}>\n                            {offer.status}\n                          </span>\n                        </div>\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"font-semibold text-lg\">\n                            ${parseFloat(offer.offerAmount).toLocaleString()}\n                          </span>\n                          {offer.sentDate && (\n                            <span className=\"text-muted-foreground flex items-center gap-1\">\n                              <Clock className=\"w-3 h-3\" />\n                              {new Date(offer.sentDate).toLocaleDateString()}\n                            </span>\n                          )}\n                        </div>\n                        {offer.notes && (\n                          <p className=\"text-xs text-muted-foreground mt-2\">{offer.notes}</p>\n                        )}\n                      </div>\n                    ))\n                  )}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Offer Statistics</CardTitle>\n                  <CardDescription>Overview of your offer performance.</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <div className=\"text-center\">\n                      <p className=\"text-2xl font-bold\">{offers.length}</p>\n                      <p className=\"text-xs text-muted-foreground\">Total Sent</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <p className=\"text-2xl font-bold text-green-600\">\n                        {offers.filter(o => o.status === 'accepted').length}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">Accepted</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <p className=\"text-2xl font-bold text-yellow-600\">\n                        {offers.filter(o => o.status === 'pending').length}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">Pending</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </>\n          )}\n        </TabsContent>\n\n        {/* APPEARANCE TAB */}\n        <TabsContent value=\"appearance\" className=\"mt-6 space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Camera className=\"w-5 h-5\" />\n                Profile Picture\n              </CardTitle>\n              <CardDescription>Upload a profile picture that will be displayed in the app.</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center gap-6\">\n                <div className=\"relative\">\n                  <div className=\"w-24 h-24 rounded-full overflow-hidden bg-muted flex items-center justify-center border-2 border-border\">\n                    {userData?.profilePicture ? (\n                      <img \n                        src={userData.profilePicture} \n                        alt=\"Profile\" \n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <User className=\"w-10 h-10 text-muted-foreground\" />\n                    )}\n                  </div>\n                </div>\n                <div className=\"space-y-3\">\n                  <div className=\"flex gap-2\">\n                    <label className=\"cursor-pointer\">\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        className=\"hidden\"\n                        onChange={(e) => {\n                          const file = e.target.files?.[0];\n                          if (file) {\n                            const reader = new FileReader();\n                            reader.onload = (event) => {\n                              const base64 = event.target?.result as string;\n                              updateUserMutation.mutate({ profilePicture: base64 });\n                            };\n                            reader.readAsDataURL(file);\n                          }\n                        }}\n                        data-testid=\"input-profile-picture\"\n                      />\n                      <Button type=\"button\" variant=\"outline\" asChild>\n                        <span>\n                          <Upload className=\"w-4 h-4 mr-2\" />\n                          Upload Photo\n                        </span>\n                      </Button>\n                    </label>\n                    {userData?.profilePicture && (\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        className=\"text-destructive hover:text-destructive\"\n                        onClick={() => updateUserMutation.mutate({ profilePicture: null })}\n                        data-testid=\"button-remove-profile-picture\"\n                      >\n                        <Trash2 className=\"w-4 h-4 mr-2\" />\n                        Remove\n                      </Button>\n                    )}\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Recommended: Square image, at least 200x200 pixels\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <ImageIcon className=\"w-5 h-5\" />\n                Motivational Banner\n              </CardTitle>\n              <CardDescription>Customize the motivational banner on your dashboard.</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"space-y-1\">\n                  <Label>Show Motivational Quotes</Label>\n                  <p className=\"text-sm text-muted-foreground\">Display inspiring quotes above the banner images</p>\n                </div>\n                <Switch\n                  checked={userData?.showBannerQuotes !== false}\n                  onCheckedChange={(checked) => updateUserMutation.mutate({ showBannerQuotes: checked })}\n                  data-testid=\"switch-show-quotes\"\n                />\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label>Custom Banner Images</Label>\n                <p className=\"text-sm text-muted-foreground\">Add your own motivational images to the banner carousel</p>\n                \n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                  {(userData?.customBannerImages || []).map((img: string, index: number) => (\n                    <div key={index} className=\"relative group\">\n                      <img\n                        src={img}\n                        alt={`Custom banner ${index + 1}`}\n                        className=\"w-full h-24 object-cover rounded-lg border\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          const updated = (userData?.customBannerImages || []).filter((_: string, i: number) => i !== index);\n                          updateUserMutation.mutate({ customBannerImages: updated });\n                        }}\n                        className=\"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                        data-testid={`button-remove-banner-${index}`}\n                      >\n                        <X className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                  ))}\n                  \n                  <label className=\"cursor-pointer\">\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      className=\"hidden\"\n                      onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) {\n                          const reader = new FileReader();\n                          reader.onload = (event) => {\n                            const base64 = event.target?.result as string;\n                            const currentImages = userData?.customBannerImages || [];\n                            updateUserMutation.mutate({ customBannerImages: [...currentImages, base64] });\n                          };\n                          reader.readAsDataURL(file);\n                        }\n                      }}\n                      data-testid=\"input-banner-image\"\n                    />\n                    <div className=\"w-full h-24 border-2 border-dashed border-muted-foreground/30 rounded-lg flex flex-col items-center justify-center gap-1 hover:border-primary hover:bg-accent/10 transition-colors\">\n                      <Upload className=\"w-5 h-5 text-muted-foreground\" />\n                      <span className=\"text-xs text-muted-foreground\">Add Image</span>\n                    </div>\n                  </label>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </Layout>\n  );\n}\n\n// Goal Creator Component\nfunction GoalCreator({ onClose, onSubmit }: { onClose: () => void, onSubmit: any }) {\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    targetValue: \"\",\n    currentValue: \"\",\n    unit: \"deals\",\n    period: \"month\",\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit.mutate({\n      ...formData,\n      targetValue: parseFloat(formData.targetValue),\n      currentValue: parseFloat(formData.currentValue) || 0,\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4 p-4 bg-accent/5 rounded-lg mb-4\">\n      <h3 className=\"font-semibold text-lg\">Create New Goal</h3>\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"goal-title\">Goal Title</Label>\n          <Input\n            id=\"goal-title\"\n            data-testid=\"input-goal-title\"\n            value={formData.title}\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n            placeholder=\"e.g., Close 12 deals\"\n            required\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"goal-period\">Period</Label>\n          <Select value={formData.period} onValueChange={(value) => setFormData({ ...formData, period: value })}>\n            <SelectTrigger data-testid=\"select-goal-period\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"week\">Week</SelectItem>\n              <SelectItem value=\"month\">Month</SelectItem>\n              <SelectItem value=\"quarter\">Quarter</SelectItem>\n              <SelectItem value=\"year\">Year</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"goal-description\">Description</Label>\n        <Input\n          id=\"goal-description\"\n          data-testid=\"input-goal-description\"\n          value={formData.description}\n          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n          placeholder=\"Brief description of your goal\"\n        />\n      </div>\n      <div className=\"grid grid-cols-3 gap-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"goal-target\">Target Value</Label>\n          <Input\n            id=\"goal-target\"\n            data-testid=\"input-goal-target\"\n            type=\"number\"\n            value={formData.targetValue}\n            onChange={(e) => setFormData({ ...formData, targetValue: e.target.value })}\n            placeholder=\"12\"\n            required\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"goal-current\">Current Value</Label>\n          <Input\n            id=\"goal-current\"\n            data-testid=\"input-goal-current\"\n            type=\"number\"\n            value={formData.currentValue}\n            onChange={(e) => setFormData({ ...formData, currentValue: e.target.value })}\n            placeholder=\"0\"\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"goal-unit\">Unit</Label>\n          <Select value={formData.unit} onValueChange={(value) => setFormData({ ...formData, unit: value })}>\n            <SelectTrigger data-testid=\"select-goal-unit\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"deals\">Deals</SelectItem>\n              <SelectItem value=\"dollars\">Dollars</SelectItem>\n              <SelectItem value=\"leads\">Leads</SelectItem>\n              <SelectItem value=\"contracts\">Contracts</SelectItem>\n              <SelectItem value=\"properties\">Properties</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n      <div className=\"flex gap-3\">\n        <Button type=\"submit\" data-testid=\"button-save-goal\" disabled={onSubmit.isPending}>\n          {onSubmit.isPending ? \"Creating...\" : \"Create Goal\"}\n        </Button>\n        <Button type=\"button\" variant=\"outline\" onClick={onClose} data-testid=\"button-cancel-goal\">\n          Cancel\n        </Button>\n      </div>\n    </form>\n  );\n}\n\nexport default function Settings() {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center h-96\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center h-96\">\n          <p className=\"text-muted-foreground\">Please log in to access settings.</p>\n        </div>\n      </Layout>\n    );\n  }\n\n  return <SettingsContent />;\n}\n","path":null,"size_bytes":48721,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/index.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  \n  --color-background: hsl(var(--background));\n  --color-foreground: hsl(var(--foreground));\n  \n  --color-card: hsl(var(--card));\n  --color-card-foreground: hsl(var(--card-foreground));\n  \n  --color-popover: hsl(var(--popover));\n  --color-popover-foreground: hsl(var(--popover-foreground));\n  \n  --color-primary: hsl(var(--primary));\n  --color-primary-foreground: hsl(var(--primary-foreground));\n  \n  --color-secondary: hsl(var(--secondary));\n  --color-secondary-foreground: hsl(var(--secondary-foreground));\n  \n  --color-muted: hsl(var(--muted));\n  --color-muted-foreground: hsl(var(--muted-foreground));\n  \n  --color-accent: hsl(var(--accent));\n  --color-accent-foreground: hsl(var(--accent-foreground));\n  \n  --color-destructive: hsl(var(--destructive));\n  --color-destructive-foreground: hsl(var(--destructive-foreground));\n  \n  --color-border: hsl(var(--border));\n  --color-input: hsl(var(--input));\n  --color-ring: hsl(var(--ring));\n  \n  --color-chart-1: hsl(var(--chart-1));\n  --color-chart-2: hsl(var(--chart-2));\n  --color-chart-3: hsl(var(--chart-3));\n  --color-chart-4: hsl(var(--chart-4));\n  --color-chart-5: hsl(var(--chart-5));\n  \n  --color-sidebar: hsl(var(--sidebar));\n  --color-sidebar-foreground: hsl(var(--sidebar-foreground));\n  --color-sidebar-primary: hsl(var(--sidebar-primary));\n  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));\n  --color-sidebar-accent: hsl(var(--sidebar-accent));\n  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));\n  --color-sidebar-border: hsl(var(--sidebar-border));\n  --color-sidebar-ring: hsl(var(--sidebar-ring));\n\n  --font-sans: 'Plus Jakarta Sans', sans-serif;\n  --font-display: 'Barlow', sans-serif;\n}\n\n/* LIGHT MODE - Black, White, Red Theme */\n:root {\n  --radius: 0.5rem;\n  \n  /* Clean White Background */\n  --background: 0 0% 100%;\n  --foreground: 0 0% 0%;\n\n  /* White Cards */\n  --card: 0 0% 100%;\n  --card-foreground: 0 0% 0%;\n\n  --popover: 0 0% 100%;\n  --popover-foreground: 0 0% 0%;\n\n  /* Primary: Bold Red */\n  --primary: 0 84% 50%;\n  --primary-foreground: 0 0% 100%;\n\n  /* Secondary: Light Gray */\n  --secondary: 0 0% 95%;\n  --secondary-foreground: 0 0% 0%;\n\n  /* Muted: For subtext */\n  --muted: 0 0% 92%;\n  --muted-foreground: 0 0% 40%;\n\n  /* Accent: Red for emphasis */\n  --accent: 0 84% 50%;\n  --accent-foreground: 0 0% 100%;\n\n  --destructive: 0 84% 50%;\n  --destructive-foreground: 0 0% 100%;\n\n  --border: 0 0% 90%;\n  --input: 0 0% 93%;\n  --ring: 0 84% 50%;\n\n  /* Charts */\n  --chart-1: 0 84% 50%; /* Red */\n  --chart-2: 0 0% 30%; /* Black */\n  --chart-3: 0 0% 60%; /* Gray */\n  --chart-4: 0 84% 65%;  /* Light Red */\n  --chart-5: 0 0% 20%; /* Dark Black */\n\n  /* Sidebar: Pure Black for dramatic contrast */\n  --sidebar: 0 0% 0%;\n  --sidebar-foreground: 0 0% 100%;\n  --sidebar-primary: 0 84% 50%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 0 0% 15%;\n  --sidebar-accent-foreground: 0 0% 100%;\n  --sidebar-border: 0 0% 10%;\n  --sidebar-ring: 0 84% 50%;\n}\n\n.dark {\n  --background: 0 0% 8%;\n  --foreground: 0 0% 100%;\n\n  --card: 0 0% 12%;\n  --card-foreground: 0 0% 100%;\n\n  --popover: 0 0% 12%;\n  --popover-foreground: 0 0% 100%;\n\n  --primary: 0 84% 55%;\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 0 0% 20%;\n  --secondary-foreground: 0 0% 100%;\n\n  --muted: 0 0% 25%;\n  --muted-foreground: 0 0% 70%;\n\n  --accent: 0 84% 55%;\n  --accent-foreground: 0 0% 100%;\n\n  --destructive: 0 84% 55%;\n  --destructive-foreground: 0 0% 100%;\n\n  --border: 0 0% 20%;\n  --input: 0 0% 18%;\n  --ring: 0 84% 55%;\n\n  --chart-1: 0 84% 55%;\n  --chart-2: 0 0% 50%;\n  --chart-3: 0 0% 70%;\n  --chart-4: 0 84% 60%;\n  --chart-5: 0 0% 80%;\n\n  --sidebar: 0 0% 0%;\n  --sidebar-foreground: 0 0% 100%;\n  --sidebar-primary: 0 84% 55%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 0 0% 15%;\n  --sidebar-accent-foreground: 0 0% 100%;\n  --sidebar-border: 0 0% 10%;\n  --sidebar-ring: 0 84% 55%;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    @apply font-display tracking-tight;\n  }\n  \n  /* CUSTOM SCROLLBARS - Cross-browser support */\n  /* Webkit browsers (Chrome, Safari, Edge) */\n  ::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n  }\n  \n  ::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  \n  ::-webkit-scrollbar-thumb {\n    background: #a1a1a1;\n    border-radius: 3px;\n    transition: background 0.3s ease;\n  }\n  \n  ::-webkit-scrollbar-thumb:hover {\n    background: hsl(var(--primary));\n  }\n  \n  /* Firefox */\n  * {\n    scrollbar-width: thin;\n    scrollbar-color: #a1a1a1 transparent;\n  }\n  \n  *::-webkit-scrollbar-thumb:hover {\n    background: hsl(var(--primary)) !important;\n  }\n}\n\n/* OVERFLOW CONTAINER UTILITIES */\n@layer components {\n  .scroll-container {\n    @apply overflow-auto scroll-smooth;\n    scroll-behavior: smooth;\n    overscroll-behavior: contain;\n    contain: layout style paint;\n  }\n  \n  .scroll-x-container {\n    @apply overflow-x-auto overflow-y-hidden scroll-smooth;\n    scroll-behavior: smooth;\n    overscroll-behavior-x: contain;\n    contain: layout style paint;\n  }\n  \n  .scroll-y-container {\n    @apply overflow-y-auto overflow-x-hidden scroll-smooth;\n    scroll-behavior: smooth;\n    overscroll-behavior-y: contain;\n    contain: layout style paint;\n  }\n  \n  .no-scroll {\n    @apply overflow-hidden;\n  }\n}\n","path":null,"size_bytes":5650,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4175,"size_tokens":null},"client/src/contexts/AuthContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useLocation } from 'wouter';\n\ninterface User {\n  id: number;\n  email: string;\n  firstName?: string;\n  lastName?: string;\n  phone?: string;\n  companyName?: string;\n  licenseNumber?: string;\n  role: string;\n  isSuperAdmin: boolean;\n  avatarUrl?: string;\n  isActive: boolean;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n  isAuthenticated: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  const checkAuth = async () => {\n    try {\n      const res = await fetch('/api/auth/me', { credentials: 'include' });\n      if (res.ok) {\n        const userData = await res.json();\n        setUser(userData);\n      } else {\n        setUser(null);\n      }\n    } catch (error) {\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const login = async (email: string, password: string) => {\n    const res = await fetch('/api/auth/login', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, password }),\n      credentials: 'include',\n    });\n\n    if (!res.ok) {\n      const error = await res.json();\n      throw new Error(error.message || 'Login failed');\n    }\n\n    const { user: userData } = await res.json();\n    setUser(userData);\n    setLocation('/');\n  };\n\n  const logout = async () => {\n    await fetch('/api/auth/logout', {\n      method: 'POST',\n      credentials: 'include',\n    });\n    setUser(null);\n    setLocation('/login');\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, loading, login, logout, isAuthenticated: !!user }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n","path":null,"size_bytes":2277,"size_tokens":null},"client/src/contexts/SidebarContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\n\nexport type SidebarState = \"expanded\" | \"icon\" | \"hidden\";\n\ninterface SidebarContextType {\n  state: SidebarState;\n  setState: (state: SidebarState) => void;\n  cycleState: () => void;\n  isExpanded: boolean;\n  isIconOnly: boolean;\n  isHidden: boolean;\n}\n\nconst SidebarContext = createContext<SidebarContextType | undefined>(undefined);\n\nfunction migrateOldState(): SidebarState {\n  const oldState = localStorage.getItem(\"sidebar-collapsed\");\n  if (oldState !== null) {\n    localStorage.removeItem(\"sidebar-collapsed\");\n    return oldState === \"true\" ? \"icon\" : \"expanded\";\n  }\n  \n  const savedState = localStorage.getItem(\"sidebar-state\");\n  if (savedState && [\"expanded\", \"icon\", \"hidden\"].includes(savedState)) {\n    return savedState as SidebarState;\n  }\n  \n  return \"expanded\";\n}\n\nexport function SidebarProvider({ children }: { children: ReactNode }) {\n  const [state, setStateInternal] = useState<SidebarState>(migrateOldState);\n\n  useEffect(() => {\n    localStorage.setItem(\"sidebar-state\", state);\n  }, [state]);\n\n  const setState = (newState: SidebarState) => setStateInternal(newState);\n  \n  const cycleState = () => {\n    setStateInternal((prev) => {\n      if (prev === \"expanded\") return \"icon\";\n      if (prev === \"icon\") return \"hidden\";\n      return \"expanded\";\n    });\n  };\n\n  const isExpanded = state === \"expanded\";\n  const isIconOnly = state === \"icon\";\n  const isHidden = state === \"hidden\";\n\n  return (\n    <SidebarContext.Provider value={{ state, setState, cycleState, isExpanded, isIconOnly, isHidden }}>\n      {children}\n    </SidebarContext.Provider>\n  );\n}\n\nexport function useSidebar() {\n  const context = useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":1858,"size_tokens":null},"replit.md":{"content":"# Flipstackk 6.0 - Wholesaler CRM\n\n## Overview\n\nFlipstackk 6.0 is a wholesaler-first CRM designed for real estate investors, focusing on speed and simplicity over feature bloat. The application streamlines deal flow management, lead tracking, property analysis, and contract generation for real estate wholesaling operations.\n\nThe system is built as a full-stack TypeScript application with a React frontend and Express backend, using PostgreSQL for data persistence and shadcn/ui components for the user interface.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Application Structure\n\nThe application follows a monolithic architecture with clear separation between client and server code:\n\n- **Client (`client/`)**: React-based SPA using Vite for development and production builds\n- **Server (`server/`)**: Express.js REST API with session-based authentication\n- **Shared (`shared/`)**: Common TypeScript types and database schema definitions\n\n### Frontend Architecture\n\n**Framework & Build System:**\n- React 18 with TypeScript for type safety\n- Vite as the build tool and development server\n- Wouter for client-side routing (lightweight alternative to React Router)\n- TanStack Query (React Query) for server state management and API data caching\n\n**UI Component System:**\n- shadcn/ui components built on Radix UI primitives\n- Tailwind CSS v4 for styling with CSS variables for theming\n- Custom design system using \"new-york\" variant with neutral base color\n- Lucide icons for consistent iconography\n\n**State Management:**\n- React Context for authentication state (AuthContext)\n- TanStack Query for server data fetching and caching\n- No global state management library - uses composition of local state and server state\n\n### Backend Architecture\n\n**Core Framework:**\n- Express.js for HTTP server and routing\n- Node.js with ESM (ES Modules) support\n- Dual entry points: `index-dev.ts` for development with Vite middleware, `index-prod.ts` for production serving\n\n**Authentication & Sessions:**\n- Session-based authentication using `express-session`\n- PostgreSQL-backed session store (`connect-pg-simple`) for production-ready persistence\n- Password hashing with bcrypt (12 rounds)\n- Two-factor authentication support (2FA) with backup codes\n- Role-based access control (admin, super admin, regular users)\n\n**API Design:**\n- RESTful endpoints organized in `routes.ts`\n- Manual route registration (no auto-routing framework)\n- Session data includes `userId` and `email` for authenticated requests\n\n### Data Layer\n\n**Database:**\n- PostgreSQL as the primary database\n- Drizzle ORM for type-safe database queries and migrations\n- Connection via `@neondatabase/serverless` driver (supports Neon serverless Postgres)\n\n**Schema Design:**\nThe database schema supports comprehensive CRM functionality:\n\n- **Core Entities:**\n  - `leads`: Lead tracking with RELAS scoring, motivation tracking, and status management\n  - `properties`: Property details including beds, baths, sqft, APN, occupancy\n  - `contacts`: Contact information management\n  - `contracts`: Purchase agreements with amounts and status tracking\n  - `offers`: Offer management with counter-offer support\n\n- **Document Management:**\n  - `contract_templates`: Reusable contract templates\n  - `contract_documents`: Generated contract instances\n  - `document_versions`: Version control for documents\n  - `lois`: Letter of Intent management\n\n- **User & Team Management:**\n  - `users`: User accounts with profiles, roles, and company information\n  - `teams`: Team/organization structure\n  - `team_members`: Team membership with roles\n  - `team_activity_logs`: Activity tracking and audit trails\n  - `notification_preferences`: Per-user notification settings\n  - `user_goals`: Goal tracking for users\n\n- **Security:**\n  - `two_factor_auth`: 2FA secrets and QR codes\n  - `backup_codes`: Recovery codes for 2FA\n\n**Data Access Pattern:**\n- Repository pattern implemented in `storage.ts`\n- Interface-based storage layer (`IStorage`) for potential swapping of implementations\n- All database operations go through the storage layer for consistency\n\n### Development vs Production\n\n**Development Mode:**\n- Vite dev server integrated via middleware\n- HMR (Hot Module Replacement) enabled\n- Development-only Replit plugins (cartographer, dev-banner, runtime error overlay)\n- Source maps enabled\n- Default session secret allowed (with warning)\n\n**Production Mode:**\n- Static file serving from `dist/public`\n- Bundled server code via esbuild\n- Requires `SESSION_SECRET` environment variable\n- Optimized builds with tree-shaking\n\n### Key Features\n\n**Lead Management:**\n- RELAS scoring integration (Real Estate Lead Assessment System)\n- Multi-status pipeline (new, contacted, qualified, negotiation, closed)\n- Property data enrichment\n- Motivation tracking\n\n**Contract & Document Management:**\n- Contract template system\n- Document version control\n- Letter of Intent (LOI) generation\n- Digital signature workflow\n\n**Team Collaboration:**\n- Multi-user support with role-based permissions\n- Team activity logging\n- Timesheet tracking\n- Notification system\n\n**Analytics & Reporting:**\n- Deal pipeline visualization\n- Revenue tracking\n- Conversion rate analysis\n- Deal calculator for profitability analysis\n\n**User Experience:**\n- Responsive design for mobile/tablet/desktop\n- Real-time notifications\n- Search functionality across entities\n- Customizable user preferences\n\n## External Dependencies\n\n### Database\n- **PostgreSQL**: Primary data store, accessed via Neon serverless driver\n- **Drizzle ORM**: Type-safe database toolkit with schema-first approach\n- **connect-pg-simple**: PostgreSQL session store for Express sessions\n\n### Third-Party Services (Planned/Integrated)\n- **RELAS API**: Proprietary lead scoring system integration (referenced in documentation)\n- Property data providers integration planned (PropStream/Attom APIs mentioned but not yet implemented)\n\n### UI Component Libraries\n- **Radix UI**: Headless component primitives for accessibility\n- **Recharts**: Charting library for analytics dashboards\n- **shadcn/ui**: Pre-built component library built on Radix\n\n### Development Tools\n- **Vite**: Build tool and dev server\n- **esbuild**: Production bundler for server code\n- **TypeScript**: Type safety across the stack\n- **Tailwind CSS**: Utility-first styling framework\n\n### Authentication & Security\n- **bcryptjs**: Password hashing\n- **speakeasy**: Two-factor authentication (TOTP)\n- **qrcode**: QR code generation for 2FA setup\n\n### Replit Integration\n- Custom Vite plugins for Replit-specific features (meta images, cartographer, dev banner)\n- Environment-aware deployment URL handling","path":null,"size_bytes":6702,"size_tokens":null},"client/src/pages/signup.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Loader2 } from 'lucide-react';\nimport { toast } from 'sonner';\n\nexport default function Signup() {\n  const [, setLocation] = useLocation();\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [employeeCode, setEmployeeCode] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const VALID_EMPLOYEE_CODE = \"3911\";\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      // Validate employee code\n      if (employeeCode !== VALID_EMPLOYEE_CODE) {\n        toast.error('Invalid employee code. Contact your manager for access.');\n        setIsLoading(false);\n        return;\n      }\n\n      // Validate passwords match\n      if (password !== confirmPassword) {\n        toast.error('Passwords do not match');\n        setIsLoading(false);\n        return;\n      }\n\n      // Validate password strength\n      if (password.length < 8) {\n        toast.error('Password must be at least 8 characters');\n        setIsLoading(false);\n        return;\n      }\n\n      // Create new employee account\n      const res = await fetch('/api/auth/signup', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          firstName,\n          lastName,\n          email,\n          password,\n          role: 'employee',\n          isSuperAdmin: false,\n          isActive: true,\n        }),\n        credentials: 'include',\n      });\n\n      if (!res.ok) {\n        const errorData = await res.json();\n        throw new Error(errorData.message || 'Signup failed');\n      }\n\n      toast.success('Account created! Redirecting to login...');\n      setTimeout(() => setLocation('/login'), 1500);\n    } catch (error: any) {\n      toast.error(error.message || 'Signup failed');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted/20 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"space-y-1 text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <img \n              src=\"/flipstackk-logo.jpg\" \n              alt=\"FlipStackk Logo\" \n              className=\"h-24 w-auto object-contain\"\n            />\n          </div>\n          <CardTitle className=\"text-3xl font-bold\">Join FlipStackk</CardTitle>\n          <CardDescription>\n            Create your employee account\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"firstName\">First Name</Label>\n                <Input\n                  id=\"firstName\"\n                  type=\"text\"\n                  placeholder=\"First Name\"\n                  value={firstName}\n                  onChange={(e) => setFirstName(e.target.value)}\n                  required\n                  disabled={isLoading}\n                  data-testid=\"input-signup-first-name\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"lastName\">Last Name</Label>\n                <Input\n                  id=\"lastName\"\n                  type=\"text\"\n                  placeholder=\"Last Name\"\n                  value={lastName}\n                  onChange={(e) => setLastName(e.target.value)}\n                  required\n                  disabled={isLoading}\n                  data-testid=\"input-signup-last-name\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"your@email.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                disabled={isLoading}\n                data-testid=\"input-signup-email\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"employeeCode\">Employee Code</Label>\n              <Input\n                id=\"employeeCode\"\n                type=\"password\"\n                placeholder=\"Enter your employee code\"\n                value={employeeCode}\n                onChange={(e) => setEmployeeCode(e.target.value)}\n                required\n                disabled={isLoading}\n                data-testid=\"input-signup-employee-code\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Ask your manager for the employee access code\n              </p>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                disabled={isLoading}\n                data-testid=\"input-signup-password\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n              <Input\n                id=\"confirmPassword\"\n                type=\"password\"\n                placeholder=\"Confirm your password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                required\n                disabled={isLoading}\n                data-testid=\"input-signup-confirm-password\"\n              />\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full bg-primary hover:bg-primary/90 text-white\"\n              disabled={isLoading}\n              data-testid=\"button-signup\"\n            >\n              {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n              Create Account\n            </Button>\n          </form>\n\n          <div className=\"mt-6 text-center text-sm text-muted-foreground\">\n            <p>Already have an account?</p>\n            <a href=\"/login\" className=\"text-primary hover:underline font-medium\">\n              Sign in here\n            </a>\n          </div>\n\n          <div className=\"mt-6 text-center text-xs text-muted-foreground\">\n            <p>© 2025 FlipStackk. All rights reserved.</p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":7096,"size_tokens":null},"server/bootstrap-admin.ts":{"content":"import bcrypt from \"bcryptjs\";\nimport { storage } from \"./storage\";\n\nasync function bootstrapAdmin() {\n  try {\n    console.log(\"🔐 Bootstrapping admin account...\");\n\n    const adminEmail = \"bennyjelleh@icloud.com\";\n    const existingAdmin = await storage.getUserByEmail(adminEmail);\n\n    if (existingAdmin) {\n      console.log(\"✅ Admin account already exists\");\n      console.log(`   Email: ${existingAdmin.email}`);\n      console.log(`   Name: ${existingAdmin.firstName} ${existingAdmin.lastName}`);\n      return;\n    }\n\n    const password = \"FlipStackk2024!\";\n    const passwordHash = await bcrypt.hash(password, 12);\n\n    const adminUser = await storage.createUser({\n      email: adminEmail,\n      passwordHash,\n      firstName: \"Benji Stackk\",\n      lastName: \"Jelleh\",\n      companyName: \"FlipStackk\",\n      role: \"admin\",\n      isSuperAdmin: true,\n      isActive: true,\n    });\n\n    console.log(\"✅ Admin account created successfully!\");\n    console.log(`   ID: ${adminUser.id}`);\n    console.log(`   Email: ${adminUser.email}`);\n    console.log(`   Name: ${adminUser.firstName} ${adminUser.lastName}`);\n\n    const team = await storage.createTeam({\n      name: \"FlipStackk Team\",\n      description: \"Primary team for FlipStackk operations\",\n      ownerId: adminUser.id,\n      isActive: true,\n    });\n\n    console.log(\"✅ Admin team created!\");\n    console.log(`   Team ID: ${team.id}`);\n    console.log(`   Team Name: ${team.name}`);\n\n    await storage.createTeamMember({\n      teamId: team.id,\n      userId: adminUser.id,\n      role: \"owner\",\n      status: \"active\",\n      joinedAt: new Date(),\n    });\n\n    console.log(\"✅ Admin added to team as owner!\");\n    console.log(\"\\n🎉 Bootstrap complete! Admin can now login with:\");\n    console.log(`   Email: ${adminEmail}`);\n    console.log(`   Password: (as provided)`);\n    \n  } catch (error: any) {\n    console.error(\"❌ Bootstrap failed:\", error.message);\n    throw error;\n  }\n}\n\nbootstrapAdmin()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(error);\n    process.exit(1);\n  });\n","path":null,"size_bytes":2071,"size_tokens":null},"client/src/pages/login.tsx":{"content":"import { useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Loader2 } from 'lucide-react';\nimport { toast } from 'sonner';\n\nexport default function Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const { login } = useAuth();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await login(email, password);\n      toast.success('Welcome back!');\n    } catch (error: any) {\n      toast.error(error.message || 'Invalid email or password');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted/20 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"space-y-1 text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <img \n              src=\"/flipstackk-logo.jpg\" \n              alt=\"FlipStackk Logo\" \n              className=\"h-24 w-auto object-contain\"\n            />\n          </div>\n          <CardTitle className=\"text-3xl font-bold\">FlipStackk 6.0</CardTitle>\n          <CardDescription>\n            Sign in to your account to continue\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"bennyjelleh@icloud.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                disabled={isLoading}\n                data-testid=\"input-login-email\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                disabled={isLoading}\n                data-testid=\"input-login-password\"\n              />\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"w-full bg-primary hover:bg-primary/90 text-white\"\n              disabled={isLoading}\n              data-testid=\"button-login\"\n            >\n              {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n              Sign In\n            </Button>\n          </form>\n          \n          <div className=\"mt-6 text-center text-sm text-muted-foreground\">\n            <p>Real Estate Wholesaling CRM</p>\n            <p className=\"mt-2\">Don't have an account?</p>\n            <a href=\"/signup\" className=\"text-primary hover:underline font-medium\">\n              Sign up as an employee\n            </a>\n            <p className=\"mt-4 text-xs\">© 2025 FlipStackk. All rights reserved.</p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":3464,"size_tokens":null},"client/src/components/dashboard/MotivationalBanner.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\nimport banner1 from \"@assets/d199ae88-7727-4c89-9b40-70b0d779ba41_1764244434725.png\";\nimport banner2 from \"@assets/14cd99f0-0520-461a-9bab-2ef4d575e651 (1)_1764244434726.png\";\nimport banner3 from \"@assets/fac383a9-5eb3-4f1f-879e-5a8035b6d3c7 (1)_1764244434728.png\";\nimport banner4 from \"@assets/3963cd8c (1)_1764244434728.png\";\nimport banner5 from \"@assets/b8ea7ed5-2ba5-44b1-a73d-b1b73ea26b3d (1)_1764244434728.png\";\nimport banner6 from \"@assets/9402bce5-3c31-480a-b204-8a0d501032c7 (1)_1764244434729.png\";\nimport banner7 from \"@assets/a9abe541-7697-4dd5-8a56-3445face39e4_1764244434729.png\";\n\nconst defaultBannerImages = [banner1, banner2, banner3, banner4, banner5, banner6, banner7];\n\nconst motivationalQuotes = [\n  { quote: \"Every property has a story. Make yours a success.\", author: \"Real Estate Wisdom\" },\n  { quote: \"The best investment on Earth is earth.\", author: \"Louis Glickman\" },\n  { quote: \"Don't wait to buy real estate. Buy real estate and wait.\", author: \"Will Rogers\" },\n  { quote: \"Real estate cannot be lost or stolen, nor can it be carried away.\", author: \"Franklin D. Roosevelt\" },\n  { quote: \"In real estate, you make 10% of your money in your craft and 90% in your mindset.\", author: \"Grant Cardone\" },\n  { quote: \"Success in real estate comes down to two factors: location and determination.\", author: \"Barbara Corcoran\" },\n  { quote: \"Ninety percent of all millionaires become so through owning real estate.\", author: \"Andrew Carnegie\" },\n  { quote: \"The major fortunes in America have been made in land.\", author: \"John D. Rockefeller\" },\n  { quote: \"Real estate investing, even on a very small scale, remains a tried and true means of building wealth.\", author: \"Robert Kiyosaki\" },\n  { quote: \"Landlords grow rich in their sleep.\", author: \"John Stuart Mill\" },\n  { quote: \"Flip, Stackk, Win! Transform every lead into a deal.\", author: \"FlipStackk\" },\n  { quote: \"Your hustle determines your results. Stack those wins!\", author: \"FlipStackk\" },\n];\n\nexport function MotivationalBanner() {\n  const { user } = useAuth();\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [currentQuoteIndex, setCurrentQuoteIndex] = useState(0);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n\n  const { data: userData } = useQuery<any>({\n    queryKey: [`/api/users/${user?.id}`],\n    enabled: !!user?.id,\n  });\n\n  const showQuotes = userData?.showBannerQuotes !== false;\n  const customImages = userData?.customBannerImages || [];\n  \n  const allImages = [...defaultBannerImages, ...customImages];\n\n  useEffect(() => {\n    const imageInterval = setInterval(() => {\n      setIsTransitioning(true);\n      setTimeout(() => {\n        setCurrentImageIndex((prev) => (prev + 1) % allImages.length);\n        setIsTransitioning(false);\n      }, 500);\n    }, 6000);\n\n    return () => clearInterval(imageInterval);\n  }, [allImages.length]);\n\n  useEffect(() => {\n    if (!showQuotes) return;\n    \n    const quoteInterval = setInterval(() => {\n      setCurrentQuoteIndex((prev) => (prev + 1) % motivationalQuotes.length);\n    }, 8000);\n\n    return () => clearInterval(quoteInterval);\n  }, [showQuotes]);\n\n  const goToPrevious = () => {\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentImageIndex((prev) => (prev - 1 + allImages.length) % allImages.length);\n      setIsTransitioning(false);\n    }, 300);\n  };\n\n  const goToNext = () => {\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentImageIndex((prev) => (prev + 1) % allImages.length);\n      setIsTransitioning(false);\n    }, 300);\n  };\n\n  const currentQuote = motivationalQuotes[currentQuoteIndex];\n\n  return (\n    <div className=\"relative w-full overflow-hidden rounded-xl bg-gradient-to-r from-black via-gray-900 to-black mb-6\" data-testid=\"motivational-banner\">\n      {showQuotes && (\n        <div className=\"px-4 md:px-6 py-4 border-b border-white/10\">\n          <div className=\"max-w-3xl\">\n            <p \n              className=\"text-white text-lg md:text-xl font-semibold italic leading-relaxed transition-all duration-500\"\n              key={currentQuoteIndex}\n            >\n              \"{currentQuote.quote}\"\n            </p>\n            <p className=\"text-white/70 text-sm mt-1\">\n              — {currentQuote.author}\n            </p>\n          </div>\n        </div>\n      )}\n      \n      <div className=\"relative h-48 md:h-56 lg:h-64 overflow-hidden\">\n        <div\n          className={`absolute inset-0 transition-opacity duration-500 ${isTransitioning ? \"opacity-0\" : \"opacity-100\"}`}\n        >\n          <img\n            src={allImages[currentImageIndex]}\n            alt=\"Motivational banner\"\n            className=\"w-full h-full object-cover\"\n          />\n        </div>\n\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white rounded-full h-10 w-10\"\n          onClick={goToPrevious}\n          data-testid=\"banner-prev\"\n        >\n          <ChevronLeft className=\"h-6 w-6\" />\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white rounded-full h-10 w-10\"\n          onClick={goToNext}\n          data-testid=\"banner-next\"\n        >\n          <ChevronRight className=\"h-6 w-6\" />\n        </Button>\n\n        <div className=\"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5\">\n          {allImages.map((_, index) => (\n            <button\n              key={index}\n              onClick={() => {\n                setIsTransitioning(true);\n                setTimeout(() => {\n                  setCurrentImageIndex(index);\n                  setIsTransitioning(false);\n                }, 300);\n              }}\n              className={`w-2 h-2 rounded-full transition-all duration-300 ${\n                index === currentImageIndex\n                  ? \"bg-primary w-6\"\n                  : \"bg-white/50 hover:bg-white/70\"\n              }`}\n              data-testid={`banner-dot-${index}`}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6411,"size_tokens":null},"client/src/pages/notifications.tsx":{"content":"import { Layout } from \"@/components/layout/Layout\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Bell, Trash2, CheckCircle2, AlertCircle, Info, Loader2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\ninterface Notification {\n  id: number;\n  userId: number;\n  type: string;\n  title: string;\n  description: string | null;\n  read: boolean;\n  relatedId: number | null;\n  relatedType: string | null;\n  createdAt: string;\n}\n\nexport default function Notifications() {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n\n  const { data: notifications = [], isLoading } = useQuery<Notification[]>({\n    queryKey: [`/api/users/${user?.id}/notifications`],\n    enabled: !!user?.id,\n  });\n\n  const markAsReadMutation = useMutation({\n    mutationFn: async (id: number) => {\n      const res = await fetch(`/api/notifications/${id}/read`, {\n        method: 'PATCH',\n        credentials: 'include',\n      });\n      if (!res.ok) throw new Error('Failed to mark as read');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}/notifications`] });\n      toast.success('Marked as read');\n    },\n    onError: () => {\n      toast.error('Failed to mark as read');\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: number) => {\n      const res = await fetch(`/api/notifications/${id}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n      if (!res.ok) throw new Error('Failed to delete');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}/notifications`] });\n      toast.success('Notification deleted');\n    },\n    onError: () => {\n      toast.error('Failed to delete notification');\n    },\n  });\n\n  const markAllAsReadMutation = useMutation({\n    mutationFn: async () => {\n      const res = await fetch(`/api/users/${user?.id}/notifications/read-all`, {\n        method: 'PATCH',\n        credentials: 'include',\n      });\n      if (!res.ok) throw new Error('Failed to mark all as read');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}/notifications`] });\n      toast.success('All notifications marked as read');\n    },\n    onError: () => {\n      toast.error('Failed to mark all as read');\n    },\n  });\n\n  const clearAllMutation = useMutation({\n    mutationFn: async () => {\n      const res = await fetch(`/api/users/${user?.id}/notifications`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n      if (!res.ok) throw new Error('Failed to clear all');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}/notifications`] });\n      toast.success('All notifications cleared');\n    },\n    onError: () => {\n      toast.error('Failed to clear notifications');\n    },\n  });\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'lead':\n        return <Info className=\"w-5 h-5 text-blue-500\" />;\n      case 'contract':\n        return <AlertCircle className=\"w-5 h-5 text-orange-500\" />;\n      case 'deal':\n        return <CheckCircle2 className=\"w-5 h-5 text-green-500\" />;\n      case 'task':\n        return <Bell className=\"w-5 h-5 text-purple-500\" />;\n      default:\n        return <Bell className=\"w-5 h-5 text-gray-500\" />;\n    }\n  };\n\n  const formatTime = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return date.toLocaleDateString();\n  };\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center h-96\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"space-y-6\">\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n          <div className=\"space-y-1\">\n            <h1 className=\"text-3xl font-bold tracking-tight\">Notifications</h1>\n            <p className=\"text-muted-foreground\">\n              {unreadCount > 0 ? `You have ${unreadCount} unread notification${unreadCount !== 1 ? 's' : ''}` : 'All caught up!'}\n            </p>\n          </div>\n          <div className=\"flex gap-2\">\n            {unreadCount > 0 && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => markAllAsReadMutation.mutate()}\n                disabled={markAllAsReadMutation.isPending}\n                data-testid=\"button-mark-all-read\"\n              >\n                {markAllAsReadMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                Mark all as read\n              </Button>\n            )}\n            {notifications.length > 0 && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => clearAllMutation.mutate()}\n                disabled={clearAllMutation.isPending}\n                className=\"text-destructive hover:text-destructive\"\n                data-testid=\"button-clear-all\"\n              >\n                {clearAllMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                Clear all\n              </Button>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-3\">\n          {notifications.length === 0 ? (\n            <Card>\n              <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                <Bell className=\"w-12 h-12 text-muted-foreground/50 mb-3\" />\n                <p className=\"text-muted-foreground\">No notifications yet</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  You'll get notifications about leads, contracts, and deals here\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            notifications.map((notification) => (\n              <Card \n                key={notification.id} \n                className={`transition-all ${!notification.read ? 'border-primary/50 bg-primary/5' : ''}`}\n                data-testid={`notification-${notification.id}`}\n              >\n                <CardContent className=\"p-4\">\n                  <div className=\"flex gap-4 items-start\">\n                    <div className=\"mt-1\">\n                      {getNotificationIcon(notification.type)}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <div>\n                          <h4 className=\"font-semibold text-sm leading-tight\">\n                            {notification.title}\n                          </h4>\n                          {notification.description && (\n                            <p className=\"text-sm text-muted-foreground mt-1\">\n                              {notification.description}\n                            </p>\n                          )}\n                          <p className=\"text-xs text-muted-foreground mt-2\">\n                            {formatTime(notification.createdAt)}\n                          </p>\n                        </div>\n                        <div className=\"flex gap-2 flex-shrink-0\">\n                          {!notification.read && (\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => markAsReadMutation.mutate(notification.id)}\n                              disabled={markAsReadMutation.isPending}\n                              data-testid={`button-mark-read-${notification.id}`}\n                              className=\"h-8 w-8 p-0\"\n                            >\n                              <CheckCircle2 className=\"w-4 h-4\" />\n                            </Button>\n                          )}\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => deleteMutation.mutate(notification.id)}\n                            disabled={deleteMutation.isPending}\n                            data-testid={`button-delete-notif-${notification.id}`}\n                            className=\"h-8 w-8 p-0 text-destructive hover:text-destructive\"\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2 mt-3\">\n                        <Badge variant=\"outline\" className=\"text-xs capitalize\">\n                          {notification.type}\n                        </Badge>\n                        {!notification.read && (\n                          <Badge className=\"bg-primary text-white text-xs\">\n                            New\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          )}\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":9916,"size_tokens":null}},"version":2}